(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04b5a17e"],{"07b2":function(e,t,a){},"0a90":function(e,t,a){var r=a("63b6"),i=a("10ff");r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},"10ff":function(e,t,a){var r=a("e53d").parseFloat,i=a("a1ce").trim;e.exports=1/r(a("e692")+"-0")!==-1/0?function(e){var t=i(String(e),3),a=r(t);return 0===a&&"-"==t.charAt(0)?-0:a}:r},"15c8":function(e,t,a){},"1e0c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"tablet"}},[a("div",{staticClass:"queryBox"},[a("QueryBox",{staticStyle:{width:"calc(100% - 75px)"},attrs:{formArr:e.queryFrom},on:{query:e.getQueryData}}),a("div",{staticClass:"queryBtns"},[a("Button",{staticClass:"btn-add",attrs:{type:"success",size:"small",icon:"md-add"},on:{click:function(t){t.stopPropagation(),e.addActive=!0,e.$refs.proAppAdd.initCom()}}},[e._v("新建")])],1)],1),a("div",{staticClass:"content_box"},[a("div",[a("Table",{attrs:{loading:e.loading,border:"",stripe:"",columns:e.columns1,data:e.data1,"highlight-row":"","max-height":e.tableHeight}}),a("div",{staticClass:"page_box"},[a("Page",{attrs:{total:e.total,"page-size":e.pageSize,"show-total":""},on:{"on-change":e.pageChange}})],1)],1)]),a("div",{staticClass:"add_box",class:{addActive:e.addActive}},[a("ProAppAdd",{ref:"proAppAdd",attrs:{seeId:e.seeId,fileUrl:e.fileUrl},on:{getNewList:e.getNewList,signOut:e.signOut}})],1)])},i=[],n=a("cebc"),s=(a("7f7f"),a("cadf"),a("551c"),a("f751"),a("097d"),a("aff7")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"proAppAdd"},[a("div",{ref:"viewDiv",class:{cursorPen:e.drawing&&("polyline"===e.drawType||"polygon"===e.drawType)},attrs:{id:"viewDiv"}}),a("div",{staticClass:"addForm"},[a("h3",[e._v("项目准入")]),a("hr",{staticStyle:{"margin-bottom":"15px"}}),a("Form",{ref:"formValidate",attrs:{model:e.formItem,rules:e.ruleValidate,"label-width":90}},[a("FormItem",{staticStyle:{"margin-bottom":"18px"},attrs:{label:"项目名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入项目名称",size:"small"},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name","string"===typeof t?t.trim():t)},expression:"formItem.name"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"18px"},attrs:{label:"缓冲区半径",prop:"radius"}},[a("Input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入缓冲区半径",size:"small"},model:{value:e.formItem.radius,callback:function(t){e.$set(e.formItem,"radius","string"===typeof t?t.trim():t)},expression:"formItem.radius"}}),a("span",{staticStyle:{"padding-left":"10px"}},[e._v("米")])],1),a("FormItem",{staticStyle:{"margin-bottom":"18px"},attrs:{label:"项目描述"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入项目描述",autosize:{maxRows:3,minRows:3}},model:{value:e.formItem.description,callback:function(t){e.$set(e.formItem,"description","string"===typeof t?t.trim():t)},expression:"formItem.description"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"18px"},attrs:{label:"图层选择"}},[a("Select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.layers,callback:function(t){e.layers=t},expression:"layers"}},[a("Option",{attrs:{value:"redline"}},[e._v("红线斑块")]),a("Option",{attrs:{value:"natural",disabled:""}},[e._v("自然保护区")])],1)],1),a("FormItem",{staticStyle:{"margin-bottom":"18px"},attrs:{label:"项目形状"}},[a("ButtonGroup",{staticStyle:{width:"100%"}},[a("Button",{staticStyle:{width:"33%"},attrs:{size:"small",type:"point"===e.drawType?"primary":"default"},on:{click:function(t){e.drawType="point"}}},[a("Icon",{attrs:{type:"md-radio-button-on"}})],1),a("Button",{staticStyle:{width:"33%"},attrs:{size:"small",type:"polyline"===e.drawType?"primary":"default"},on:{click:function(t){e.drawType="polyline"}}},[a("Icon",{attrs:{type:"md-remove"}})],1),a("Button",{staticStyle:{width:"33%"},attrs:{size:"small",type:"polygon"===e.drawType?"primary":"default"},on:{click:function(t){e.drawType="polygon"}}},[a("Icon",{attrs:{type:"md-square"}})],1)],1)],1),a("FormItem",{staticStyle:{"margin-bottom":"5px",width:"100%"},attrs:{"label-width":0}},[a("ButtonGroup",{staticStyle:{width:"100%"},attrs:{size:"small"}},[a("Button",{staticStyle:{width:"50%"},attrs:{type:!0===e.drawing?"primary":"default"},on:{click:e.clickDraw}},[e._v("绘制")]),a("Button",{staticStyle:{width:"50%"}},[a("Upload",{staticStyle:{height:"19px"},attrs:{"show-upload-list":!1,format:[".xls"],"before-upload":e.handleUpload,action:"#"}},[a("span",{staticStyle:{display:"inline-block",width:"119px"}},[e._v("上传")])])],1)],1),a("p",{staticStyle:{"text-align":"right"}},[a("a",{attrs:{href:"/epr/excelModel/坐标.xls",download:"坐标模板.xls"}},[a("span",{staticStyle:{cursor:"pointer",color:"dodgerblue"}},[e._v("下载上传文件模板")])])]),e.drawValidate?a("p",{staticStyle:{height:"18px",color:"red","text-align":"right"}},[a("span",[e._v(e._s(e.validateText))])]):e._e()],1),a("FormItem",{staticStyle:{"text-align":"right","margin-bottom":"0"}},[a("Button",{ref:"analysis",staticStyle:{"margin-right":"15px"},attrs:{type:"primary",size:"small"},on:{click:e.analysis}},[e._v("分析")]),a("Button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary",size:"small",disabled:!e.analysisEnd},on:{click:e.addPro}},[e._v("保存")]),a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.$emit("signOut",!1),e.analysisEnd=!1}}},[e._v("退出")])],1)],1)],1),a("div",{staticClass:"analysisList",class:{active:e.analysisList}},[a("ProAppAnalysis",{attrs:{data:e.analysisData,saveEnd:e.saveEnd,shapearea:e.shapearea,mapPhoto:e.dataUrl},on:{onclickDingwei:e.onclickDingwei}})],1),e.analysisSpin?a("Spin",{staticStyle:{background:"rgba(255, 255, 255, 0.5)","font-size":"18px",color:"#3B4EF5"},attrs:{fix:"",size:"large"}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"22"}}),a("div",[e._v("分析计算中...")])],1):e._e()],1)},c=[],l=(a("ac6a"),a("6b54"),a("e814")),u=a.n(l),d=(a("96cf"),a("3b8d")),p=a("f499"),h=a.n(p),f=a("59ad"),m=a.n(f),g=a("bdb4"),y=a("9ed9"),w=a("149e"),b=a("f831"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"proAppAnalysis"},[a("div",{staticClass:"analysis"},[a("h3",[e._v("分析条件")]),a("div",[a("p",[e._v("缓冲区半径："+e._s(e.data.radius))]),a("p",[e._v("绘制缓冲范围："+e._s(e.shapearea)+"平方米")])]),a("h3",[e._v("分析结果：")]),e.data.comState?e._e():a("div",[e._v("\n      结果计算中....\n    ")]),e.data.comState?a("div",[a("p",[e._v("相交结果："+e._s(e.data.result))]),a("p",{staticStyle:{"margin-bottom":"5px"}},[e._v("相交明细：")])]):e._e(),e.data.comState?a("div",{staticClass:"table_box"},[a("Table",{staticClass:"detailed",attrs:{columns:e.columns1,data:e.data.details,size:"small"}})],1):e._e()]),a("Button",{staticStyle:{position:"absolute",bottom:"20px",right:"20px"},attrs:{type:"primary",size:"small",disabled:""===e.data.fileUrl}},[a("a",{staticStyle:{color:"inherit",cursor:"pointer"},attrs:{href:e.data.fileUrl,download:e.data.name+"准入分析报告.docx"}},[e._v("\n      下载分析报告\n    ")])])],1)},A=[],x={name:"ProAppAnalysis",data:function(){var e=this;return{columns1:[{title:"相交斑块",key:"redineId",width:90},{title:"相交面积",key:"intersectArea",align:"center",render:function(e,t){return e("span",{},t.row.intersectArea+"平方米")}},{title:"操作",align:"center",width:80,render:function(t,a){return t("div",[t("Button",{props:{size:"small"},on:{click:function(){e.$emit("onclickDingwei",a.index)}}},"定位")])}}],data1:[],mapPhotos:"123456"}},props:{data:{default:{details:[]}},saveEnd:{},mapPhoto:{},shapearea:{}},mounted:function(){},methods:{}},k=x,O=(a("84d2"),a("eb03"),a("2877")),j=Object(O["a"])(k,v,A,!1,null,"1febe80e",null),S=j.exports,I=a("6b51"),B=a.n(I),D={name:"ProAppAdd",data:function(){return{shapearea:0,id:"",formItem:{},layers:"redline",drawType:"point",shapeObj:{},analysisList:!1,drawing:!1,map:{},view:{},draw:{},bufferLayer:{},insercLayer:{},srldFeature:[],ruleValidate:{name:[{required:!0,message:"项目名称不能为空",trigger:"change"}],radius:[{required:!0,message:"缓冲区半径不能为空",trigger:"change"}]},drawValidate:!1,validateText:"",buffer:{},comState:!1,file:null,loadingStatus:!1,excalData:[],analysisEnd:!1,saveEnd:!1,analysisSpin:!1,dataUrl:"",saveFileUrl:"",proportion:"1"}},computed:{intersect:function(){return 0===this.srldFeature.length?"不落在":"落在"},analysisArr:function(){var e=[];for(var t in this.srldFeature){var a={redineId:this.srldFeature[t].attributes.hxcode,intersectArea:(1*this.srldFeature[t].attributes.shapearea).toFixed(2)};e.push(a)}return e},analysisArea:function(){return console.log(this.buffer.shapearea),console.log(m()(this.buffer.shapearea).toFixed(2)),(1*this.buffer.shapearea).toFixed(2)},analysisData:function(){var e={radius:this.formItem.radius+"米",area:this.analysisArea+"平方米",result:this.intersect,details:this.analysisArr,comState:this.comState,fileUrl:""===this.saveFileUrl?this.fileUrl:this.saveFileUrl,name:this.formItem.name};return e},coordinate:function(){if("{}"!==h()(this.shapeObj))switch(this.shapeObj.type){case"polygon":return this.shapeObj.rings[0];case"polyline":return this.shapeObj.paths[0];case"point":return[this.shapeObj.x,this.shapeObj.y]}return[]},addData:function(){var e={id:1*this.id,createBy:this.$store.getters.getloginInfor().userId,projectName:this.formItem.name,shape:this.drawType,radius:1*this.formItem.radius,result:this.intersect,bufferRange:this.analysisArea,detail:this.analysisArr,coordinate:this.coordinate,image:this.dataUrl,proportion:this.proportion,description:this.formItem.description};return e}},props:{seeId:{},fileUrl:{}},components:{ProAppAnalysis:S},watch:{drawType:function(){this.drawing=!1,this.shapeObj={},this.view.graphics.removeAll(),this.map.remove(this.bufferLayer),this.map.remove(this.insercLayer)},seeId:function(){this.getProjectById(),this.id=this.seeId}},mounted:function(){this.createMap()},methods:{createMap:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,a,r,i,n,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y["a"].MapView;case 2:return t=e.sent,e.next=5,y["a"].Map;case 5:return a=e.sent,e.next=8,y["a"].Basemap;case 8:return r=e.sent,e.next=11,y["a"].Draw;case 11:return i=e.sent,e.next=14,Object(b["h"])().then(function(e){return e});case 14:return n=e.sent,e.next=17,Object(b["i"])().then(function(e){return e});case 17:return s=e.sent,e.next=20,Object(b["c"])().then(function(e){return e});case 20:o=e.sent,c=new r({baseLayers:[n,s,o],title:"Custom Basemap",id:"myBasemap"}),this.map=new a({basemap:c}),this.view=new t({map:this.map,container:"viewDiv",center:w["a"].centerPoint,spatialReference:{wkid:4490},zoom:7}),this.draw=new i({view:this.view});case 25:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),clickDraw:function(){if(this.drawing)this.drawing=!1,this.shapeObj={},this.view.graphics.removeAll(),this.action=this.draw.create(this.drawType);else if(this.shapeObj={},this.map.remove(this.bufferLayer),this.map.remove(this.insercLayer),this.drawing=!0,this.drawing)switch(this.action=this.draw.create(this.drawType),this.drawType){case"point":this.drawPoint(this.action);break;case"polyline":this.drawLine(this.action);break;case"polygon":this.drawPolygon(this.action);break}},drawPoint:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.on(["cursor-update","draw-complete"],function(e){a.renderPoint(e.coordinates)}),t.on(["draw-complete"],function(e){a.drawing=!1});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),renderPoint:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var a,r,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y["a"].Graphic;case 2:a=e.sent,this.view.graphics.removeAll(),r={type:"point",x:t[0],y:t[1],spatialReference:this.view.spatialReference},i={type:"picture-marker",url:B.a,height:20,width:20,yoffset:10,outline:{color:[255,255,255],width:1}},n=new a({geometry:r,symbol:i}),this.view.graphics.add(n),this.shapeObj=r;case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),drawLine:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.on(["vertex-add","vertex-remove","cursor-update","draw-complete"],function(e){a.renderLine(e.vertices)}),t.on(["draw-complete"],function(e){a.drawing=!1});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),renderLine:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var a,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y["a"].Graphic;case 2:a=e.sent,this.view.graphics.removeAll(),r={type:"polyline",paths:t,spatialReference:this.view.spatialReference},i=new a({geometry:r,symbol:{type:"simple-line",color:[51,133,255],width:2,cap:"round",join:"round"}}),this.view.graphics.add(i),this.shapeObj=r,this.shapeObj.paths=[this.shapeObj.paths];case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),drawPolygon:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.on(["vertex-add","vertex-remove","cursor-update","draw-complete"],function(e){a.renderPolygon(e.vertices)}),t.on(["draw-complete"],function(e){a.drawing=!1});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),renderPolygon:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var a,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y["a"].Graphic;case 2:a=e.sent,this.view.graphics.removeAll(),r={type:"polygon",rings:t,spatialReference:this.view.spatialReference},i=new a({geometry:r,symbol:{type:"simple-fill",color:[51,133,255,.5],style:"solid",outline:{color:[51,133,255,.8],width:1}}}),this.view.graphics.add(i),this.shapeObj=r,this.shapeObj.rings=[this.shapeObj.rings];case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getbuffer:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,a,r,i,n,s,o,c,l,d,p,h,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y["a"].Graphic;case 2:return t=e.sent,e.next=5,y["a"].GraphicsLayer;case 5:return a=e.sent,e.next=8,y["a"].geometryEngine;case 8:return r=e.sent,e.next=11,y["a"].GeometryService;case 11:return i=e.sent,e.next=14,y["a"].BufferParameters;case 14:return n=e.sent,e.next=17,y["a"].AreasAndLengthsParameters;case 17:if(s=e.sent,o={type:"simple-fill",color:[140,140,222,.5],outline:{color:[140,140,222,.8],width:1}},c=new i({url:w["a"].geometryServerUrl}),"point"!==this.shapeObj.type){e.next=27;break}return e.next=23,y["a"].Point;case 23:l=e.sent,this.shapeObj=new l(this.shapeObj),e.next=39;break;case 27:if("polyline"!==this.shapeObj.type){e.next=34;break}return e.next=30,y["a"].Polyline;case 30:d=e.sent,this.shapeObj=new d(this.shapeObj),e.next=39;break;case 34:if("polygon"!==this.shapeObj.type){e.next=39;break}return e.next=37,y["a"].Polyline;case 37:p=e.sent,this.shapeObj=new p(this.shapeObj);case 39:return h=new a,e.next=42,c.buffer(new n({unit:"meters",outSpatialReference:this.view.spatialReference,geometries:[this.shapeObj],distances:[u()(this.formItem.radius)],geodesic:!0,bufferSpatialReference:this.view.spatialReference}));case 42:return this.buffer=e.sent,this.buffer=this.buffer[0],"polygon"===this.shapeObj.type&&(this.buffer=r.union([this.buffer,this.shapeObj]),this.buffer.rings=[this.buffer.rings[0]]),e.next=47,c.areasAndLengths(new s({calculationType:"geodesic",areaUnit:"square-meters",lengthUnit:"kilometers",polygons:[this.buffer]}));case 47:return f=e.sent,console.log(this.buffer),this.buffer.shapearea=f.areas[0],this.shapearea=f.areas[0],this.graphic=new t({geometry:this.buffer,symbol:o}),this.map.remove(this.insercLayer),e.next=55,this.view.goTo(this.buffer.extent,{duration:600});case 55:h.add(this.graphic),this.map.add(h),this.bufferLayer=h,console.log(this.bufferLayer);case 59:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),clickBtn:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,a,r,i,n,s,o,c,l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y["a"].Geoprocessor;case 2:return t=e.sent,e.next=5,y["a"].FeatureSet;case 5:return a=e.sent,e.next=8,y["a"].GraphicsLayer;case 8:return r=e.sent,e.next=11,y["a"].geometryEngine;case 11:return e.sent,e.next=14,y["a"].GeometryService;case 14:return i=e.sent,e.next=17,y["a"].AreasAndLengthsParameters;case 17:return n=e.sent,s=new t(w["a"].GeoprocessorUrl),o=new a,o.features=[this.graphic],c={polygon:o,areafield:"mianji",redline:"E:\\epr\\shp\\2019-11-01\\16\\7dcad6b3c0df4a418e15631a6579515f.shp"},e.next=24,s.submitJob(c).then(function(e){"job-succeeded"===e.jobStatus?s.getResultData(e.jobId,"out").then(function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var a,s,o,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log(t),a={type:"simple-fill",color:[140,10,2,.7],outline:{color:[140,10,2,1],width:1}},s=new i({url:w["a"].geometryServerUrl}),o=0;case 4:if(!(o<t.value.features.length)){e.next=13;break}return t.value.features[o].symbol=a,e.next=8,s.areasAndLengths(new n({calculationType:"geodesic",areaUnit:"square-meters",lengthUnit:"kilometers",polygons:[t.value.features[o].geometry]}));case 8:c=e.sent,t.value.features[o].attributes.shapearea=c.areas[0];case 10:o++,e.next=4;break;case 13:return l.comState=!0,l.srldFeature=t.value.features,l.map.remove(l.insercLayer),u=new r,u.addMany(t.value.features),e.next=20,l.map.add(u);case 20:return l.insercLayer=u,l.analysisEnd=!0,e.next=24,setTimeout(function(){l.screenshot()},1e3);case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()):console.log(e.jobStatus)});case 24:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),screenshot:function(){var e=this,t={x:this.buffer.extent.xmax,y:this.buffer.extent.ymax,spatialReference:{wkid:w["a"].mapWkid}},a={x:this.buffer.extent.xmin,y:this.buffer.extent.ymin,spatialReference:{wkid:w["a"].mapWkid}},r=this.view.toScreen(t),i=this.view.toScreen(a),n={x:Math.min(i.x,r.x)-20,y:Math.min(i.y,r.y)-20,width:Math.abs(r.x-i.x)+40,height:Math.abs(r.y-i.y)+40};this.proportion=(Math.abs(r.y-i.y)+40)/(Math.abs(r.x-i.x)+40),this.proportion=this.proportion.toString(),this.view.takeScreenshot({area:n,format:"png"}).then(function(t){e.dataUrl=t.dataUrl,e.analysisSpin=!1})},analysis:function(){var e=this;this.comState=!1,this.$refs["formValidate"].validate(function(t){t&&(e.analysisSpin=!0,"{}"!==h()(e.shapeObj)?"polygon"===e.shapeObj.type&&e.view.graphics.items[0].geometry.isSelfIntersecting?(e.validateText="请绘制闭合且不会自相交的多边形进行分析",e.view.graphics.removeAll(),e.drawValidate=!0,e.analysisSpin=!1):e.analysisDraw():(e.validateText="请先绘制或上传项目形状",e.drawValidate=!0,e.analysisList=!1,e.analysisSpin=!1))})},analysisDraw:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.map.remove(this.bufferLayer),this.map.remove(this.insercLayer),this.drawValidate=!1,this.analysisList=!0,e.next=6,this.getbuffer();case 6:return e.next=8,this.clickBtn();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onclickDingwei:function(e){var t=this,a=this.insercLayer.graphics.items;a.forEach(function(a,r){r===e?(a.symbol={type:"simple-fill",color:[12,140,2,.8],outline:{color:[0,0,0,.8],width:2}},t.view.goTo(a,{duration:600})):a.symbol={type:"simple-fill",color:[140,10,2,.8],outline:{color:[0,0,0,.8],width:2}}})},handleUpload:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var a,r,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y["a"].WebMercatorUtils;case 2:a=e.sent,r=new FormData,r.append("file",t,t.name),Object(g["c"])(r).then(function(e){if("0000"===e.data.code){for(var t in i.excalData=[],e.data.data)null!==e.data.data[t][0]&&null!==e.data.data[t][1]&&i.excalData.push(a.lngLatToXY(e.data.data[t][0],e.data.data[t][1]));if(0===i.excalData.length)i.$Modal.warning({title:"警告",content:"请在模板文件中填充数据"});else switch(i.drawType){case"point":i.excalData.length>1&&i.$Modal.warning({title:"警告",content:"当项目形状为点,且excal文件中存在多个点时只显示第一个点"}),i.renderPoint(i.excalData[0]);break;case"polyline":i.renderLine(i.excalData);break;case"polygon":i.excalData[0]!==i.excalData[i.excalData.length-1]&&i.excalData.push(i.excalData[0]),i.renderPolygon(i.excalData);break}}});case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addPro:function(){var e=this;this.$refs["formValidate"].validate(function(t){t&&Object(g["a"])({data:e.addData}).then(function(t){"0000"===t.data.code?(e.$Notice.success({title:"保存成功"}),e.id=t.data.data.id,e.saveFileUrl=t.data.data.fileUrl,e.saveEnd=!0,e.$emit("getNewList")):e.$Notice.error({title:t.data.msg})})})},getProjectById:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["b"])({data:{id:this.seeId}}).then(function(e){if("0000"===e.data.code)switch(t.formItem.name=e.data.data.name,t.formItem.radius=e.data.data.radius.toString(),t.formItem.description=e.data.data.description,t.drawType=e.data.data.shape,t.drawType){case"point":t.renderPoint(e.data.data.coordinate);break;case"polyline":t.renderLine(e.data.data.coordinate);break;case"polygon":t.renderPolygon(e.data.data.coordinate);break}}).catch(function(e){t.$Notice.error({title:"服务器错误"})});case 2:return e.next=4,this.analysis();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),initCom:function(){this.id="",this.formItem={},this.drawType="point",this.shapeObj={},this.analysisList=!1,this.$refs["formValidate"].resetFields(),this.analysisEnd=!1,this.saveEnd=!1,this.drawing=!1,this.map.remove(this.bufferLayer),this.map.remove(this.insercLayer),this.view.graphics.removeAll()}}},P=D,L=(a("41f8"),Object(O["a"])(P,o,c,!1,null,"7e7aad6c",null)),U=L.exports,M=a("cf45"),T={name:"ActualTablet",data:function(){var e=this;return{queryData:{},tableHeight:window.innerHeight-312,columns1:[{title:"序号",key:"jzKh",align:"center",minWidth:100,render:function(t,a){return t("span",a.index+(e.pageNum-1)*e.pageSize+1)}},{title:"项目名称",key:"name",align:"center",minWidth:200},{title:"项目简介",key:"description",align:"center",minWidth:200},{title:"创建时间",key:"createDate",align:"center",width:120,render:function(e,t){return e("span",Object(M["c"])(t.row.createDate))}},{title:"分析报告",key:"placeName",align:"center",width:100,render:function(e,t){return e("div",[e("Button",{props:{type:"success",size:"small",class:"btn-exportBtn"}},[e("i",{class:"iconfont icon-plus-download",style:{fontSize:"12px",marginRight:"4px"}}),e("a",{style:{color:"inherit",cursor:"pointer"},attrs:{href:t.row.fileUrl,download:t.row.name+"准入分析报告.docx"}},"下载")])])}},{title:"操作",key:"isBs",align:"center",width:170,render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small",icon:"md-eye"},style:{marginRight:"10px"},on:{click:function(){e.seeId=a.row.id,e.addActive=!0,e.fileUrl=a.row.fileUrl}}},"查看"),t("Button",{props:{type:"error",size:"small",icon:"md-trash"},on:{click:function(){e.$Modal.confirm({title:"确认",content:"请问您确定要删除该项目么？",onOk:function(){e.proDelete(a.row.id)},onCancel:function(){}})}}},"删除")])}}],data1:[],pageNum:1,pageSize:Math.floor((window.innerHeight-312)/48),total:0,loading:!1,addActive:!1,seeId:0,fileUrl:""}},components:{QueryBox:s["a"],ProAppAdd:U},computed:{queryFrom:function(){return[{type:1,field:"projectName",title:"项目名称"}]}},watch:{queryData:function(){this.getTableData()}},created:function(){this.getTableData()},mounted:function(){var e=this;window.addEventListener("resize",function(){e.tableHeight=48*Math.floor((window.innerHeight-300-40)/48)+40,e.pageSize=Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),e.getTableData()},!1)},methods:{getQueryData:function(e){this.queryData=e,this.pageNum=1,this.getTableData()},getTableData:function(){var e=this;this.loading=!0,Object(g["d"])({data:Object(n["a"])({pageNum:this.pageNum,pageSize:this.pageSize,shape:"",startTime:"",endTime:""},this.queryData)}).then(function(t){e.data1=t.data.data.rows,e.total=t.data.data.total,e.loading=!1}).catch(function(){e.$Notice.error({title:"服务器错误"})})},proDelete:function(e){var t=this;Object(g["e"])({data:{id:e}}).then(function(){t.$Notice.success({title:"删除成功"}),t.getTableData()}).catch(function(){t.$Notice.error({title:"服务器错误"})})},pageChange:function(e){this.pageNum=e,this.getTableData()},signOut:function(e){this.addActive=e},getNewList:function(){this.getTableData(),this.pageNum=1}}},R=T,F=(a("d39e"),Object(O["a"])(R,r,i,!1,null,"5eab4911",null));t["default"]=F.exports},"2b06":function(e,t,a){},"39cd":function(e,t,a){},"41f8":function(e,t,a){"use strict";var r=a("39cd"),i=a.n(r);i.a},"59ad":function(e,t,a){e.exports=a("7be7")},"6b51":function(e,t){e.exports="data:image/png;base64,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"},"7be7":function(e,t,a){a("0a90"),e.exports=a("584a").parseFloat},"7f7f":function(e,t,a){var r=a("86cc").f,i=Function.prototype,n=/^\s*function ([^ (]*)/,s="name";s in i||a("9e1e")&&r(i,s,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(e){return""}}})},"84d2":function(e,t,a){"use strict";var r=a("07b2"),i=a.n(r);i.a},a21f:function(e,t,a){var r=a("584a"),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},bdb4:function(e,t,a){"use strict";a.d(t,"d",function(){return i}),a.d(t,"e",function(){return n}),a.d(t,"b",function(){return s}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return c});var r=a("b775"),i=function(e){return Object(r["a"])({url:"/ktdb/projectAdmission/list",method:"post",data:e})},n=function(e){return Object(r["a"])({url:"/ktdb/projectAdmission/delete",method:"post",data:e})},s=function(e){return Object(r["a"])({url:"/ktdb/projectAdmission/getProjectById",method:"post",data:e})},o=function(e){return Object(r["a"])({url:"/ktdb/projectAdmission/import",method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})},c=function(e){return Object(r["a"])({url:"/ktdb/projectAdmission/add",method:"post",data:e})}},d39e:function(e,t,a){"use strict";var r=a("15c8"),i=a.n(r);i.a},eb03:function(e,t,a){"use strict";var r=a("2b06"),i=a.n(r);i.a},f499:function(e,t,a){e.exports=a("a21f")}}]);
//# sourceMappingURL=chunk-04b5a17e.1ce21908.js.map