(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14f3e72e"],{"232f":function(t,e,a){"use strict";var i=a("dc4e"),n=a.n(i);n.a},"2e13":function(t,e,a){},"39f3":function(t,e,a){t.exports=a.p+"img/Basemapthumbnail1.5f8d6db2.png"},"42e8":function(t,e,a){t.exports=a.p+"img/Basemapthumbnail.6dc37597.png"},4634:function(t,e,a){for(var i=a("96dd"),n=a("7d56"),s=a("a6d5"),r=a("3f8b"),o=a("b8ea"),l=a("e3b3"),c=a("1277"),u=c("iterator"),d=c("toStringTag"),f=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=n(p),m=0;m<h.length;m++){var g,b=h[m],y=p[b],v=r[b],k=v&&v.prototype;if(k&&(k[u]||o(k,u,f),k[d]||o(k,d,b),l[b]=f,y))for(g in i)k[g]||s(k,g,i[g],!0)}},"5b6b":function(t,e,a){},"5d85":function(t,e,a){},"6df0":function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"e",(function(){return r})),a.d(e,"g",(function(){return o})),a.d(e,"a",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"h",(function(){return u})),a.d(e,"f",(function(){return d}));var i=a("b775"),n=function(t){return Object(i["a"])({url:"/task/listTask",method:"post",data:t})},s=function(t){return Object(i["a"])({url:"/task/ledgerSelect",method:"post",data:t})},r=function(t){return Object(i["a"])({url:"/task/insertTask",method:"post",data:t})},o=function(t){return Object(i["a"])({url:"/task/updateTask",method:"post",data:t})},l=function(t){return Object(i["a"])({url:"/task/deleteTask",method:"post",data:t})},c=function(t){return Object(i["a"])({url:"/task/getTaskById",method:"post",data:t})},u=function(t){return Object(i["a"])({url:"/user/listUser",method:"post",data:t})},d=function(t){return Object(i["a"])({url:"/checkPoint/sharePoint",method:"post",data:t})}},"784d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tablet"}},[a("div",{staticClass:"queryBox"},[a("QueryBox",{ref:"getQuery",staticStyle:{width:"calc(100% - 160px)"},attrs:{formArr:t.queryFrom},on:{query:t.getQueryData}}),a("div",{staticClass:"queryBtns"},[a("Button",{staticClass:"btn-exportBtn",staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.handleIssue(e)}}},[a("i",{staticClass:"iconfont icon-xiazai"}),t._v("下发")]),a("Button",{staticClass:"btn-add",attrs:{type:"success",size:"small",icon:"md-add"},on:{click:function(e){e.stopPropagation(),t.$refs.taskAdd.taskBuild=!0}}},[t._v("新建")])],1)],1),a("div",{staticClass:"content_box"},[a("div",[a("Table",{ref:"multipleTable",attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns1,data:t.data1,"highlight-row":"","max-height":t.tableHeight},on:{"on-selection-change":t.handleSelectionChange}}),a("div",{staticClass:"page_box"},[a("Page",{ref:"pages",attrs:{total:t.total,"page-size":t.pageSize,current:t.pageNum,"show-total":""},on:{"update:current":function(e){t.pageNum=e},"on-change":t.pageChange}})],1)],1)]),a("taskAdd",{ref:"taskAdd",on:{getTableData:t.getClearQueryData}}),a("taskEdit",{ref:"taskEdit",attrs:{data:t.editDefaultData},on:{getTableData:t.getTableList}}),a("IssueList",{ref:"issueList",attrs:{taskIdArr:t.selectRow}}),a("div",{staticClass:"spotsTable",class:{addActive:t.addActive}},[a("spotsTable",{ref:"spotsTable",attrs:{seeId:t.spotsSeeId},on:{signOut:t.signOut}})],1)],1)},n=[],s=(a("efce"),a("ed8b"),a("97a3")),r=(a("7cfd"),a("4634"),a("aff7")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"taskAdd"}},[a("Modal",{attrs:{title:"新建核查任务"},on:{"on-cancel":t.reset},model:{value:t.taskBuild,callback:function(e){t.taskBuild=e},expression:"taskBuild"}},[a("Form",{ref:"taskAddForm",staticStyle:{padding:"0 20%"},attrs:{model:t.taskAddData,rules:t.taskAddRuleValidate,"label-width":100}},[a("FormItem",{attrs:{prop:"cl002",label:"任务名称："}},[a("Input",{attrs:{placeholder:"请输入任务名称",size:"default"},model:{value:t.taskAddData.cl002,callback:function(e){t.$set(t.taskAddData,"cl002","string"===typeof e?e.trim():e)},expression:"taskAddData.cl002 "}})],1),a("FormItem",{attrs:{prop:"cl010",label:"任务年份："}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{size:"default",type:"year",placement:"bottom-end",placeholder:"请选择任务年份"},model:{value:t.taskAddData.cl010,callback:function(e){t.$set(t.taskAddData,"cl010","string"===typeof e?e.trim():e)},expression:"taskAddData.cl010"}})],1),a("FormItem",{attrs:{prop:"ledgerIdList",label:"任务台账："}},[a("i-select",{staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",placeholder:"请选择任务台账"},model:{value:t.taskAddData.ledgerIdList,callback:function(e){t.$set(t.taskAddData,"ledgerIdList","string"===typeof e?e.trim():e)},expression:"taskAddData.ledgerIdList"}},t._l(t.ledgerList,(function(e){return a("i-option",{attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{prop:"cl009",label:"任务备注："}},[a("i-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入任务备注"},model:{value:t.taskAddData.cl009,callback:function(e){t.$set(t.taskAddData,"cl009","string"===typeof e?e.trim():e)},expression:"taskAddData.cl009"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.taskAddSubmit}},[t._v("确定")])],1)],1)],1)},l=[],c=(a("63ff"),a("f8f9")),u=a("cf45"),d=a("6df0"),f={name:"TaskAdd",data:function(){return{ledgerList:[],taskAddData:{},taskAddRuleValidate:{cl002:[{required:!0,message:"任务名称必须填写",trigger:"blur"}],ledgerIdList:[{required:!0,message:"任务台账必须选择",trigger:"change",type:"array"}]},taskBuild:!1}},mounted:function(){this.getLedgerList()},methods:{getLedgerList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["b"])({data:{}}).then((function(t){"0000"===t.data.code&&t.data.data.data.forEach((function(t,a){e.ledgerList.push({value:t.co001,label:t.name})}))})).catch((function(){e.$Notice.error({title:"服务器错误"})}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),taskAddSubmit:function(){var t=this;this.$refs.taskAddForm.validate((function(e){e&&Object(d["e"])({data:{cl002:t.taskAddData.cl002,cl010:Object(u["d"])(t.taskAddData.cl010),ledgerIdList:t.taskAddData.ledgerIdList,cl009:t.taskAddData.cl009}}).then((function(e){"0000"===e.data.code?(t.$emit("getTableData"),t.$Notice.success({title:"新建核查任务成功"}),t.taskBuild=!1,t.taskAddData={},t.reset()):t.$Message.info(e.data.msg)}))}))},reset:function(){this.taskAddData={cl002:"",cl010:"",ledgerIdList:"",cl009:""},this.$refs.taskAddForm.resetFields()}}},p=f,h=a("6691"),m=Object(h["a"])(p,o,l,!1,null,"237dc8c7",null),g=m.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"taskEdit"}},[a("Modal",{attrs:{title:"修改核查任务"},model:{value:t.taskEdit,callback:function(e){t.taskEdit=e},expression:"taskEdit"}},[a("Form",{ref:"taskEditForm",staticStyle:{padding:"0 20%"},attrs:{model:t.taskEditData,rules:t.taskEditRule,"label-width":100}},[a("FormItem",{staticStyle:{display:"none"},attrs:{prop:"cl003",label:"ID："}},[a("Input",{model:{value:t.taskEditData.cl001,callback:function(e){t.$set(t.taskEditData,"cl001","string"===typeof e?e.trim():e)},expression:"taskEditData.cl001"}})],1),a("FormItem",{attrs:{prop:"cl002",label:"任务名称："}},[a("Input",{attrs:{placeholder:"请输入任务名称",size:"default"},model:{value:t.taskEditData.cl002,callback:function(e){t.$set(t.taskEditData,"cl002","string"===typeof e?e.trim():e)},expression:"taskEditData.cl002 "}})],1),a("FormItem",{attrs:{prop:"cl010",label:"任务年份："}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{size:"default",type:"year",placement:"bottom-end",placeholder:"请选择任务年份"},model:{value:t.taskEditData.cl010,callback:function(e){t.$set(t.taskEditData,"cl010","string"===typeof e?e.trim():e)},expression:"taskEditData.cl010"}})],1),a("FormItem",{attrs:{prop:"ledgerIdList",label:"任务台账："}},[a("i-select",{staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"",placeholder:"请选择任务台账"},model:{value:t.taskEditData.ledgerIdList,callback:function(e){t.$set(t.taskEditData,"ledgerIdList","string"===typeof e?e.trim():e)},expression:"taskEditData.ledgerIdList"}},t._l(t.editLedgerList,(function(e){return a("i-option",{attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{prop:"cl009",label:"任务备注："}},[a("i-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入任务备注"},model:{value:t.taskEditData.cl009,callback:function(e){t.$set(t.taskEditData,"cl009","string"===typeof e?e.trim():e)},expression:"taskEditData.cl009"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.taskEditSubmit}},[t._v("确定")])],1)],1)],1)},y=[],v={name:"Taskedit",data:function(){return{taskEditRule:{cl002:[{required:!0,message:"任务名称必须填写",trigger:"blur"}],ledgerIdList:[{required:!0,message:"任务台账必须选择",trigger:"change",type:"array"}]},taskEdit:!1,taskEditData:{},editLedgerList:[]}},props:{data:{}},watch:{data:function(){this.dataHandle()}},created:function(){this.getLedgerList()},methods:{getLedgerList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(d["b"])({data:{}}).then((function(t){"0000"===t.data.code&&t.data.data.data.forEach((function(t,a){e.editLedgerList.push({value:t.co001,label:t.name})}))})).catch((function(){e.$Notice.error({title:"服务器错误"})}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),dataHandle:function(){this.taskEditData.cl001=this.data.cl001,this.taskEditData.cl002=this.data.cl002,this.taskEditData.cl010=this.data.cl010,this.taskEditData.cl009=this.data.cl009;var t=this.data.st4ScsCoList,e=[];t&&t.length>0&&t.forEach((function(t,a){e.push(t.co001)})),this.$set(this.taskEditData,"ledgerIdList",e)},taskEditSubmit:function(){var t=this;this.$refs.taskEditForm.validate((function(e){e&&Object(d["g"])({data:{cl001:t.taskEditData.cl001,cl002:t.taskEditData.cl002,cl010:Object(u["d"])(t.taskEditData.cl010),ledgerIdList:t.taskEditData.ledgerIdList,cl009:t.taskEditData.cl009}}).then((function(e){"0000"===e.data.code?(t.$Notice.success({title:"编辑核查任务成功"}),t.$emit("getTableData"),t.taskEdit=!1,t.taskEditData={},t.reset()):t.$Notice.error({title:"编辑核查任务失败"})}))}))},reset:function(){this.taskEditData={cl003:"",cl002:"",cl010:"",ledgerIdList:"",cl009:""},this.$refs.taskEditForm.resetFields()}}},k=v,I=Object(h["a"])(k,b,y,!1,null,"285d1943",null),w=I.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"issueList"}},[a("Modal",{attrs:{id:"taskIssueModal",title:"下发人员列表",loading:t.modalIssueLoading},model:{value:t.issue,callback:function(e){t.issue=e},expression:"issue"}},[a("Form",{ref:"formInline",staticClass:"formInline",attrs:{inline:"","label-width":75,model:t.formInline}},[a("FormItem",{attrs:{label:"真实姓名："}},[a("Input",{staticStyle:{width:"150px"},attrs:{type:"text",placeholder:"请输入用户名称"},model:{value:t.formInline.sa019,callback:function(e){t.$set(t.formInline,"sa019",e)},expression:"formInline.sa019"}})],1),a("FormItem",{attrs:{label:"手机号："}},[a("Input",{staticStyle:{width:"150px"},attrs:{type:"text",placeholder:"请输入手机号"},model:{value:t.formInline.sa012,callback:function(e){t.$set(t.formInline,"sa012",e)},expression:"formInline.sa012"}})],1),a("FormItem",{staticClass:"ml20",attrs:{"label-width":0}},[a("Button",{staticClass:"mr10",attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.getIssueList(e)}}},[a("i",{staticClass:"iconfont icon-chaxun1"}),t._v("查询")]),a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.cleardata(e)}}},[a("i",{staticClass:"iconfont icon-zhongzhi"}),t._v("重置")])],1)],1),a("div",[a("Table",{ref:"IssueMultipleTable",attrs:{border:"",stripe:"",loading:t.IssueLoading,columns:t.IssueColumns1,data:t.IssueData,"highlight-row":"","max-height":t.IssueTableHeight},on:{"on-selection-change":t.handleIssueSelectionChange}}),a("div",{staticClass:"page_box"},[a("Page",{ref:"IssuePages",attrs:{total:t.IssueTotal,"page-size":t.IssuePageSize,current:t.IssuePageNum,"show-total":""},on:{"update:current":function(e){t.IssuePageNum=e},"on-change":t.IssuePageChange}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{staticClass:"mr10",attrs:{type:"text"},on:{click:function(e){t.issue=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.handleIssueTask}},[t._v("下发")])],1)],1)],1)},L=[],x={name:"IssueList",data:function(){var t=this;return{issue:!1,modalIssueLoading:!1,formInline:{sa019:"",sa012:""},IssueTableHeight:48*Math.floor((window.innerHeight-350-40)/48)+40,IssueColumns1:[{type:"selection",width:60,align:"center"},{title:"序号",key:"index",width:100,align:"center",render:function(e,a){return e("span",a.index+(t.IssuePageNum-1)*t.IssuePageSize+1)}},{title:"用户名",align:"center",minWidth:200,key:"sa008"},{title:"手机号码",align:"center",minWidth:200,key:"sa012"},{title:"真实姓名",align:"center",minWidth:200,key:"sa019"}],IssueData:[],IssueTotal:0,IssuePageNum:1,IssuePageSize:10,IssueLoading:!1,selectIssueRow:[],multipleIssueSelection:[],taskParamsArr:[]}},props:{taskIdArr:{}},created:function(){this.getIssueList()},watch:{multipleIssueSelection:function(t){var e=this;this.selectIssueRow=[],t.length>0&&t.forEach((function(t,a){e.selectIssueRow.push(t.id)}))},taskIdArr:function(t){this.taskParamsArr=t}},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.IssueTableHeight=48*Math.floor((window.innerHeight-350-40)/48)+40,t.getIssueList()}),!1)},methods:{getIssueList:function(){var t=this;this.IssueLoading=!0,Object(d["h"])({data:{pageSize:this.IssuePageSize,pageNumber:this.IssuePageNum,sa019:this.formInline.sa019,sa012:this.formInline.sa012}}).then((function(e){"0000"===e.data.code&&(t.IssueData=e.data.data.rows,t.IssueTotal=e.data.data.total,t.IssueLoading=!1)})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},IssuePageChange:function(t){this.IssuePageNum=t,this.getIssueList()},handleIssueSelectionChange:function(t){this.multipleIssueSelection=t},handleIssueTask:function(){this.selectIssueRow.length<1?this.$Notice.error({title:"下发人员不能为空！"}):this.handleIssue(this.selectIssueRow)},handleIssue:function(t){var e=this;Object(d["f"])({data:{taskId:this.taskParamsArr.join(","),uidList:t}}).then((function(t){"0000"===t.data.code&&(e.$Notice.success({title:"任务下发成功"}),e.issue=!1)})).catch((function(){e.$Notice.error({title:"服务器错误"})}))},cleardata:function(){this.formInline={},this.getIssueList()}}},O=x,S=(a("ca6d"),Object(h["a"])(O,D,L,!1,null,"5eaf0c1c",null)),E=S.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tablet"}},[a("div",{staticClass:"queryBox"},[a("Button",{staticClass:"sign-btn",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("signOut",!1)}}},[t._v("返回")])],1),a("div",{staticClass:"content_box"},[a("div",[a("Table",{attrs:{border:"",stripe:"",loading:t.spotsLoading,columns:t.spotsColumns1,data:t.spotsData1,"highlight-row":"",height:t.tableHeight}})],1)]),a("div",{staticClass:"extract_box",class:{spotsAddActive:t.spotsAddActive}},[a("taskManagementTableMap",{ref:"taskManagementTableMap",on:{signOut:t.signOut}})],1)])},T=[],C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-box"},[a("div",{ref:"viewDiv",attrs:{id:"viewDiv"}}),a("Button",{staticClass:"sign-btn",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("signOut",!1)}}},[t._v("返回")])],1)},$=[],j=a("9ed9"),_=a("149e"),P=a("f831"),q=a("42e8"),z=a.n(q),B=a("39f3"),M=a.n(B),N={name:"checkInfoMap",data:function(){return{map:{},view:{}}},computed:{},props:{},components:{},watch:{},mounted:function(){this.createMap()},methods:{createMap:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,i,n,s,r,o,l,c,u,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j["a"].MapView;case 2:return e=t.sent,t.next=5,j["a"].Map;case 5:return a=t.sent,t.next=8,j["a"].Basemap;case 8:return i=t.sent,t.next=11,j["a"].BasemapToggle;case 11:return n=t.sent,t.next=14,Object(P["f"])().then((function(t){return t}));case 14:return s=t.sent,t.next=17,Object(P["e"])().then((function(t){return t}));case 17:return r=t.sent,t.next=20,Object(P["d"])().then((function(t){return t}));case 20:return o=t.sent,t.next=23,Object(P["g"])().then((function(t){return t}));case 23:return l=t.sent,t.next=26,Object(P["b"])().then((function(t){return t}));case 26:c=t.sent,u=new i({baseLayers:[r,c,o],title:"矢量地图",id:"myBasemap",thumbnailUrl:z.a}),d=new i({baseLayers:[s,c,l],title:"影像地图",id:"myBasemap1",thumbnailUrl:M.a}),this.map=new a({basemap:d}),this.view=new e({map:this.map,container:"viewDiv",center:_["a"].centerPoint,zoom:7}),f=new n({view:this.view,nextBasemap:u}),this.view.ui.add(f,"top-right");case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initCom:function(t){this.map.remove(this.insercLayer),this.view.graphics.removeAll()}}},R=N,F=(a("ab39"),Object(h["a"])(R,C,$,!1,null,"12855da2",null)),H=F.exports,W={name:"spotsTable",data:function(){var t=this;return{tableHeight:Math.floor(window.innerHeight-280),spotsColumns1:[{title:"序号",key:"index",width:100,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"台账名称",align:"center",ellipsis:!0,tooltip:!0,minWidth:200,key:"name ",render:function(t,e){return t("span",e.row.name)}},{title:"台账年份",align:"center",ellipsis:!0,tooltip:!0,minWidth:200,key:"year ",render:function(t,e){return t("span",e.row.year)}},{title:"台账备注",align:"center",ellipsis:!0,tooltip:!0,minWidth:100,key:"remark ",render:function(t,e){return t("span",e.row.remark)}},{title:"创建时间",align:"center",ellipsis:!0,tooltip:!0,minWidth:100,key:"createDate ",render:function(t,e){return t("span",e.row.createDate)}},{title:"操作",key:"address",width:120,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px",background:"rgb(16,186,204)",borderColor:"rgb(16,186,204)"},on:{click:function(){t.spotsAddActive=!0,t.$refs.taskManagementTableMap.initCom()}}},[e("i",{class:"iconfont icon-leimupinleifenleileibie",style:{fontSize:"12px",marginRight:"4px"}}),e("span",{style:{color:"inherit",cursor:"pointer"}},"地图查看")])])}}],spotsData1:[],spotsLoading:!1,spotsAddActive:!1}},props:{seeId:0},components:{taskManagementTableMap:H},watch:{seeId:function(){this.dataId()}},created:function(){this.getTableList()},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.tableHeight=Math.floor(window.innerHeight-280),t.getTableList()}),!1)},methods:{dataId:function(){this.getTableList(this.seeId)},getTableList:function(t){var e=this;this.spotsLoading=!0,Object(d["c"])({data:{cl001:t}}).then((function(t){"0000"===t.data.code&&(e.spotsData1=t.data.data.data.st4ScsCoList,e.spotsLoading=!1)})).catch((function(){e.$Notice.error({title:"服务器错误"})}))},signOut:function(t){this.spotsAddActive=t}}},V=W,Q=(a("94e4"),Object(h["a"])(V,A,T,!1,null,"8adfd572",null)),G=Q.exports;function U(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function J(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?U(a,!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var K={name:"extracTable",data:function(){var t=this;return{tableHeight:48*Math.floor((window.innerHeight-300-40)/48)+40,queryData:{},columns1:[{type:"selection",width:60,align:"center"},{title:"序号",key:"index",width:100,align:"center",render:function(e,a){return e("span",a.index+(t.pageNum-1)*t.pageSize+1)}},{title:"任务名称",align:"center",ellipsis:!0,tooltip:!0,minWidth:200,key:"cl002"},{title:"任务年份",align:"center",ellipsis:!0,tooltip:!0,minWidth:200,key:"cl010"},{title:"任务台账",align:"center",ellipsis:!0,tooltip:!0,minWidth:200,render:function(t,e){var a=e.row,i=[];return a.st4ScsCoList.forEach((function(t){i.push(t.name)})),t("div",{},i.join("，"))}},{title:"任务备注",align:"center",ellipsis:!0,tooltip:!0,minWidth:200,key:"cl009"},{title:"操作",key:"",width:260,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small",icon:"md-eye"},style:{marginRight:"5px"},on:{click:function(){t.spotsSeeId=a.row.cl001,t.addActive=!0}}},"查看台账"),e("Button",{props:{type:"warning",size:"small",icon:"md-create"},style:{marginRight:"5px"},on:{click:function(){t.editDefaultData=a.row,t.$refs.taskEdit.taskEdit=!0}}},"修改"),e("Button",{props:{type:"error",size:"small",icon:"md-trash"},on:{click:function(){t.$Modal.confirm({title:"确认",content:"请问您确定要删除该任务吗？",onOk:function(){t.infoDel(a.row.cl001)},onCancel:function(){}})}}},"删除")])}}],data1:[],total:0,pageNum:1,pageSize:Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),loading:!1,editDefaultData:{},addActive:!1,spotsSeeId:0,selectRow:[],multipleSelection:[]}},components:{QueryBox:r["a"],taskAdd:g,taskEdit:w,IssueList:E,spotsTable:G},computed:{queryFrom:function(){return[{type:1,field:"cl002",title:"任务名称"},{type:3,field:"cl010",title:"任务年份"}]}},watch:{multipleSelection:function(t){var e=this;this.selectRow=[],t.length>0&&t.forEach((function(t,a){e.selectRow.push(t.cl001)}))}},created:function(){this.getTableList()},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.tableHeight=48*Math.floor((window.innerHeight-300-40)/48)+40,t.pageSize=Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),t.getTableList()}),!1)},methods:{getQueryData:function(t){this.queryData=t,this.pageNum=1,this.getTableList()},getTableList:function(){var t=this;this.loading=!0,Object(d["d"])({data:J({pageSize:this.pageSize,pageNumber:this.pageNum},this.queryData)}).then((function(e){"0000"===e.data.code&&(t.data1=e.data.data.rows,t.total=e.data.data.total,t.loading=!1)})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},pageChange:function(t){this.pageNum=t,this.getTableList()},infoDel:function(t){var e=this;Object(d["a"])({data:{cl001:t}}).then((function(t){"0000"===t.data.code?(e.getTableList(),e.$Notice.success({title:"删除成功"})):e.$Notice.error({title:"删除失败"})})).catch((function(){e.$Notice.error({title:"服务器错误"})}))},handleSelectionChange:function(t){this.multipleSelection=t},handleIssue:function(){this.$refs.issueList.issue=!1,this.selectRow.length<1?this.$Notice.error({title:"请先勾选任务再点击下发！"}):this.selectRow.length>1?this.$Notice.error({title:"只能选择一个任务！"}):this.$refs.issueList.issue=!0},signOut:function(t){this.addActive=t},getClearQueryData:function(){this.queryData={},this.pageNum=1,this.getTableList(),this.$refs.getQuery.cleardata()}}},X=K,Y=(a("232f"),Object(h["a"])(X,i,n,!1,null,"8e7750d8",null));e["default"]=Y.exports},"7cfd":function(t,e,a){var i=a("d3d8").f,n=Function.prototype,s=/^\s*function ([^ (]*)/,r="name";r in n||a("f9a5")&&i(n,r,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},8868:function(t,e,a){var i=a("2498"),n=a("da27"),s=a("0cc1");t.exports=function(t,e){var a=(n.Object||{})[t]||Object[t],r={};r[t]=e(a),i(i.S+i.F*s((function(){a(1)})),"Object",r)}},"94e4":function(t,e,a){"use strict";var i=a("5d85"),n=a.n(i);n.a},"97a3":function(t,e,a){"use strict";function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return i}))},ab39:function(t,e,a){"use strict";var i=a("5b6b"),n=a.n(i);n.a},aff7:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"global-query"},[a("div",{ref:"queryBox",staticClass:"queryBox",on:{click:function(e){t.show=!t.show}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t.queryData.length,expression:"queryData.length===0"}],staticClass:"search-title"},[t._v("查询条件")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.queryData.length>0,expression:"queryData.length > 0"}],staticClass:"search-title1"},[t._v("查询条件")]),a("div",{staticClass:"search-item"},t._l(t.queryData,(function(e,i){return a("span",{key:i,staticClass:"query"},[a("strong",[t._v(t._s(e.title))]),a("span",[t._v("\n            "+t._s(e.label)+"\n          ")])])})),0),a("div",{staticStyle:{width:"100px",float:"right"}},[a("Button",{attrs:{type:"primary",size:"small",icon:"ios-arrow-dropdown"}},[t._v("查询条件")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"queryDown",staticClass:"queryDown"},[a("Form",{ref:"formInline",attrs:{inline:"","label-width":100,model:t.formInline}},[t._l(t.formArr,(function(e,i){return a("FormItem",{key:i,attrs:{label:e.title+"："}},[1===e.type?a("Input",{staticClass:"queryInput",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:e.title},model:{value:t.formInline[e.field],callback:function(a){t.$set(t.formInline,e.field,a)},expression:"formInline[item.field]"}}):t._e(),2===e.type?a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:""},model:{value:t.formInline[e.field],callback:function(a){t.$set(t.formInline,e.field,a)},expression:"formInline[item.field]"}},t._l(e.data,(function(e,i){return a("Option",{key:i,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1):t._e(),3===e.type?a("DatePicker",{staticStyle:{width:"200px"},attrs:{size:"large",type:"year","start-date":new Date,placement:"bottom-end",placeholder:e.title},model:{value:t.formInline[e.field],callback:function(a){t.$set(t.formInline,e.field,a)},expression:"formInline[item.field]"}}):t._e(),4===e.type?a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange","start-date":new Date,placement:"bottom-end",placeholder:"请输入起止日期","on-open-change":"true"},model:{value:t.formInline[e.field],callback:function(a){t.$set(t.formInline,e.field,a)},expression:"formInline[item.field]"}}):t._e()],1)})),a("FormItem",{staticStyle:{float:"right"},attrs:{"label-width":0}},[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.query(e)}}},[a("i",{staticClass:"iconfont icon-chaxun1"}),t._v("查询")]),a("Button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.cleardata(e)}}},[a("i",{staticClass:"iconfont icon-zhongzhi"}),t._v("重置")])],1)],2)],1)])},n=[],s=a("cf45"),r={name:"global-query",data:function(){return{formInline:{},show:!1}},computed:{queryData:function(){var t=this,e=[],a=function(a){if("startAndEndTime"===a&&""===t.formInline[a][0]&&""===t.formInline[a][1]&&delete t.formInline[a],""!==t.formInline[a]&&void 0!==t.formInline[a]){var i,n=t.formArr.filter((function(t){return t.field===a}))[0];i=2===n.type?n.data.filter((function(e){return e.value===t.formInline[a]}))[0].label:3===n.type?Object(s["d"])(t.formInline[a]):4===n.type?Object(s["c"])(t.formInline[a][0])+" - "+Object(s["c"])(t.formInline[a][1]):t.formInline[a];var r={title:t.formArr.filter((function(t){return t.field===a}))[0].title,field:a,value:t.formInline[a],label:i};e.push(r)}};for(var i in this.formInline)a(i);return e}},props:{formArr:{type:Array,default:function(){return[]}}},mounted:function(){document.addEventListener("click",this.queryHide)},beforeDestroy:function(){document.removeEventListener("click",this.queryHide)},methods:{cleardata:function(){this.formInline={},this.query()},query:function(){this.show=!1;var t={};for(var e in this.queryData)"cl010"===this.queryData[e].field?t[this.queryData[e].field]=Object(s["d"])(this.queryData[e].value):t[this.queryData[e].field]=this.queryData[e].value;this.$emit("query",t)},queryHide:function(t){this.$refs.queryBox.contains(t.target)||this.$refs.queryDown.contains(t.target)||(this.show=!1)}}},o=r,l=(a("d533"),a("6691")),c=Object(l["a"])(o,i,n,!1,null,"574606c2",null);e["a"]=c.exports},ca6d:function(t,e,a){"use strict";var i=a("fa6c"),n=a.n(i);n.a},cb2e:function(t,e,a){var i=a("7afe"),n=a("d93f").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,n)}},d533:function(t,e,a){"use strict";var i=a("2e13"),n=a.n(i);n.a},dc4e:function(t,e,a){},e323:function(t,e,a){"use strict";var i=a("d3d8"),n=a("0614");t.exports=function(t,e,a){e in t?i.f(t,e,n(0,a)):t[e]=a}},e493:function(t,e,a){var i=a("c864"),n=a("0614"),s=a("6117"),r=a("2ab1"),o=a("549d"),l=a("25ae"),c=Object.getOwnPropertyDescriptor;e.f=a("f9a5")?c:function(t,e){if(t=s(t),e=r(e,!0),l)try{return c(t,e)}catch(a){}if(o(t,e))return n(!i.f.call(t,e),t[e])}},ed8b:function(t,e,a){var i=a("a9cf"),n=a("7d56");a("8868")("keys",(function(){return function(t){return n(i(t))}}))},efce:function(t,e,a){var i=a("2498"),n=a("f36d"),s=a("6117"),r=a("e493"),o=a("e323");i(i.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,i=s(t),l=r.f,c=n(i),u={},d=0;while(c.length>d)a=l(i,e=c[d++]),void 0!==a&&o(u,e,a);return u}})},f36d:function(t,e,a){var i=a("cb2e"),n=a("9d61"),s=a("8cac"),r=a("3f8b").Reflect;t.exports=r&&r.ownKeys||function(t){var e=i.f(s(t)),a=n.f;return a?e.concat(a(t)):e}},fa6c:function(t,e,a){}}]);
//# sourceMappingURL=chunk-14f3e72e.f79eb1ca.js.map