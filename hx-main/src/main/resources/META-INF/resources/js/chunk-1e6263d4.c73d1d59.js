(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e6263d4"],{"0f10":function(t,e,a){},"135c":function(t,e,a){"use strict";var n=a("3b93"),i=a.n(n);i.a},2908:function(t,e,a){"use strict";var n=a("0f10"),i=a.n(n);i.a},"39f3":function(t,e,a){t.exports=a.p+"img/Basemapthumbnail1.5f8d6db2.png"},"3b93":function(t,e,a){},"42e8":function(t,e,a){t.exports=a.p+"img/Basemapthumbnail.6dc37597.png"},"784d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tablet"}},[a("div",{staticClass:"queryBox"},[a("QueryBox",{staticStyle:{width:"calc(100% - 300px)"},attrs:{formArr:t.queryFrom},on:{query:t.getQueryData}}),a("div",{staticClass:"queryBtns"},[a("Button",{staticClass:"btn-tabBtn",attrs:{type:"primary",size:"small"},on:{click:function(e){e.stopPropagation(),t.addActive=!0,t.$refs.taskManagementTableMap.initCom()}}},[a("i",{staticClass:"iconfont icon-leimupinleifenleileibie"}),t._v("切换地图")]),a("Button",{staticClass:"btn-add",staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"small",icon:"md-add"},on:{click:function(e){return e.stopPropagation(),t.openAdd("add","")}}},[t._v("新建")]),a("Button",{staticClass:"btn-download",staticStyle:{padding:"2px 7px 1.8px","margin-right":"10px"},attrs:{type:"success",size:"small"}},[a("Upload",{attrs:{"show-upload-list":!1,format:[".xls"],action:"#"}},[a("i",{staticClass:"iconfont icon-upload"}),a("span",[t._v("导入")])])],1),a("Button",{staticClass:"btn-exportBtn",attrs:{type:"primary",size:"small"}},[a("i",{staticClass:"iconfont icon-xiazai"}),t._v("下发")])],1)],1),a("div",{staticClass:"content_box"},[a("div",[a("Table",{attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns1,data:t.data1,"highlight-row":"","max-height":t.tableHeight}}),a("div",{staticClass:"page_box"},[a("Page",{ref:"pages",attrs:{total:t.total,"page-size":t.pageSize,current:t.pageNum,"show-total":""},on:{"update:current":function(e){t.pageNum=e},"on-change":t.pageChange}})],1)],1)]),a("div",{staticClass:"extract_box",class:{addActive:t.addActive}},[a("activitiesInspectTableMap",{ref:"taskManagementTableMap",on:{signOut:t.signOut}})],1),a("Modal",{attrs:{title:t.modalStatus+"核查任务"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"addForm",staticStyle:{padding:"0 20%"},attrs:{model:t.AddData,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{prop:"num",label:"问题点编号："}},[a("Input",{attrs:{placeholder:"请输入问题点编号",size:"default"},model:{value:t.AddData.num,callback:function(e){t.$set(t.AddData,"num","string"===typeof e?e.trim():e)},expression:"AddData.num"}})],1),a("FormItem",{attrs:{prop:"type",label:"所属任务："}},[a("Select",{attrs:{size:"default",placeholder:"请选择所属任务"},model:{value:t.AddData.type,callback:function(e){t.$set(t.AddData,"type","string"===typeof e?e.trim():e)},expression:"AddData.type"}},t._l(t.addTypeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("确定")])],1)],1)],1)},i=[],s=(a("7f7f"),a("6b54"),a("cebc")),r=a("aff7"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-box"},[a("div",{ref:"viewDiv",attrs:{id:"viewDiv"}}),a("Button",{staticClass:"sign-btn",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("signOut",!1)}}},[t._v("返回")])],1)},l=[],c=(a("96cf"),a("3b8d")),d=a("9ed9"),u=a("149e"),p=a("f831"),m=a("42e8"),f=a.n(m),h=a("39f3"),g=a.n(h),y={name:"checkInfoMap",data:function(){return{map:{},view:{}}},computed:{},props:{},components:{},watch:{},mounted:function(){this.createMap()},methods:{createMap:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,a,n,i,s,r,o,l,c,m,h,y;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].MapView;case 2:return e=t.sent,t.next=5,d["a"].Map;case 5:return a=t.sent,t.next=8,d["a"].Basemap;case 8:return n=t.sent,t.next=11,d["a"].BasemapToggle;case 11:return i=t.sent,t.next=14,Object(p["f"])().then(function(t){return t});case 14:return s=t.sent,t.next=17,Object(p["e"])().then(function(t){return t});case 17:return r=t.sent,t.next=20,Object(p["d"])().then(function(t){return t});case 20:return o=t.sent,t.next=23,Object(p["g"])().then(function(t){return t});case 23:return l=t.sent,t.next=26,Object(p["b"])().then(function(t){return t});case 26:c=t.sent,m=new n({baseLayers:[r,c,o],title:"矢量地图",id:"myBasemap",thumbnailUrl:f.a}),h=new n({baseLayers:[s,c,l],title:"影像地图",id:"myBasemap1",thumbnailUrl:g.a}),this.map=new a({basemap:h}),this.view=new e({map:this.map,container:"viewDiv",center:u["a"].centerPoint,zoom:7}),y=new i({view:this.view,nextBasemap:m}),this.view.ui.add(y,"top-right");case 33:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),initCom:function(t){this.map.remove(this.insercLayer),this.view.graphics.removeAll()}}},b=y,v=(a("2908"),a("2877")),x=Object(v["a"])(b,o,l,!1,null,"287984e6",null),w=x.exports,k=a("b775"),_=function(t){return Object(k["a"])({url:"/task/listTask",method:"post",data:t})},z={name:"extracTable",data:function(){var t=this;return{tableHeight:48*Math.floor((window.innerHeight-300-40)/48)+40,queryData:{},typeList:[{value:"",label:"请选择"},{value:"1",label:"type1"},{value:"2",label:"type2"}],columns1:[{type:"selection",fixed:"left",width:60,align:"center"},{title:"序号",fixed:"left",key:"index",width:100,align:"center",render:function(e,a){return e("span",a.index+(t.pageNum-1)*t.pageSize+1)}},{title:"问题点编号",fixed:"left",align:"center",minWidth:200,key:"srld_code"},{title:"所属任务",align:"center",minWidth:200,key:"srld_code"},{title:"经度",align:"center",minWidth:100,key:"srld_code"},{title:"纬度",align:"center",minWidth:100,key:"srld_code"},{title:"问题点类型",align:"center",minWidth:150,key:"srld_code"},{title:"问题点备注",align:"center",minWidth:200,key:"srld_code"},{title:"添加人",align:"center",minWidth:100,key:"srld_code"},{title:"操作",key:"address",width:320,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"success",size:"small",class:"btn-add"},style:{marginRight:"5px"},on:{click:function(){t.addActive=!0,t.$refs.taskManagementTableMap.initCom()}}},[e("i",{class:"iconfont icon-leimupinleifenleileibie",style:{fontSize:"12px",marginRight:"4px"}}),e("span",{style:{color:"inherit",cursor:"pointer"}},"地图查看")]),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){console.log("审核")}}},[e("i",{class:"iconfont icon-shenhe",style:{fontSize:"12px",marginRight:"4px"}}),e("span",{style:{color:"inherit",cursor:"pointer"}},"审核")]),e("Button",{props:{type:"warning",size:"small",icon:"md-create"},style:{marginRight:"5px"},on:{click:function(){t.openAdd("modify",a.row)}}},"修改"),e("Button",{props:{type:"error",size:"small",icon:"md-trash"},on:{click:function(){t.$Modal.confirm({title:"确认",content:"请问您确定要删除该条数据吗？",onOk:function(){t.infoDel(a.row.id)},onCancel:function(){}})}}},"删除")])}}],data1:[],total:0,pageNum:1,pageSize:Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),loading:!1,addActive:!1,modal:!1,modalStatus:"",AddData:{num:"",type:""},ruleValidate:{num:[{required:!0,message:"问题点编号必须填写",trigger:"blur"}],type:[{required:!0,message:"所属任务必须选择",trigger:"change"}]},addTypeList:[{value:"1",label:"type1"},{value:"2",label:"type2"}]}},components:{QueryBox:r["a"],activitiesInspectTableMap:w},computed:{queryFrom:function(){return[{type:1,field:"srld_code",title:"问题点编号"},{type:2,field:"address",title:"所属任务",data:this.typeList}]}},created:function(){this.getTableList()},watch:{queryData:function(){this.getTableList()}},mounted:function(){var t=this;window.addEventListener("resize",function(){t.tableHeight=48*Math.floor((window.innerHeight-300-40)/48)+40,t.pageSize=Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),t.getTableList()},!1)},methods:{getQueryData:function(t){this.queryData=t,this.getTableList()},getTableList:function(){var t=this;this.loading=!0,_({data:Object(s["a"])({pageSize:this.pageSize,pageNumber:this.pageNum},this.queryData)}).then(function(e){"0000"===e.data.code&&(t.data1=e.data.data.rows,t.total=e.data.data.total,t.loading=!1)}).catch(function(){t.$Notice.error({title:"服务器错误"})})},pageChange:function(t){this.pageNum=t,this.getTableList()},infoDel:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){var e=this;infoDel({data:{id:t}}).then(function(t){"0000"===t.data.code?(e.getTableList(),e.$Notice.success({title:"删除成功"})):e.$Notice.error({title:"删除失败"})}).catch(function(){e.$Notice.error({title:"服务器错误"})})}),signOut:function(t){this.addActive=t},addSubmit:function(){var t=this;this.$refs.addForm.validate(function(e){e&&saveFiled({data:{num:t.AddData.name,type:t.AddData.type}}).then(function(e){"0000"===e.data.code?(t.$Notice.success({title:t.modalStatus+"核查任务成功"}),t.modal=!1,t.getTableList()):t.$Notice.error({title:t.modalStatus+"核查任务失败"})})})},openAdd:function(t,e){var a=this;this.modal=!0,this.$refs.addForm.resetFields(),"add"===t?this.$nextTick(function(){a.modalStatus="新增"}):"modify"===t&&(this.AddData=e,this.$nextTick(function(){a.modalStatus="修改"}))}}},B=z,D=(a("135c"),Object(v["a"])(B,n,i,!1,null,"1865de8d",null));e["default"]=D.exports}}]);
//# sourceMappingURL=chunk-1e6263d4.c73d1d59.js.map