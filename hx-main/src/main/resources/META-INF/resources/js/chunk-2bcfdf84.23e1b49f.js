(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bcfdf84"],{"0fb1":function(t,e,a){"use strict";var i=a("22c4"),n=a.n(i);n.a},"1a3c":function(t,e){t.exports="data:image/png;base64,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"},"22c4":function(t,e,a){},"39f3":function(t,e,a){t.exports=a.p+"img/Basemapthumbnail1.5f8d6db2.png"},"3b83":function(t,e,a){},"42e8":function(t,e,a){t.exports=a.p+"img/Basemapthumbnail.6dc37597.png"},"48b1":function(t,e,a){"use strict";var i=a("dd74"),n=a.n(i);n.a},"62a6":function(t,e,a){"use strict";var i=a("3b83"),n=a.n(i);n.a},7444:function(t,e,a){"use strict";var i=a("a517"),n=a.n(i);n.a},"7bad":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tablet"}},[a("div",{staticClass:"queryBox"},[a("QueryBox",{ref:"getQuery",staticStyle:{width:"calc(100% - 70px)"},attrs:{formArr:t.queryFrom},on:{query:t.getQueryData}}),a("div",{staticClass:"queryBtns"},[a("Button",{staticClass:"btn-add",staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"small",icon:"md-add"},on:{click:function(e){return e.stopPropagation(),t.openAddModal(e)}}},[t._v("新建")])],1)],1),a("div",{staticClass:"content_box"},[a("div",[a("Table",{attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns1,data:t.data1,"highlight-row":"","max-height":t.tableHeight}}),a("div",{staticClass:"page_box"},[a("Page",{ref:"pages",attrs:{total:t.total,"page-size":t.pageSize,current:t.pageNum,"show-total":""},on:{"update:current":function(e){t.pageNum=e},"on-change":t.pageChange}})],1)],1)]),a("div",{staticClass:"changeDetectTableMap",class:{addActive:t.addActive}},[a("changeDetectTableMap",{ref:"changeDetectTableMap",attrs:{seeId:t.taskId},on:{signOut:t.signOut}})],1),a("Modal",{attrs:{title:"新增人类活动信息变化检测","mask-closable":!1},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{ref:"addForm",attrs:{model:t.addForm,"label-width":130,rules:t.addFormRules}},[a("FormItem",{attrs:{prop:"name",label:"任务名称"}},[a("Input",{attrs:{placeholder:"请填写任务名称，最少四个字符"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),a("FormItem",{attrs:{prop:"image1Id",label:"现状数据"}},[a("i-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择原人类活动数据"},model:{value:t.addForm.image1Id,callback:function(e){t.$set(t.addForm,"image1Id","string"===typeof e?e.trim():e)},expression:"addForm.image1Id"}},t._l(t.activitiesList1,function(e){return a("i-option",{attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1),a("FormItem",{attrs:{prop:"image2Id",label:"本底数据"}},[a("i-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择比对人类活动数据"},model:{value:t.addForm.image2Id,callback:function(e){t.$set(t.addForm,"image2Id","string"===typeof e?e.trim():e)},expression:"addForm.image2Id"}},t._l(t.activitiesList2,function(e){return a("i-option",{attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1),a("FormItem",{attrs:{prop:"remark",label:"说明"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(e){t.modal1=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.submitAddForm}},[t._v("确认")])],1)],1)],1)},n=[],r=(a("7f7f"),a("aff7")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tablet"}},[a("div",{staticClass:"queryBox"},[t._m(0),a("Button",{staticClass:"sign-btn",attrs:{type:"primary",size:"small",icon:"ios-arrow-back"},on:{click:function(e){return t.$emit("signOut",!1)}}},[t._v("返回")])],1),a("div",{staticClass:"map-box"},[a("div",{staticClass:"topLeft-box",class:{activeBox:1===t.boxstate}},[a("Button",{staticClass:"boxBtn",attrs:{icon:1===t.boxstate?"md-contract":"md-expand",size:"small"},on:{click:t.mapOpen}}),a("Map",{ref:"maps",attrs:{boxstate:t.boxstate},on:{layerConClick:t.layerConClick}})],1),a("div",{staticClass:"topRight-box",class:{activeBox:2===t.boxstate}},[a("div",{staticClass:"tab"},[a("Button",{staticClass:"boxBtn",attrs:{icon:2===t.boxstate?"md-contract":"md-expand",size:"small"},on:{click:t.mapOpen2}}),a("Table",{attrs:{data:t.alltablemetriesArr,columns:t.columns2,"disabled-hover":!0,border:"","span-method":t.handleSpan}})],1),a("Button",{staticClass:"sign-btn",attrs:{type:"primary",size:"small",icon:3===t.boxstate?"ios-arrow-forward":"ios-arrow-back"},on:{click:t.rightOpen3}},[t._v("详情")])],1),a("Card",{staticClass:"bottom-box",class:{rightShow:3===t.boxstate},attrs:{id:"changeDetect_mapBox"}},[a("div",{staticClass:"bigBox"},[a("div",{staticClass:"smallBox"},[a("Table",{attrs:{border:"",stripe:"",loading:t.mapLoading,columns:t.mapColumns1,data:t.allGeometriesArr,"highlight-row":""}})],1)])])],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenhe1"}),t._v("人类活动变化检测详情")])}],c=(a("6b54"),a("5d73")),d=a.n(c),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tablet"}},[a("div",{staticClass:"queryBox"},[t._m(0),a("Button",{staticClass:"sign-btn",attrs:{type:"primary",size:"small",icon:"ios-arrow-back"},on:{click:function(e){return t.$emit("signOut",!1)}}},[t._v("返回")])],1),a("div",{staticClass:"content_box"},[a("div",[a("Table",{attrs:{border:"",stripe:"",loading:t.detailsLoading,columns:t.detailsColumns1,data:t.detailsData1,"highlight-row":"","max-height":t.tableHeight}}),a("div",{staticClass:"page_box"},[a("Page",{ref:"detailsPages",attrs:{total:t.detailsTotal,"page-size":t.detailsPageSize,current:t.detailsPageNum,"show-total":""},on:{"update:current":function(e){t.detailsPageNum=e},"on-change":t.detailsPageChange}})],1)],1)])])},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"title"},[a("i",{staticClass:"iconfont icon-shenhe1"}),t._v("人类活动变化检测详情")])}],m=a("bdb4"),g={name:"detailsTable",data:function(){var t=this;return{tableHeight:48*Math.floor((window.innerHeight-300-40)/48)+40,queryData:{},detailsColumns1:[{type:"selection",width:60,align:"center"},{title:"序号",key:"index",width:100,align:"center",render:function(e,a){return e("span",a.index+(t.detailsPageNum-1)*t.detailsPageSize+1)}},{title:"任务名称",align:"center",ellipsis:!0,tooltip:!0,minWidth:200,key:"cl002"},{title:"原人类活动",align:"center",ellipsis:!0,tooltip:!0,minWidth:200,key:"cl010"},{title:"比对人类活动",align:"center",ellipsis:!0,tooltip:!0,minWidth:200,key:"cl009"}],detailsData1:[],detailsTotal:0,detailsPageNum:1,detailsPageSize:Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),detailsLoading:!1}},mounted:function(){var t=this;window.addEventListener("resize",function(){t.tableHeight=48*Math.floor((window.innerHeight-300-40)/48)+40,t.detailsPageSize=Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48)},!1)},methods:{getTableList:function(){var t=this;this.detailsLoading=!0,Object(m["e"])({data:{pageSize:this.detailsPageSize,pageNumber:this.detailsPageNum}}).then(function(e){"0000"===e.data.code&&(t.detailsData1=e.data.data.rows,t.detailsTotal=e.data.data.total,t.detailsLoading=!1)}).catch(function(){t.$Notice.error({title:"服务器错误"})})},detailsPageChange:function(t){this.detailsPageNum=t,this.getTableList()}}},p=g,h=(a("62a6"),a("2877")),f=Object(h["a"])(p,l,u,!1,null,"138e5588",null),b=f.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"mapbox"},on:{keyup:[function(e){return e.type.indexOf("key")||122===e.keyCode?t.fullClose(e):null},function(e){return e.type.indexOf("key")||27===e.keyCode?t.fullClose(e):null}]}},[i("div",{attrs:{id:"viewDiv"}}),i("ButtonGroup",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{id:"toolbar",vertical:""}},[i("Tooltip",{attrs:{content:"距离测量",placement:"right"}},[i("Button",{staticStyle:{padding:"5px 5px 0px"},attrs:{type:"distance"==t.type?"primary":"default"},on:{click:function(e){return t.clickToolbar("distance")}}},[i("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("8143"),alt:""}})])],1),i("Tooltip",{attrs:{content:"测量面积",placement:"right"}},[i("Button",{staticStyle:{padding:"5px 5px 0px"},attrs:{type:"area"==t.type?"primary":"default"},on:{click:function(e){return t.clickToolbar("area")}}},[i("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("1a3c"),alt:""}})])],1)],1)],1)},v=[],w=(a("ac6a"),a("96cf"),a("3b8d")),k=a("9ed9"),B=a("149e"),A=a("f831"),x=a("42e8"),C=a.n(x),j=a("39f3"),Q=a.n(j),O={name:"OnePiece",data:function(){return{map:null,view:null,type:"",addLayer:{},subLayer:{}}},props:["boxstate"],methods:{createMap:function(){var t=Object(w["a"])(regeneratorRuntime.mark(function t(){var e,a,i,n,r,o,s,c,d,l,u,m,g;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k["a"].MapView;case 2:return e=t.sent,t.next=5,k["a"].Map;case 5:return a=t.sent,t.next=8,k["a"].Basemap;case 8:return i=t.sent,t.next=11,k["a"].BasemapToggle;case 11:return n=t.sent,t.next=14,k["a"].Fullscreen;case 14:return r=t.sent,t.next=17,k["a"].GraphicsLayer;case 17:return o=t.sent,t.next=20,Object(A["h"])().then(function(t){return t});case 20:return s=t.sent,t.next=23,Object(A["g"])().then(function(t){return t});case 23:return c=t.sent,t.next=26,Object(A["f"])().then(function(t){return t});case 26:return d=t.sent,t.next=29,Object(A["i"])().then(function(t){return t});case 29:l=t.sent,u=new i({baseLayers:[c,d],title:"矢量地图",id:"myBasemap",thumbnailUrl:C.a}),m=new i({baseLayers:[s,l],title:"影像地图",id:"myBasemap1",thumbnailUrl:Q.a}),this.map=new a({basemap:u}),this.view=new e({map:this.map,container:"viewDiv",center:B["a"].centerPoint,zoom:7}),this.addLayer=new o({graphics:[]}),this.subLayer=new o({graphics:[]}),this.map.add(this.addLayer),this.map.add(this.subLayer),this.view.ui.add(document.getElementById("toolbar"),"top-left"),this.fullscreen=new r({view:this.view}),this.view.ui.add(this.fullscreen,"top-left"),g=new n({view:this.view,nextBasemap:m}),this.view.ui.padding={top:20,left:20,right:55,bottom:20},this.view.ui.add(g,"top-right");case 44:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),clickToolbar:function(){var t=Object(w["a"])(regeneratorRuntime.mark(function t(e){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.type===e&&(e=null),this.type=e,this.activeWidget&&(this.view.ui.remove(this.activeWidget),this.activeWidget.destroy(),this.activeWidget=null),t.t0=e,t.next="distance"===t.t0?6:"area"===t.t0?13:20;break;case 6:return t.next=8,k["a"].DistanceMeasurement2D;case 8:return a=t.sent,this.activeWidget=new a({view:this.view}),this.activeWidget.viewModel.newMeasurement(),this.view.ui.add(this.activeWidget,"top-right"),t.abrupt("break",21);case 13:return t.next=15,k["a"].AreaMeasurement2D;case 15:return i=t.sent,this.activeWidget=new i({view:this.view}),this.activeWidget.viewModel.newMeasurement(),this.view.ui.add(this.activeWidget,"top-right"),t.abrupt("break",21);case 20:return t.abrupt("break",21);case 21:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),renderBankuai:function(){var t=Object(w["a"])(regeneratorRuntime.mark(function t(e,a){var i,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.addLayer.removeAll(),this.subLayer.removeAll(),t.next=4,k["a"].Graphic;case 4:i=t.sent,n=[],r=[],e.forEach(function(t){t.type="polygon",t.symbol={type:"simple-fill",color:[219,64,82,.4],style:"solid",outline:{color:"white",width:1}},n.push(new i(t))}),this.addLayer.addMany(n),a.forEach(function(t){t.type="polygon",t.symbol={type:"simple-fill",color:[4,170,88,.4],style:"solid",outline:{color:"white",width:1}},r.push(new i(t))}),this.subLayer.addMany(r);case 11:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),toPolygon:function(t,e){var a=t?this.addLayer:this.subLayer,i=a.graphics.items.filter(function(t){return t.attributes.index===e});this.view.goTo(i)}},mounted:function(){var t=Object(w["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.createMap();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},I=O,E=(a("d091"),a("7444"),Object(h["a"])(I,y,v,!1,null,"165d24b5",null)),S=E.exports,L=a("91b2"),M=[{nyyd:"",jmd:"",gkyd:"",csc:"",nyss:"",lyss:"",jtss:"",yzc:"",dl:"",qt:""},{nyyd:"",jmd:"",gkyd:"",csc:"",nyss:"",lyss:"",jtss:"",yzc:"",dl:"",qt:""},{nyyd:"",jmd:"",gkyd:"",csc:"",nyss:"",lyss:"",jtss:"",yzc:"",dl:"",qt:""}],G={name:"checkInfoMap",data:function(){var t=this;return{map:{},view:{},boxstate:0,mapColumns1:[{title:"序号",key:"index",width:100,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"斑块名称",align:"center",ellipsis:!0,tooltip:!0,render:function(e,a){var i="";return i=a.row.trend?a.row.attributes.aa:a.row.attributes.name1,e("a",{style:{textDecoration:"underline",color:"#00f"},on:{click:function(){t.$refs.maps.toPolygon(a.row.trend,a.row.attributes.index)}}},i)}},{title:"斑块类型",align:"center",ellipsis:!0,tooltip:!0,render:function(e,a){var i="",n=!0,r=!1,o=void 0;try{for(var s,c=d()(t.alltablemetriesArr);!(n=(s=c.next()).done);n=!0){var l=s.value;void 0===a.row.attributes.bb?l.id===1*a.row.attributes.type1&&(i=l.name):l.id===1*a.row.attributes.bb&&(i=l.name)}}catch(u){r=!0,o=u}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return e("span",i)}},{title:"变化趋势",align:"center",ellipsis:!0,tooltip:!0,render:function(t,e){return[t("span",e.row.trend?"增加":"减少"),t("icon",{props:{type:e.row.trend?"md-arrow-up":"md-arrow-down"},style:{color:e.row.trend?"red":"green",fontSize:"18px",marginTop:"-3px"}})]}}],mapLoading:!1,detailsActive:!1,mapData1:M,addGeometriesArr:[],subGeometriesArr:[],allGeometriesArr:[],alltablemetriesArr:[],columns2:[{title:"一类标准",key:"name1",align:"center",ellipsis:!0},{title:"二类标准",key:"name2",align:"center",ellipsis:!0},{title:"三类标准",key:"name",align:"center",ellipsis:!0},{title:"原数据面积（亩）",key:"num1",align:"center",ellipsis:!0},{title:"比对数据面积（亩）",key:"num2",align:"center",ellipsis:!0},{title:"对比结果",key:"num3",align:"center",ellipsis:!0}]}},components:{detailsTable:b,Map:S},methods:{init:function(t){this.getMapTableList(t)},mapOpen:function(){this.boxstate=1===this.boxstate?0:1},layerConClick:function(){this.boxstate=1},mapOpen2:function(){this.boxstate=2===this.boxstate?0:2},rightOpen3:function(){this.boxstate=3===this.boxstate?0:3},getMapTableList:function(t){var e=this;this.mapLoading=!0,Object(L["s"])({data:{id:t.toString()}}).then(function(t){e.mapLoading=!1,"0000"===t.data.code?(e.addGeometriesArr=e.json2geometry(t.data.data.imageContrast.data1,1),e.subGeometriesArr=e.json2geometry(t.data.data.imageContrast.data2,0),e.allGeometriesArr=e.addGeometriesArr.concat(e.subGeometriesArr),e.$refs.maps.renderBankuai(e.addGeometriesArr,e.subGeometriesArr),e.alltablemetriesArr=t.data.data.imageConfig,e.alltablemetriesArr.push({name:"汇总",name1:"汇总",name2:"汇总",num1:t.data.data.num1s,num2:t.data.data.num2s,num3:t.data.data.num3s})):e.$Notice.error({title:"获取对比详情失败",desc:t.data.msg})})},detailSignOut:function(t){this.detailsActive=t},handleTaleBox:function(){3===this.boxstate?(this.boxstate=0,this.tableHeight=window.innerHeight-332):(this.boxstate=3,this.tableHeight=Math.floor((window.innerHeight-326)/2))},json2geometry:function(t,e){for(var a=JSON.parse(t),i=0;i<a.length;i++)a[i].attributes=JSON.parse(a[i].attributes),a[i].attributes.index=e.toString()+"-"+i,a[i].geometry=JSON.parse(a[i].geometry),a[i].geometry.rings=JSON.parse(a[i].geometry.rings),a[i].geometry.spatialReference={wkid:B["a"].mapWkid},a[i].trend=e;return a},handleSpan:function(t){for(var e=t.row,a=t.column,i=t.rowIndex,n=t.columnIndex,r=["name1","name2"],o=0;o<r.length;o++){var s=r[o];if(i===this.alltablemetriesArr.length-1){if(0===n)return[1,3];if(1===n||2===n)return[0,0]}if(a.key===s){if(0!==i){if(this.alltablemetriesArr[i-1][s]===e[s])return[0,0];var c=0;for(var d in this.alltablemetriesArr)this.alltablemetriesArr[d][s]===e[s]&&(c+=1);return[c,1]}var l=0;for(var u in this.alltablemetriesArr)this.alltablemetriesArr[u][s]===e[s]&&(l+=1);return[l,1]}}}}},R=G,N=(a("0fb1"),Object(h["a"])(R,o,s,!1,null,"21ee1ea5",null)),T=N.exports,F=a("cf45"),J={name:"changeDetectMap",data:function(){var t=this;return{tableHeight:48*Math.floor((window.innerHeight-300-40)/48)+40,queryData:{},columns1:[{type:"selection",width:60,align:"center"},{title:"序号",key:"index",width:100,align:"center",render:function(e,a){return e("span",a.index+(t.pageNum-1)*t.pageSize+1)}},{title:"任务名称",align:"center",ellipsis:!0,minWidth:200,key:"name"},{title:"对比时间",align:"center",ellipsis:!0,minWidth:140,render:function(t,e){return t("span",Object(F["e"])(e.row.date))}},{title:"描述",align:"center",ellipsis:!0,minWidth:200,key:"remark"},{title:"现状数据",align:"center",ellipsis:!0,tooltip:!0,minWidth:200,key:"image1"},{title:"本底数据",align:"center",ellipsis:!0,minWidth:200,key:"image2"},{title:"操作",width:250,key:"",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small",icon:"ios-aperture"},style:{marginRight:"5px"},on:{click:function(){t.newcom(a)}}},"重新计算"),e("Button",{props:{type:"success",size:"small",icon:"ios-map"},style:{marginRight:"5px",background:"rgb(16,186,204)",borderColor:"rgb(16,186,204)"},on:{click:function(){t.addActive=!0,t.$refs.changeDetectTableMap.init(a.row.id)}}},"查看"),e("Button",{props:{type:"error",size:"small",icon:"md-trash"},on:{click:function(){t.$Modal.confirm({title:"确认",content:"请问您确定要删除该人类活动变化比对任务？",onOk:function(){t.proDelete(a.row.id)},onCancel:function(){}})}}},"删除")])}}],data1:[],total:0,pageNum:1,pageSize:Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),loading:!1,addActive:!1,taskId:0,modal1:!1,activitiesList1:[],activitiesList2:[],addForm:{name:"",image1Id:"",image2Id:"",remark:""},addFormRules:{name:[{required:!0,message:"任务名称必须填写",trigger:"blur"}],image1Id:[{required:!0,message:"原人类活动数据必须选择",trigger:"change",type:"number"}],image2Id:[{required:!0,message:"比对人类活动数据必须选择",trigger:"change",type:"number"}]}}},components:{QueryBox:r["a"],changeDetectTableMap:T},computed:{queryFrom:function(){return[{type:1,field:"name",title:"任务名称"}]}},created:function(){this.getTableList(),this.getActivities2()},mounted:function(){var t=this;window.addEventListener("resize",function(){t.tableHeight=48*Math.floor((window.innerHeight-300-40)/48)+40,t.pageSize=Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),t.getTableList()},!1)},methods:{getQueryData:function(t){this.queryData=t,this.pageNum=1,this.getTableList()},getActivities2:function(){var t=this;Object(L["o"])({data:{}}).then(function(e){"0000"===e.data.code&&(t.activitiesList1=e.data.data,t.activitiesList2=e.data.data)})},getTableList:function(){var t,e=this;t=void 0===this.queryData.name?"":this.queryData.name,this.loading=!0,Object(L["r"])({data:{pageSize:this.pageSize,pageNum:this.pageNum,name:t}}).then(function(t){"0000"===t.data.code&&(e.data1=t.data.data.poList,e.total=t.data.data.poSum,e.loading=!1)}).catch(function(){e.$Notice.error({title:"服务器错误"})})},pageChange:function(t){this.pageNum=t,this.getTableList()},signOut:function(t){this.addActive=t},openAddModal:function(){this.$refs.addForm.resetFields(),this.addForm={},this.modal1=!0},submitAddForm:function(){var t=this;this.$Spin.show(),this.$refs.addForm.validate(function(e){e&&Object(L["d"])({data:{name:t.addForm.name,image1Id:t.addForm.image1Id,image2Id:t.addForm.image2Id,remark:t.addForm.remark}}).then(function(e){t.$Spin.hide(),"0000"===e.data.code?(t.$Notice.success({title:"人类活动变化检测任务添加成功"}),t.$refs.addForm.resetFields(),t.addForm={},t.modal1=!1,t.getTableList()):t.$Notice.error({title:"人类活动变化检测任务添加失败"})})})},proDelete:function(t){var e=this;Object(L["f"])({data:{id:t}}).then(function(t){"0000"===t.data.code?(e.$Notice.error({title:"人类活动比对任务删除成功"}),e.getTableList()):e.$Notice.error({title:"人类活动比对任务删除失败",desc:t.data.msg})})},newcom:function(t){var e=this;this.$Spin.show(),Object(L["d"])({data:{name:t.row.name,image1Id:t.row.image1_id,image2Id:t.row.image2_id,remark:t.row.remark,id:t.row.id}}).then(function(t){e.$Spin.hide(),"0000"===t.data.code?e.$Notice.success({title:"人类活动变化检测任务重新计算成功"}):e.$Notice.error({title:"人类活动变化检测任务重新计算失败"})}).catch(function(){e.$Spin.hide()})}}},D=J,H=(a("48b1"),Object(h["a"])(D,i,n,!1,null,"0d793255",null));e["default"]=H.exports},"7f7f":function(t,e,a){var i=a("86cc").f,n=Function.prototype,r=/^\s*function ([^ (]*)/,o="name";o in n||a("9e1e")&&i(n,o,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},8143:function(t,e,a){t.exports=a.p+"img/length.32880d46.png"},"91b2":function(t,e,a){"use strict";a.d(e,"x",function(){return n}),a.d(e,"c",function(){return r}),a.d(e,"A",function(){return o}),a.d(e,"u",function(){return s}),a.d(e,"t",function(){return c}),a.d(e,"l",function(){return d}),a.d(e,"e",function(){return l}),a.d(e,"k",function(){return u}),a.d(e,"g",function(){return m}),a.d(e,"h",function(){return g}),a.d(e,"b",function(){return p}),a.d(e,"y",function(){return h}),a.d(e,"j",function(){return f}),a.d(e,"r",function(){return b}),a.d(e,"d",function(){return y}),a.d(e,"o",function(){return v}),a.d(e,"f",function(){return w}),a.d(e,"p",function(){return k}),a.d(e,"m",function(){return B}),a.d(e,"n",function(){return A}),a.d(e,"z",function(){return x}),a.d(e,"B",function(){return C}),a.d(e,"i",function(){return j}),a.d(e,"q",function(){return Q}),a.d(e,"a",function(){return O}),a.d(e,"s",function(){return I}),a.d(e,"C",function(){return E}),a.d(e,"w",function(){return S}),a.d(e,"v",function(){return L});var i=a("b775"),n=function(t){return Object(i["a"])({url:"/ygjc/image/list",method:"post",data:t})},r=function(t){return Object(i["a"])({url:"/ygjc/image/add",method:"post",data:t})},o=function(t){return Object(i["a"])({url:"/ygjc/iterpretation/add",method:"post",data:t})},s=function(t){return Object(i["a"])({url:"/ygjc/image/detail",method:"post",data:t})},c=function(t){return Object(i["a"])({url:"/ygjc/iterpretation/list",method:"post",data:t})},d=function(t){return Object(i["a"])({url:"/ygjc/rlhdGroup/list",method:"post",data:t})},l=function(t){return Object(i["a"])({url:"/ygjc/rlhdGroup/add",method:"post",data:t})},u=function(t){return Object(i["a"])({url:"/ygjc/rlhdGroup/update",method:"post",data:t})},m=function(t){return Object(i["a"])({url:"/ygjc/rlhdGroup/delete",method:"post",data:t})},g=function(t){return Object(i["a"])({url:"/ygjc/rlhdGroup/deleteDataFromGroup",method:"post",data:t})},p=function(t){return Object(i["a"])({url:"/ygjc/rlhdGroup/addDataToGroup",method:"post",data:t})},h=function(t){return Object(i["a"])({url:"/ygjc/rlhdGroup/detail",method:"post",data:t})},f=function(t){return Object(i["a"])({url:"/ygjc/image/delete",method:"post",data:t})},b=function(t){return Object(i["a"])({url:"/ygjc/imageContrast/list",method:"post",data:t})},y=function(t){return Object(i["a"])({url:"/ygjc/imageContrast/add",method:"post",data:t})},v=function(t){return Object(i["a"])({url:"/ygjc/imageContrast/like",method:"post",data:t})},w=function(t){return Object(i["a"])({url:"/ygjc/imageContrast/delete",method:"post",data:t})},k=function(t){return Object(i["a"])({url:"/ygjc/image/config",method:"post",data:t})},B=function(t){return Object(i["a"])({url:"/ygjc/image/config",method:"post",data:t})},A=function(t){return Object(i["a"])({url:"/ygjc/image/getConfig",method:"post",data:t})},x=function(t){return Object(i["a"])({url:"/ygjc/image/addConfig",method:"post",data:t})},C=function(t){return Object(i["a"])({url:"/ygjc/image/updateConfig",method:"post",data:t})},j=function(t){return Object(i["a"])({url:"/ygjc/image/deleteConfig",method:"post",data:t})},Q=function(t){return Object(i["a"])({url:"/ygjc/image/getAudit",method:"post",data:t})},O=function(t){return Object(i["a"])({url:"/ygjc/image/addAudit",method:"post",data:t})},I=function(t){return Object(i["a"])({url:"/ygjc/imageContrast/get",method:"post",data:t})},E=function(t){return Object(i["a"])({url:"/ygjc/iterpretation/upload",method:"post",data:t})},S=function(t){return Object(i["a"])({url:"/ygjc/image/getNumberNames",method:"post",data:t})},L=function(t){return Object(i["a"])({url:"/ygjc/image/getNumberByName",method:"post",data:t})}},a517:function(t,e,a){},bdb4:function(t,e,a){"use strict";a.d(e,"e",function(){return n}),a.d(e,"f",function(){return r}),a.d(e,"c",function(){return o}),a.d(e,"d",function(){return s}),a.d(e,"a",function(){return c}),a.d(e,"b",function(){return d});var i=a("b775"),n=function(t){return Object(i["a"])({url:"/ktdb/projectAdmission/list",method:"post",data:t})},r=function(t){return Object(i["a"])({url:"/ktdb/projectAdmission/delete",method:"post",data:t})},o=function(t){return Object(i["a"])({url:"/ktdb/projectAdmission/getProjectById",method:"post",data:t})},s=function(t){return Object(i["a"])({url:"/ktdb/projectAdmission/import",method:"post",headers:{"Content-Type":"multipart/form-data"},data:t})},c=function(t){return Object(i["a"])({url:"/ktdb/projectAdmission/add",method:"post",data:t})},d=function(t){return Object(i["a"])({url:"/ktdb/projectAdmission/exportExcel",method:"post",data:t})}},d091:function(t,e,a){"use strict";var i=a("fe30"),n=a.n(i);n.a},dd74:function(t,e,a){},fe30:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2bcfdf84.23e1b49f.js.map