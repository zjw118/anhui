(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b309e"],{2758:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticStyle:{height:"500px"},attrs:{id:"map"}}),n("Button",{on:{click:e.clickBtn}},[e._v("按钮")])],1)},a=[],i=(n("96cf"),n("3b8d")),s=n("149e"),c=n("9ed9"),o={name:"demo",methods:{createMap:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a,i,o,u,l,p,h,d,m,f,g,w,b,y,v,x=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].MapView;case 2:return t=e.sent,e.next=5,c["a"].Map;case 5:return n=e.sent,e.next=8,c["a"].Basemap;case 8:return r=e.sent,e.next=11,c["a"].Point;case 11:return a=e.sent,e.next=14,c["a"].BaseTileLayer;case 14:return i=e.sent,e.next=17,c["a"].Request;case 17:return o=e.sent,e.next=20,c["a"].geometryEngine;case 20:return u=e.sent,e.next=23,c["a"].GraphicsLayer;case 23:return l=e.sent,e.next=26,c["a"].Graphic;case 26:return p=e.sent,e.next=29,c["a"].FeatureLayer;case 29:return h=e.sent,e.next=32,c["a"].Polygon;case 32:return d=e.sent,e.next=35,c["a"].WebTileLayer;case 35:m=e.sent,f={type:"simple-fill",color:[140,140,222,.5],outline:{color:[0,0,0,.5],width:2}},this.layerRedLine=new h({url:s["a"].serverUrl+"/arcgis/rest/services/qhhx/hongxian/MapServer",opacity:.7,outFields:["*"],popupTemplate:{title:"{name}",content:[{type:"fields",fieldInfos:[{fieldName:"STATENAME",label:"所属地区"},{fieldName:"面积",label:"面积（平方米）"}]}]}}),g=i.createSubclass({properties:{urlTemplate:null},getTileUrl:function(e,t,n){var r="http://t"+n%8+".tianditu.gov.cn/DataServer?T=img_w&tk=12b886b3d0f324bd6032c29503972e7c&x="+n+"&y="+t+"&l="+e;return r},fetchTile:function(e,t,n){var r=this,a=this.getTileUrl(e,t,n);return o(a,{responseType:"image"}).then(function(e){var t=e.data,n=r.tileInfo.size[0],a=r.tileInfo.size[0],i=document.createElement("canvas"),s=i.getContext("2d");return i.width=n,i.height=a,s.drawImage(t,0,0,n,a),i})}}),new g,w=new m({urlTemplate:"http://t2.tianditu.gov.cn/img_c/wmts?tk=12b886b3d0f324bd6032c29503972e7c&TILECOL={col}&TILEROW={row}&TILEMATRIX={level}&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&SERVICE=WMTS"}),b=new r({baseLayers:[],title:"Custom Basemap",id:"myBasemap"}),this.map=new n({basemap:b}),this.view=new t({map:this.map,container:"map",center:s["a"].centerPoint,zoom:7}),new a({type:"point",longitude:98.880521,latitude:38.762178}),{type:"polyline",paths:[[[98.880521,38.762178],[98.990521,38.772178]]],spatialReference:{wkid:4326}},y=new d({rings:[[[98.880521,38.762178],[98.990521,38.972178],[98.790521,38.672178],[98.880521,38.762178]]],spatialReference:{wkid:4326}}),v=new l,this.buffer=u.geodesicBuffer(y,.5,"kilometers",!1),this.buffer=u.union([this.buffer,y]),this.buffer.rings.pop(),this.graphic=new p({geometry:this.buffer,symbol:f}),v.add(this.graphic),this.map.add(w),this.map.add(this.layerRedLine),this.map.add(v),this.bufferLayer=v,this.view.on("pointer-move",function(e){x.view.toMap({x:e.x,y:e.y})});case 58:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),clickBtn:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a,i,s,o,u=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].Geoprocessor;case 2:return t=e.sent,e.next=5,c["a"].FeatureSet;case 5:return n=e.sent,e.next=8,c["a"].ImageParameters;case 8:return e.sent,e.next=11,c["a"].Graphic;case 11:return e.sent,e.next=14,c["a"].GraphicsLayer;case 14:return r=e.sent,e.next=17,c["a"].geometryEngine;case 17:a=e.sent,i=new t("http://192.168.1.158:6080/arcgis/rest/services/qhhx/insect/GPServer/insect"),s=new n,s.features=[this.graphic],o={polygon:s,redline:"redline_Project"},console.log(s),i.submitJob(o).then(function(e){"job-succeeded"===e.jobStatus&&i.getResultData(e.jobId,"out").then(function(e){console.log(e);var t={type:"simple-fill",color:[140,10,2,.8],outline:{color:[0,0,0,.8],width:2}},n=e.value.features.map(function(e){return e.symbol=t,e.attributes.shapearea=a.geodesicArea(e.geometry,"square-meters"),e}),i=new r;i.addMany(n),u.map.add(i)})});case 24:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.createMap()}},u=o,l=n("2877"),p=Object(l["a"])(u,r,a,!1,null,"44253896",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0b309e.448112b5.js.map