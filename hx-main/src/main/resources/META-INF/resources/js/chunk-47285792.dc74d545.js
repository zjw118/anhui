(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47285792"],{"0554":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tablet"}},[a("div",{staticClass:"queryBox"},[a("QueryBox",{staticStyle:{width:"100%"},attrs:{formArr:t.queryFrom},on:{query:t.getQueryData}})],1),a("div",{staticClass:"content_box"},[a("div",[a("Table",{attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns1,data:t.data1,"highlight-row":"","max-height":t.tableHeight}}),a("div",{staticClass:"page_box"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.pageNum,"show-total":""},on:{"update:current":function(e){t.pageNum=e},"on-change":t.pageChange}})],1)],1)]),a("div",{staticClass:"extract_box",class:{addActive:t.addActive}},[a("activitiesInspectTableMap",{ref:"activitiesInspectTableMap",on:{signOut:t.signOut}})],1),a("div",{staticClass:"detail-table-box",class:{detailActive:t.detailActive}},[a("div",{staticClass:"operator-btn"},[a("Button",{attrs:{type:"primary",size:"small",icon:"md-add"},on:{click:t.openAdd}},[t._v("添加至台账")]),a("Button",{attrs:{type:"default",size:"small",icon:"md-add"},on:{click:function(e){t.detailActive=!1}}},[t._v("返回")])],1),a("div",{staticClass:"detail-table"},[a("Table",{attrs:{data:t.switchShowData,border:"",stripe:"",loading:t.loading2,"highlight-row":"",columns:t.columns2},on:{"on-select-all":t.selectDetailAll,"on-select-all-cancel":t.unSelectDetailAll,"on-select":t.selectDetail,"on-select-cancel":t.unSelectDetail}}),a("Page",{attrs:{total:t.total2,current:t.pageNum2,"page-size":t.pageSize2},on:{"update:current":function(e){t.pageNum2=e}}})],1)]),a("Modal",{attrs:{title:"添加至台账"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"是否新建台账"}},[a("RadioGroup",{model:{value:t.isCreateAccount,callback:function(e){t.isCreateAccount=e},expression:"isCreateAccount"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!t.isCreateAccount,expression:"!isCreateAccount"}]},[a("Table",{attrs:{data:t.data3,columns:t.columns3,border:"","highlight-row":""},on:{"on-current-change":t.changeAccount}}),a("Page",{attrs:{total:t.total1,"page-size":10,current:t.pageNum1,"show-total":""},on:{"update:current":function(e){t.pageNum1=e},"on-change":t.pageChange}})],1)],1),a("Form",{directives:[{name:"show",rawName:"v-show",value:t.isCreateAccount,expression:"isCreateAccount"}],ref:"addForm",attrs:{model:t.AddData,rules:t.ruleValidate,"label-width":120}},[a("FormItem",{attrs:{prop:"name",label:"台账名称："}},[a("Input",{attrs:{placeholder:"请输入任务名称",size:"default"},model:{value:t.AddData.name,callback:function(e){t.$set(t.AddData,"name","string"===typeof e?e.trim():e)},expression:"AddData.name"}})],1),a("FormItem",{attrs:{prop:"remark",label:"说明："}},[a("Input",{attrs:{placeholder:"请输入任务名称",size:"default",type:"textarea"},model:{value:t.AddData.remark,callback:function(e){t.$set(t.AddData,"remark","string"===typeof e?e.trim():e)},expression:"AddData.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.clickAdd}},[t._v("确定")])],1)],1)],1)},i=[],r=(a("efce"),a("ed8b"),a("4634"),a("7cfd"),a("97a3")),o=a("aff7"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-box"},[a("div",{ref:"viewDiv",attrs:{id:"viewDiv"}}),a("Button",{staticClass:"sign-btn",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("signOut",!1)}}},[t._v("返回")])],1)},s=[],l=(a("63ff"),a("f8f9")),u=a("9ed9"),d=a("149e"),f=a("f831"),m=a("42e8"),p=a.n(m),h=a("39f3"),g=a.n(h),y={name:"checkInfoMap",data:function(){return{map:{},view:{}}},computed:{},props:{},components:{},watch:{},mounted:function(){this.createMap()},methods:{createMap:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,r,o,c,s,l,m,h,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].MapView;case 2:return e=t.sent,t.next=5,u["a"].Map;case 5:return a=t.sent,t.next=8,u["a"].Basemap;case 8:return n=t.sent,t.next=11,u["a"].BasemapToggle;case 11:return i=t.sent,t.next=14,Object(f["f"])().then((function(t){return t}));case 14:return r=t.sent,t.next=17,Object(f["e"])().then((function(t){return t}));case 17:return o=t.sent,t.next=20,Object(f["d"])().then((function(t){return t}));case 20:return c=t.sent,t.next=23,Object(f["g"])().then((function(t){return t}));case 23:return s=t.sent,t.next=26,Object(f["b"])().then((function(t){return t}));case 26:l=t.sent,m=new n({baseLayers:[o,l,c],title:"矢量地图",id:"myBasemap",thumbnailUrl:p.a}),h=new n({baseLayers:[r,l,s],title:"影像地图",id:"myBasemap1",thumbnailUrl:g.a}),this.map=new a({basemap:h}),this.view=new e({map:this.map,container:"viewDiv",center:d["a"].centerPoint,zoom:7}),y=new i({view:this.view,nextBasemap:m}),this.view.ui.add(y,"top-right");case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initCom:function(t){this.map.remove(this.insercLayer),this.view.graphics.removeAll()}}},b=y,v=(a("2b8c"),a("6691")),w=Object(v["a"])(b,c,s,!1,null,"45a26f73",null),k=w.exports,x=a("91b2");function O(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function D(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?O(a,!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var j={name:"extracTable",data:function(){var t=this;return{queryData:{},typeList:[{value:"",label:"请选择"},{value:"1",label:"type1"},{value:"2",label:"type2"}],tableHeight:48*Math.floor((window.innerHeight-300-40)/48)+40,columns1:[{title:"序号",key:"index",width:100,align:"center",render:function(e,a){return e("span",a.index+(t.pageNum-1)*t.pageSize+1)}},{title:"名称",align:"center",minWidth:200,key:"name"},{title:"说明",align:"center",minWidth:250,key:"remark"},{title:"底图服务",align:"center",width:300,key:"url"},{title:"操作",key:"address",width:280,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small",icon:"md-eye"},style:{marginRight:"5px"},on:{click:function(){t.detailActive=!0,t.getDetailList(a.row.id)}}},"查看人类活动点")])}}],data1:[],total:0,pageNum:1,pageSize:Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),loading:!1,addActive:!1,modalStatus:"",AddData:{name:"",remark:""},ruleValidate:{name:[{required:!0,message:"台账名称必须填写",trigger:"blur"}],remark:[{required:!0,message:"台账说明必须填写",trigger:"blur"}]},addTypeList:[{value:"1",label:"type1"},{value:"2",label:"type2"}],detailActive:!1,data2:[],columns2:[{type:"selection",width:60,align:"center"},{title:"序号",key:"index",width:100,align:"center",render:function(e,a){return e("span",a.index+(t.pageNum-1)*t.pageSize+1)}},{title:"活动名称",align:"center",minWidth:200,key:"activeName"},{title:"活动类型",align:"center",minWidth:200,key:"activeType"},{title:"说明",align:"center",minWidth:200,key:"descri"},{title:"备注",align:"center",minWidth:200,key:"remark"},{title:"面积（公顷）",align:"center",minWidth:200,key:"area"}],total2:0,pageNum2:1,pageSize2:10,loading2:!1,isCreateAccount:1,pageNum1:1,total1:0,data3:[],columns3:[{title:"序号",key:"index",align:"center",render:function(e,a){return e("span",a.index+10*(t.pageNum1-1)+1)}},{title:"台账名称",key:"name",align:"center"}],currentRow:null,modal:!1}},components:{QueryBox:o["a"],activitiesInspectTableMap:k},computed:{queryFrom:function(){return[{type:1,field:"name",title:"任务名称"},{type:3,field:"year",title:"任务年份"},{type:2,field:"type",title:"任务类型",data:this.typeList}]},switchShowData:function(){return this.data2.length?(console.log(this.data2),this.data2.slice((this.pageNum2-1)*this.pageSize2,this.pageNum2*this.pageSize2)):[]}},created:function(){this.getTableList(),this.getAccountList()},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.tableHeight=48*Math.floor((window.innerHeight-300-40)/48)+40,t.pageSize=Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),t.getTableList()}),!1)},watch:{queryData:function(){this.getTableList()}},methods:{getQueryData:function(t){this.queryData=t,this.pageNum=1,this.getTableList()},getTableList:function(){var t=this;this.loading=!0,Object(x["i"])({data:D({pageSize:this.pageSize,pageNum:this.pageNum},this.queryData)}).then((function(e){"0000"===e.data.code&&(t.data1=e.data.data.rows,t.total1=e.data.data.total,t.loading=!1)})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},pageChange:function(t){this.pageNum=t,this.getTableList()},signOut:function(t){this.addActive=t},getDetailList:function(t){var e=this;this.loading2=!0,Object(x["g"])({data:{id:t}}).then((function(t){e.loading2=!1,"0000"===t.data.code?(e.data2=t.data.data.data,e.total2=e.data2.length,e.pageNum2=1):(e.data2=[],e.$Notice.error({title:"获取人类活动详情列表失败",desc:t.data.msg}))}))},getAccountList:function(){var t=this;Object(x["e"])({data:{pageSize:10,pageNum:this.pageNum1}}).then((function(e){"0000"===e.data.code?(t.data3=e.data.data.rows,t.total1=e.data.data.total):t.$Notice.error({title:"获取人类活动台账失败",desc:e.data.msg})}))},createAndAdd:function(t){var e=this;Object(x["c"])({data:{name:this.AddData.name,id:t,remark:this.AddData.remark,createBy:1}}).then((function(t){"0000"===t.data.code?e.$Notice.success({title:"成功添加至新台账"}):e.$Notice.error({title:"添加至新台账失败",desc:t.data.msg})}))},selectDetail:function(t,e){this.data2.some((function(t){return e.cd001===t.cd001&&(t._checked=!0,!0)}))},unSelectDetail:function(t,e){this.data2.some((function(t){return e.id===t.id&&(t._checked=!1,!0)}))},selectDetailAll:function(){this.data2.slice((this.pageNum2-1)*this.pageSize2,this.pageNum2*this.pageSize2).forEach((function(t){t._checked=!0}))},unSelectDetailAll:function(){this.data2.slice((this.pageNum2-1)*this.pageSize2,this.pageNum2*this.pageSize2).forEach((function(t){t._checked=!1}))},addToGroup:function(t,e){var a=this;Object(x["a"])({data:{groupId:t,id:e}}).then((function(t){"0000"===t.data.code?a.$Notice.success({title:"添加到台账成功"}):a.$Notice.error({title:"添加人类活动至台账失败",desc:t.data.msg})}))},clickAdd:function(){var t=this.data2.filter((function(t){return t._checked})).map((function(t){return t.cd001}));this.isCreateAccount?this.createAndAdd(t):this.addToGroup(this.currentRow.id,t)},changeAccount:function(t){this.currentRow=t},openAdd:function(){this.modal=!0}}},S=j,A=(a("4dac"),Object(v["a"])(S,n,i,!1,null,"dc87c47c",null));e["default"]=A.exports},"2b8c":function(t,e,a){"use strict";var n=a("36de"),i=a.n(n);i.a},"2e13":function(t,e,a){},"36de":function(t,e,a){},"39f3":function(t,e,a){t.exports=a.p+"img/Basemapthumbnail1.5f8d6db2.png"},"42e8":function(t,e,a){t.exports=a.p+"img/Basemapthumbnail.6dc37597.png"},4634:function(t,e,a){for(var n=a("96dd"),i=a("7d56"),r=a("a6d5"),o=a("3f8b"),c=a("b8ea"),s=a("e3b3"),l=a("1277"),u=l("iterator"),d=l("toStringTag"),f=s.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(m),h=0;h<p.length;h++){var g,y=p[h],b=m[y],v=o[y],w=v&&v.prototype;if(w&&(w[u]||c(w,u,f),w[d]||c(w,d,y),s[y]=f,b))for(g in n)w[g]||r(w,g,n[g],!0)}},"4dac":function(t,e,a){"use strict";var n=a("f7ab"),i=a.n(n);i.a},"7cfd":function(t,e,a){var n=a("d3d8").f,i=Function.prototype,r=/^\s*function ([^ (]*)/,o="name";o in i||a("f9a5")&&n(i,o,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},8868:function(t,e,a){var n=a("2498"),i=a("da27"),r=a("0cc1");t.exports=function(t,e){var a=(i.Object||{})[t]||Object[t],o={};o[t]=e(a),n(n.S+n.F*r((function(){a(1)})),"Object",o)}},"91b2":function(t,e,a){"use strict";a.d(e,"i",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"l",(function(){return o})),a.d(e,"h",(function(){return c})),a.d(e,"g",(function(){return s})),a.d(e,"e",(function(){return l})),a.d(e,"c",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"k",(function(){return f})),a.d(e,"d",(function(){return m})),a.d(e,"f",(function(){return p})),a.d(e,"j",(function(){return h}));var n=a("b775"),i=function(t){return Object(n["a"])({url:"/ygjc/image/list",method:"post",data:t})},r=function(t){return Object(n["a"])({url:"/ygjc/image/add",method:"post",data:t})},o=function(t){return Object(n["a"])({url:"/ygjc/iterpretation/add",method:"post",data:t})},c=function(t){return Object(n["a"])({url:"/ygjc/image/detail",method:"post",data:t})},s=function(t){return Object(n["a"])({url:"/ygjc/iterpretation/list",method:"post",data:t})},l=function(t){return Object(n["a"])({url:"/ygjc/rlhdGroup/list",method:"post",data:t})},u=function(t){return Object(n["a"])({url:"/ygjc/rlhdGroup/add",method:"post",data:t})},d=function(t){return Object(n["a"])({url:"/ygjc/rlhdGroup/addDataToGroup",method:"post",data:t})},f=function(t){return Object(n["a"])({url:"/ygjc/rlhdGroup/detail",method:"post",data:t})},m=function(t){return Object(n["a"])({url:"/ygjc/image/delete",method:"post",data:t})},p=function(t){return Object(n["a"])({url:"/ygjc/imageContrast/list",method:"post",data:t})},h=function(t){return Object(n["a"])({url:"/ygjc/image/list2",method:"post",data:t})}},"97a3":function(t,e,a){"use strict";function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return n}))},aff7:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"global-query"},[a("div",{ref:"queryBox",staticClass:"queryBox",on:{click:function(e){t.show=!t.show}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t.queryData.length,expression:"queryData.length===0"}],staticClass:"search-title"},[t._v("查询条件")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.queryData.length>0,expression:"queryData.length > 0"}],staticClass:"search-title1"},[t._v("查询条件")]),a("div",{staticClass:"search-item"},t._l(t.queryData,(function(e,n){return a("span",{key:n,staticClass:"query"},[a("strong",[t._v(t._s(e.title))]),a("span",[t._v("\n            "+t._s(e.label)+"\n          ")])])})),0),a("div",{staticStyle:{width:"100px",float:"right"}},[a("Button",{attrs:{type:"primary",size:"small",icon:"ios-arrow-dropdown"}},[t._v("查询条件")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"queryDown",staticClass:"queryDown"},[a("Form",{ref:"formInline",attrs:{inline:"","label-width":100,model:t.formInline}},[t._l(t.formArr,(function(e,n){return a("FormItem",{key:n,attrs:{label:e.title+"："}},[1===e.type?a("Input",{staticClass:"queryInput",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:e.title},model:{value:t.formInline[e.field],callback:function(a){t.$set(t.formInline,e.field,a)},expression:"formInline[item.field]"}}):t._e(),2===e.type?a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:""},model:{value:t.formInline[e.field],callback:function(a){t.$set(t.formInline,e.field,a)},expression:"formInline[item.field]"}},t._l(e.data,(function(e,n){return a("Option",{key:n,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1):t._e(),3===e.type?a("DatePicker",{staticStyle:{width:"200px"},attrs:{size:"large",type:"year","start-date":new Date,placement:"bottom-end",placeholder:e.title},model:{value:t.formInline[e.field],callback:function(a){t.$set(t.formInline,e.field,a)},expression:"formInline[item.field]"}}):t._e(),4===e.type?a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange","start-date":new Date,placement:"bottom-end",placeholder:"请输入起止日期","on-open-change":"true"},model:{value:t.formInline[e.field],callback:function(a){t.$set(t.formInline,e.field,a)},expression:"formInline[item.field]"}}):t._e()],1)})),a("FormItem",{staticStyle:{float:"right"},attrs:{"label-width":0}},[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.query(e)}}},[a("i",{staticClass:"iconfont icon-chaxun1"}),t._v("查询")]),a("Button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.cleardata(e)}}},[a("i",{staticClass:"iconfont icon-zhongzhi"}),t._v("重置")])],1)],2)],1)])},i=[],r=a("cf45"),o={name:"global-query",data:function(){return{formInline:{},show:!1}},computed:{queryData:function(){var t=this,e=[],a=function(a){if("startAndEndTime"===a&&""===t.formInline[a][0]&&""===t.formInline[a][1]&&delete t.formInline[a],""!==t.formInline[a]&&void 0!==t.formInline[a]){var n,i=t.formArr.filter((function(t){return t.field===a}))[0];n=2===i.type?i.data.filter((function(e){return e.value===t.formInline[a]}))[0].label:3===i.type?Object(r["d"])(t.formInline[a]):4===i.type?Object(r["c"])(t.formInline[a][0])+" - "+Object(r["c"])(t.formInline[a][1]):t.formInline[a];var o={title:t.formArr.filter((function(t){return t.field===a}))[0].title,field:a,value:t.formInline[a],label:n};e.push(o)}};for(var n in this.formInline)a(n);return e}},props:{formArr:{type:Array,default:function(){return[]}}},mounted:function(){document.addEventListener("click",this.queryHide)},beforeDestroy:function(){document.removeEventListener("click",this.queryHide)},methods:{cleardata:function(){this.formInline={},this.query()},query:function(){this.show=!1;var t={};for(var e in this.queryData)"cl010"===this.queryData[e].field?t[this.queryData[e].field]=Object(r["d"])(this.queryData[e].value):t[this.queryData[e].field]=this.queryData[e].value;this.$emit("query",t)},queryHide:function(t){this.$refs.queryBox.contains(t.target)||this.$refs.queryDown.contains(t.target)||(this.show=!1)}}},c=o,s=(a("d533"),a("6691")),l=Object(s["a"])(c,n,i,!1,null,"574606c2",null);e["a"]=l.exports},cb2e:function(t,e,a){var n=a("7afe"),i=a("d93f").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},d533:function(t,e,a){"use strict";var n=a("2e13"),i=a.n(n);i.a},e323:function(t,e,a){"use strict";var n=a("d3d8"),i=a("0614");t.exports=function(t,e,a){e in t?n.f(t,e,i(0,a)):t[e]=a}},e493:function(t,e,a){var n=a("c864"),i=a("0614"),r=a("6117"),o=a("2ab1"),c=a("549d"),s=a("25ae"),l=Object.getOwnPropertyDescriptor;e.f=a("f9a5")?l:function(t,e){if(t=r(t),e=o(e,!0),s)try{return l(t,e)}catch(a){}if(c(t,e))return i(!n.f.call(t,e),t[e])}},ed8b:function(t,e,a){var n=a("a9cf"),i=a("7d56");a("8868")("keys",(function(){return function(t){return i(n(t))}}))},efce:function(t,e,a){var n=a("2498"),i=a("f36d"),r=a("6117"),o=a("e493"),c=a("e323");n(n.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,n=r(t),s=o.f,l=i(n),u={},d=0;while(l.length>d)a=s(n,e=l[d++]),void 0!==a&&c(u,e,a);return u}})},f36d:function(t,e,a){var n=a("cb2e"),i=a("9d61"),r=a("8cac"),o=a("3f8b").Reflect;t.exports=o&&o.ownKeys||function(t){var e=n.f(r(t)),a=i.f;return a?e.concat(a(t)):e}},f7ab:function(t,e,a){}}]);
//# sourceMappingURL=chunk-47285792.dc74d545.js.map