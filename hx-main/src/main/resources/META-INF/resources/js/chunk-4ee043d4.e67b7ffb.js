(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ee043d4"],{"10bf":function(t,e,r){"use strict";var n=r("8129"),i=r.n(n);i.a},"142f":function(t,e,r){},"1e01":function(t,e,r){var n=r("da0b"),i=r("ae6e").set;t.exports=function(t,e,r){var o,a=e.constructor;return a!==r&&"function"==typeof a&&(o=a.prototype)!==r.prototype&&n(o)&&i&&i(t,o),t}},2354:function(t,e,r){"use strict";var n=r("d6ac"),i=r.n(n);i.a},"327d":function(t,e,r){"use strict";var n=r("ee73"),i=r.n(n);i.a},"3a06":function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"45d5":function(t,e,r){},5382:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"roleManage"}},[r("div",{staticClass:"btns_box"},[r("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){e.stopPropagation(),t.$refs.userAdd.build=!0}}},[t._v("新建")])],1),r("div",{staticClass:"tab_box"},[r("dragTreeTable",{attrs:{data:t.treeData,onDrag:t.onTreeDataChange}})],1)])},i=[],o=(r("7cfd"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"table",staticClass:"drag-tree-table"},[r("div",{staticClass:"drag-tree-table-header"},t._l(t.data.columns,(function(e,n){return r("column",{key:n,attrs:{width:e.width,flex:e.flex}},[t._v("\n        "+t._s(e.title)+"\n      ")])})),1),r("div",{staticClass:"drag-tree-table-body",class:t.isDraing?"is-draging":"",on:{dragover:t.draging,dragend:t.drop}},t._l(t.data[t.custom_field.lists],(function(e,n){return r("row",{key:n,attrs:{depth:"0",columns:t.data.columns,isdraggable:t.isdraggable,model:e,custom_field:t.custom_field}})})),1)])}),a=[];function s(t){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t){return l="function"===typeof Symbol&&"symbol"===s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)},l(t)}var c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tree-block",attrs:{draggable:!!t.isdraggable},on:{dragstart:function(e){return t.dragstart(e)},dragend:function(e){return t.dragend(e)}}},[r("div",{staticClass:"tree-row",attrs:{"tree-id":t.model.id,"tree-p-id":t.model.parent_id},on:{click:t.toggle}},[t._l(t.columns,(function(e,n){return r("column",{key:n,class:"align-"+e.align,attrs:{field:e.field,width:e.width,flex:e.flex}},["selection"===e.type?r("span",[r("space",{attrs:{depth:t.depth}}),t.model[t.custom_field.lists]&&t.model[t.custom_field.lists].length?r("span",{staticClass:"zip-icon",class:[t.model[t.custom_field.open]?"arrow-bottom":"arrow-right"]}):r("span",{staticClass:"zip-icon arrow-transparent"}),e.formatter?r("span",{domProps:{innerHTML:t._s(e.formatter(t.model))}}):r("span",{domProps:{innerHTML:t._s(t.model[e.field])}})],1):"action"===e.type?r("span",t._l(e.actions,(function(e,n){return r("a",{key:n,staticClass:"action-item",attrs:{type:"text",size:"small"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.onclick(t.model)}}},[r("i",{class:e.icon,domProps:{innerHTML:t._s(e.formatter(t.model))}})])})),0):r("span",[e.formatter?r("span",{domProps:{innerHTML:t._s(e.formatter(t.model))}}):r("span",[t._v(t._s(t.model[e.field]))])])])})),t._m(0)],2),t._l(t.model[t.custom_field.lists],(function(e,n){return t.isFolder?r("row",{directives:[{name:"show",rawName:"v-show",value:t.model[t.custom_field.open],expression:"model[custom_field.open]"}],key:n,attrs:{model:e,columns:t.columns,isdraggable:t.isdraggable,depth:1*t.depth+1,custom_field:t.custom_field}}):t._e()}))],2)},d=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"hover-model",staticStyle:{display:"none"}},[r("div",{staticClass:"hover-block prev-block"},[r("i",{staticClass:"el-icon-caret-top"})]),r("div",{staticClass:"hover-block center-block"},[r("i",{staticClass:"el-icon-caret-right"})]),r("div",{staticClass:"hover-block next-block"},[r("i",{staticClass:"el-icon-caret-bottom"})])])}],u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.flex?r("div",{staticClass:"tree-column",style:{width:t.width,flex:t.flex}},[t._t("default")],2):r("div",{staticClass:"tree-column",style:{width:t.width}},[t._t("default")],2)},f=[],p=(r("8f42"),{name:"column",props:{width:String,field:String,label:String,flex:Number},data:function(){return{open:!1}}}),h=p,m=(r("2354"),r("6691")),g=Object(m["a"])(h,u,f,!1,null,null,null),y=g.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"space-container"},t._l(t.spaces,(function(t,e){return r("span",{key:e,staticClass:"space"})})),0)},v=[],_={name:"space",props:["depth"],computed:{spaces:function(){for(var t=[],e=0;e<this.depth;e++)t.push("");return t}}},w=_,x=(r("ad49"),Object(m["a"])(w,b,v,!1,null,null,null)),C=x.exports,I={name:"row",props:["model","depth","columns","isdraggable","custom_field"],data:function(){return{open:!1,visibility:"visible"}},components:{column:y,space:C},computed:{isFolder:function(){return this.model[this.custom_field.lists]&&this.model[this.custom_field.lists].length}},methods:{toggle:function(){this.isFolder&&(this.model[this.custom_field.open]=!this.model[this.custom_field.open],this.$forceUpdate())},dragstart:function(t){navigator.userAgent.indexOf("Firefox")>=0&&t.dataTransfer.setData("Text",this.id),window.dragId=t.target.children[0].getAttribute("tree-id"),window.dragParentNode=t.target,t.target.style.opacity=.2},dragend:function(t){t.target.style.opacity=1}}},k=I,T=(r("96fb"),Object(m["a"])(k,c,d,!1,null,null,null)),E=T.exports;document.body.ondrop=function(t){t.preventDefault(),t.stopPropagation()};var N={name:"dragTreeTable",components:{row:E,column:y,space:C},props:{isdraggable:{type:Boolean,default:!0},data:Object,onDrag:Function},data:function(){return{treeData:[],dragX:0,dragY:0,dragId:"",targetId:"",whereInsert:"",isDraing:!1,custom_field:{id:"id",parent_id:"parent_id",order:"order",lists:"lists"}}},methods:{getElementLeft:function(t){var e=t.offsetLeft,r=t.offsetParent;while(null!==r)e+=r.offsetLeft,r=r.offsetParent;return e},getElementTop:function(t){var e=this.$refs.table.parentElement.scrollTop,r=t.offsetTop-e,n=t.offsetParent;while(null!==n)r+=n.offsetTop,n=n.offsetParent;return r},draging:function(t){this.isDraing=!0,t.pageX===this.dragX&&t.pageY===this.dragY||(this.dragX=t.pageX,this.dragY=t.pageY,this.filter(t.pageX,t.pageY),t.clientY<100?window.scrollTo(0,scrollY-6):t.clientY>document.body.clientHeight-160&&window.scrollTo(0,scrollY+6))},drop:function(t){this.clearHoverStatus(),this.resetTreeData(),this.isDraing=!1},filter:function(t,e){var r=document.querySelectorAll(".tree-row");this.targetId=void 0;var n=this.getElementTop(dragParentNode),i=this.getElementLeft(dragParentNode),o=i+dragParentNode.clientWidth,a=n+dragParentNode.clientHeight;if(!(t>=i&&t<=o&&e>=n&&e<=a))for(var s=0;s<r.length;s++){var l=r[s],c=this.getElementLeft(l),d=this.getElementTop(l),u=l.clientWidth,f=l.clientHeight;if(t>c&&t<c+u&&e>d&&e<d+f){var p=e-d,h=l.children[l.children.length-1];h.style.display="block";var m=l.getAttribute("tree-id");this.targetId=m;var g="",y=l.offsetHeight;p/y>.75?("0.5"!==h.children[2].style.opacity&&(this.clearHoverStatus(),h.children[2].style.opacity=.5),g="bottom"):p/y>.25?("0.5"!==h.children[1].style.opacity&&(this.clearHoverStatus(),h.children[1].style.opacity=.5),g="center"):("0.5"!==h.children[0].style.opacity&&(this.clearHoverStatus(),h.children[0].style.opacity=.5),g="top"),this.whereInsert=g}}},clearHoverStatus:function(){for(var t=document.querySelectorAll(".tree-row"),e=0;e<t.length;e++){var r=t[e],n=r.children[r.children.length-1];n.style.display="none",n.children[0].style.opacity=.1,n.children[1].style.opacity=.1,n.children[2].style.opacity=.1}},resetTreeData:function(){if(void 0!==this.targetId){var t=this.custom_field.lists,e=this.custom_field.parent_id,r=this.custom_field.id,n=[],i=this.data[t],o=this;a(i,n),this.resetOrder(n),this.onDrag(n)}function a(n,i){for(var s=0;s<n.length;s++){var l=n[s],c=o.deepClone(l);if(c[t]=[],o.targetId===l.id){var d=o.getCurDragItem(o.data[t],window.dragId);"top"===o.whereInsert?(d[e]=l[e],i.push(d),i.push(c)):"center"===o.whereInsert?(d[e]=l[r],c[t].push(d),i.push(c)):(d[e]=l[e],i.push(c),i.push(d))}else window.dragId!==l[r]&&i.push(c);l[t]&&l[t].length&&a(l[t],c[t])}}},resetOrder:function(t){for(var e=this.custom_field.lists,r=0;r<t.length;r++)t[r][this.custom_field.order]=r,t[r][e]&&t[r][e].length&&this.resetOrder(t[r][e])},deepClone:function(t){if(!t)return t;var e,r,n;for(n in e=Array.isArray(t)?[]:{},t)r=t[n],e[n]="object"===l(r)?this.deepClone(r):r;return e},getCurDragItem:function(t,e){var r=null,n=this.custom_field.lists;function i(t){for(var o=0;o<t.length;o++){var a=t[o];if(a.id==e){r=JSON.parse(JSON.stringify(a));break}a[n]&&a[n].length&&i(a[n])}}return i(t),r}},mounted:function(){this.data.custom_field&&(this.custom_field=Object.assign({},this.custom_field,this.data.custom_field))}},S=N,D=(r("10bf"),Object(m["a"])(S,o,a,!1,null,null,null)),O=D.exports,P={name:"RoleManage",data:function(){return{treeData:{lists:[{id:40,parent_id:0,order:0,name:"红线功能描述",sort:1,url:"/main/dataCenter",open:!0,lists:[]},{id:5,parent_id:0,order:1,name:"调查数据台账",sort:2,url:"/main/dataCollection",open:!0,lists:[{id:12,parent_id:5,open:!0,order:0,name:"调查数据信息",sort:1,url:"/main/dataCollection/editTable",lists:[]}]},{id:19,parent_id:0,order:2,name:"管理系统",sort:3,url:"/main/systemManage/menuManage",open:!0,lists:[]}],columns:[{type:"selection",title:"名称",field:"name",width:"20%",align:"left",formatter:function(t){return'<a style="margin-left: 5px">'+t.name+"</a>"}},{type:"Number",title:"排序",field:"sort",width:"10%",align:"left"},{type:"Number",title:"请求地址",field:"url",width:"40%",align:"left"},{title:"操作",type:"action",width:"30%",align:"left",actions:[{text:"查看角色",onclick:this.onDetail,formatter:function(t){return'<i style="padding: 0 15px 0 0;color:deepskyblue">查看</i>'}},{text:"编辑",onclick:this.onEdit,formatter:function(t){return'<i style="padding: 0 15px 0 0;color:deepskyblue">编辑</i>'}},{text:"删除",onclick:this.onEdit,formatter:function(t){return'<i style="padding: 0 15px 0 0;color:deepskyblue">删除</i>'}},{text:"添加下级菜单",onclick:this.onEdit,formatter:function(t){return'<i style="padding: 0 15px 0 0;color:deepskyblue">添加下级菜单</i>'}}]}]}}},components:{dragTreeTable:O},mounted:function(){},methods:{onTreeDataChange:function(t){this.treeData.lists=t},onDetail:function(){}}},A=P,F=(r("327d"),Object(m["a"])(A,n,i,!1,null,"9b90e4e8",null));e["default"]=F.exports},7130:function(t,e,r){var n=r("2498"),i=r("3038"),o=r("0cc1"),a=r("3a06"),s="["+a+"]",l="​",c=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),u=function(t,e,r){var i={},s=o((function(){return!!a[t]()||l[t]()!=l})),c=i[t]=s?e(f):a[t];r&&(i[r]=c),n(n.P+n.F*s,"String",i)},f=u.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(d,"")),t};t.exports=u},"7cfd":function(t,e,r){var n=r("d3d8").f,i=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in i||r("f9a5")&&n(i,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},8129:function(t,e,r){},"8f42":function(t,e,r){"use strict";var n=r("3f8b"),i=r("549d"),o=r("6077"),a=r("1e01"),s=r("2ab1"),l=r("0cc1"),c=r("cb2e").f,d=r("e493").f,u=r("d3d8").f,f=r("7130").trim,p="Number",h=n[p],m=h,g=h.prototype,y=o(r("65c3")(g))==p,b="trim"in String.prototype,v=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():f(e,3);var r,n,i,o=e.charCodeAt(0);if(43===o||45===o){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var a,l=e.slice(2),c=0,d=l.length;c<d;c++)if(a=l.charCodeAt(c),a<48||a>i)return NaN;return parseInt(l,n)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof h&&(y?l((function(){g.valueOf.call(r)})):o(r)!=p)?a(new m(v(e)),r,h):v(e)};for(var _,w=r("f9a5")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)i(m,_=w[x])&&!i(h,_)&&u(h,_,d(m,_));h.prototype=g,g.constructor=h,r("a6d5")(n,p,h)}},"96fb":function(t,e,r){"use strict";var n=r("45d5"),i=r.n(n);i.a},ad49:function(t,e,r){"use strict";var n=r("142f"),i=r.n(n);i.a},ae6e:function(t,e,r){var n=r("da0b"),i=r("8cac"),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r("e85e")(Function.call,r("e493").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:o}},cb2e:function(t,e,r){var n=r("7afe"),i=r("d93f").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},d6ac:function(t,e,r){},e493:function(t,e,r){var n=r("c864"),i=r("0614"),o=r("6117"),a=r("2ab1"),s=r("549d"),l=r("25ae"),c=Object.getOwnPropertyDescriptor;e.f=r("f9a5")?c:function(t,e){if(t=o(t),e=a(e,!0),l)try{return c(t,e)}catch(r){}if(s(t,e))return i(!n.f.call(t,e),t[e])}},ee73:function(t,e,r){}}]);
//# sourceMappingURL=chunk-4ee043d4.e67b7ffb.js.map