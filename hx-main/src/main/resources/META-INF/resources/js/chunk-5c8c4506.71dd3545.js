(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c8c4506"],{"9a8e":function(t,e,a){"use strict";var n=a("a240"),i=a.n(n);i.a},a240:function(t,e,a){},a43b:function(t,e,a){"use strict";var n=a("a640"),i=a.n(n);i.a},a640:function(t,e,a){},b1f7:function(t,e,a){"use strict";var n=a("cc70"),i=a.n(n);i.a},b753:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tablet"}},[a("QueryBox",{on:{searchSrldId:t.searchSrldId}},[a("Button",{staticClass:"btn-tabBtn",attrs:{type:"primary",size:"small"},on:{click:function(e){e.stopPropagation(),t.addActive=!0,t.$refs.ledgerManageMap.initCom()}}},[a("i",{staticClass:"iconfont icon-leimupinleifenleileibie"}),t._v("切换地图")]),a("Button",{staticClass:"btn-add",staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"small",icon:"md-add"},on:{click:function(e){return e.stopPropagation(),t.openAdd("add")}}},[t._v("新建")]),a("Button",{staticClass:"btn-download",staticStyle:{padding:"2px 7px 1.8px","margin-right":"10px"},attrs:{type:"success",size:"small"}},[a("Upload",{attrs:{"show-upload-list":!1,format:[".xls"],action:"#"}},[a("i",{staticClass:"iconfont icon-upload"}),a("span",[t._v("导入")])])],1),a("Button",{staticClass:"btn-exportBtn",attrs:{type:"primary",size:"small"}},[a("i",{staticClass:"iconfont icon-xiazai"}),t._v("下发")])],1),a("div",{staticClass:"content_box"},[a("div",[a("Table",{attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns1,data:t.data1,"highlight-row":"","max-height":t.tableHeight}}),a("div",{staticClass:"page_box"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.pageChange}})],1)],1)]),a("div",{staticClass:"extract_box",class:{addActive:t.addActive}},[a("ledgerManageMap",{ref:"ledgerManageMap",on:{signOut:t.signOut}})],1),a("Modal",{attrs:{title:"新建人类活动监管台账信息"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{ref:"addForm",staticStyle:{padding:"0 50px"},attrs:{model:t.AddData,rules:t.ruleValidate,"label-width":90}},[a("FormItem",{attrs:{prop:"num",label:"问题点编号："}},[a("Input",{attrs:{placeholder:"请输入问题点编号",size:"default"},model:{value:t.AddData.num,callback:function(e){t.$set(t.AddData,"num","string"===typeof e?e.trim():e)},expression:"AddData.num"}})],1),a("FormItem",{attrs:{prop:"type",label:"所属任务："}},[a("Select",{attrs:{size:"default",placeholder:"请选择所属任务"},model:{value:t.AddData.type,callback:function(e){t.$set(t.AddData,"type","string"===typeof e?e.trim():e)},expression:"AddData.type"}},t._l(t.typeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{prop:"lon",label:"经度："}},[a("Input",{attrs:{placeholder:"请输入经度",size:"default"},model:{value:t.AddData.lon,callback:function(e){t.$set(t.AddData,"lon","string"===typeof e?e.trim():e)},expression:"AddData.lon"}})],1),a("FormItem",{attrs:{prop:"lat",label:"纬度："}},[a("Input",{attrs:{placeholder:"请输入纬度",size:"default"},model:{value:t.AddData.lat,callback:function(e){t.$set(t.AddData,"lat","string"===typeof e?e.trim():e)},expression:"AddData.lat"}})],1),a("FormItem",{attrs:{prop:"typeP",label:"问题点类型："}},[a("Select",{attrs:{size:"default",placeholder:"请选择问题点类型"},model:{value:t.AddData.typeP,callback:function(e){t.$set(t.AddData,"typeP","string"===typeof e?e.trim():e)},expression:"AddData.typeP"}},t._l(t.dotList1,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{prop:"desc",label:"问题点备注："}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:"请输入问题点备注",size:"default"},model:{value:t.AddData.desc,callback:function(e){t.$set(t.AddData,"desc","string"===typeof e?e.trim():e)},expression:"AddData.desc"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("确定")])],1)],1)],1)},i=[],r=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"query-box"},[a("div",{ref:"queryBox",staticClass:"query-box-title",on:{click:function(e){t.show=!t.show}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t.queryData.length,expression:"queryData.length===0"}],staticClass:"search-title"},[t._v("查询条件")]),a("div",{staticClass:"search-items"},t._l(t.queryData,function(e,n){return a("span",{key:n,staticClass:"queryTerm"},[a("strong",[t._v(t._s(e.name))]),a("span",[t._v("\n          "+t._s(e.text)+"\n        ")])])}),0),a("div",{staticStyle:{"text-align":"right"}},[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small",icon:"ios-arrow-dropdown"}},[t._v("查询条件")]),t._t("default")],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"queryDown",staticClass:"query-down"},[a("div",{staticClass:"queryTerm"},[a("TextTerm",{attrs:{titName:"问题点编号",titKey:"num"},on:{updataQueryData:t.updataQueryData,delQueryTrem:t.delQueryTrem}})],1),a("div",{staticClass:"queryTerm"},[a("SelectTerm",{attrs:{titName:"所属任务",titKey:"type"},on:{updataQueryData:t.updataQueryData,delQueryTrem:t.delQueryTrem}})],1),a("div",{staticStyle:{float:"right","margin-top":"15px"}},[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small",icon:"ios-search"},on:{click:t.search}},[t._v("搜索")]),a("Button",{attrs:{type:"primary",size:"small",icon:"md-close"},on:{click:function(e){t.show=!1}}},[t._v("取消")])],1)])])}),s=[],o=a("5d73"),l=a.n(o),c=a("49ae"),d=a("72ba"),u={name:"queryBox",data:function(){return{show:!1,num:"",type:"",queryData:[]}},components:{TextTerm:c["a"],SelectTerm:d["a"]},mounted:function(){document.addEventListener("click",this.queryHide)},beforeDestroy:function(){document.removeEventListener("click",this.queryHide)},methods:{updataQueryData:function(t){""!==t.text?(this.queryData=this.queryData.filter(function(e){return e.name!==t.name}),this.queryData.push(t)):this.queryData=this.queryData.filter(function(e){return e.name!==t.name})},delQueryTrem:function(t){this.queryData=this.queryData.filter(function(e){return e.key!==t})},search:function(){var t={},e=!0,a=!1,n=void 0;try{for(var i,r=l()(this.queryData);!(e=(i=r.next()).done);e=!0){var s=i.value;t[s.key]=s.value}}catch(o){a=!0,n=o}finally{try{e||null==r.return||r.return()}finally{if(a)throw n}}this.$emit("searchSrldId",t),this.show=!1},queryHide:function(t){this.$refs.queryBox.contains(t.target)||this.$refs.queryDown.contains(t.target)||(this.show=!1)}}},p=u,m=(a("9a8e"),a("2877")),h=Object(m["a"])(p,r,s,!1,null,"37591b78",null),f=h.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-box"},[a("div",{ref:"viewDiv",attrs:{id:"viewDiv"}}),a("Button",{staticClass:"sign-btn",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("signOut",!1)}}},[t._v("返回")])],1)},g=[],v=(a("96cf"),a("3b8d")),b=a("9ed9"),w=a("149e"),x=a("f831"),D=a("42e8"),k=a.n(D),_=a("39f3"),A=a.n(_),q={name:"checkInfoMap",data:function(){return{map:{},view:{}}},computed:{},props:{},components:{},watch:{},mounted:function(){this.createMap()},methods:{createMap:function(){var t=Object(v["a"])(regeneratorRuntime.mark(function t(){var e,a,n,i,r,s,o,l,c,d,u,p;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b["a"].MapView;case 2:return e=t.sent,t.next=5,b["a"].Map;case 5:return a=t.sent,t.next=8,b["a"].Basemap;case 8:return n=t.sent,t.next=11,b["a"].BasemapToggle;case 11:return i=t.sent,t.next=14,Object(x["g"])().then(function(t){return t});case 14:return r=t.sent,t.next=17,Object(x["f"])().then(function(t){return t});case 17:return s=t.sent,t.next=20,Object(x["e"])().then(function(t){return t});case 20:return o=t.sent,t.next=23,Object(x["h"])().then(function(t){return t});case 23:return l=t.sent,t.next=26,Object(x["c"])().then(function(t){return t});case 26:c=t.sent,d=new n({baseLayers:[s,c,o],title:"矢量地图",id:"myBasemap",thumbnailUrl:k.a}),u=new n({baseLayers:[r,c,l],title:"影像地图",id:"myBasemap1",thumbnailUrl:A.a}),this.map=new a({basemap:u}),this.view=new e({map:this.map,container:"viewDiv",center:w["a"].centerPoint,zoom:7}),p=new i({view:this.view,nextBasemap:d}),this.view.ui.add(p,"top-right");case 33:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),initCom:function(t){this.map.remove(this.insercLayer),this.view.graphics.removeAll()}}},z=q,C=(a("b1f7"),Object(m["a"])(z,y,g,!1,null,"32b5533e",null)),$=C.exports,B=a("65d4"),S={name:"extracTable",data:function(){var t=this;return{tableHeight:window.innerHeight-312,columns1:[{type:"selection",fixed:"left",width:60,align:"center"},{title:"序号",fixed:"left",key:"index",width:100,align:"center",render:function(e,a){return e("span",a.index+(t.pageNum-1)*t.pageSize+1)}},{title:"问题点编号",fixed:"left",align:"center",minWidth:200,key:"srld_code"},{title:"所属任务",align:"center",minWidth:200,key:"srld_code"},{title:"经度",align:"center",minWidth:100,key:"srld_code"},{title:"纬度",align:"center",minWidth:100,key:"srld_code"},{title:"问题点类型",align:"center",minWidth:150,key:"srld_code"},{title:"问题点备注",align:"center",minWidth:200,key:"srld_code"},{title:"添加人",align:"center",minWidth:100,key:"srld_code"},{title:"操作",key:"address",width:250,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small",icon:"md-eye"},style:{marginRight:"5px"},on:{click:function(){t.addActive=!0,t.$refs.ledgerManageMap.initCom()}}},"地图查看"),e("Button",{props:{type:"warning",size:"small",icon:"md-create"},style:{marginRight:"5px"},on:{click:function(){t.openAdd("modify"),t.AddData=a.row}}},"修改"),e("Button",{props:{type:"error",size:"small",icon:"md-trash"},on:{click:function(){t.infoId=a.row.id,t.$Modal.confirm({title:"确认",content:"请问您确定要删除该条数据吗？",onOk:function(){t.infoDel()},onCancel:function(){}})}}},"删除")])}}],data1:[],obj:{},total:0,pageNum:1,pageSize:Math.floor((window.innerHeight-312)/48),loading:!1,addActive:!1,modal:!1,AddData:{name:"",type:"",lon:"",lat:"",typeP:"",desc:""},ruleValidate:{name:[{required:!0,message:"名称必须填写",trigger:"blur"}],type:[{required:!0,message:"所属任务必须选择",trigger:"change"}]},typeList:[{value:"1",label:"type1"},{value:"2",label:"type2"}],dotList1:[{value:"1",label:"type1"},{value:"2",label:"type2"}]}},components:{QueryBox:f,ledgerManageMap:$},created:function(){this.getTableList()},mounted:function(){var t=this;window.addEventListener("resize",function(){t.tableHeight=window.innerHeight-312,t.pageSize=Math.floor((window.innerHeight-312)/48),t.getTableList()},!1)},watch:{obj:function(){this.getTableList()}},methods:{searchSrldId:function(t){this.obj=t},getTableList:function(){var t=this;this.loading=!0,Object(B["c"])({data:{pageSize:this.pageSize,pageNum:this.pageNum,param:this.obj.param,redlineName:this.obj.srldName,tableName:this.obj.param}}).then(function(e){"0000"===e.data.code&&(t.data1=e.data.data.rows,t.total=e.data.data.total,t.loading=!1)}).catch(function(){t.$Notice.error({title:"服务器错误"})})},pageChange:function(t){this.pageNum=t,this.getTableList()},infoDel:function(t){var e=this;Object(B["infoDel"])({data:{id:t}}).then(function(t){"0000"===t.data.code?(e.getTableList(),e.$Notice.success({title:"删除成功"})):e.$Notice.error({title:"删除失败"})}).catch(function(){e.$Notice.error({title:"服务器错误"})})},signOut:function(t){this.addActive=t},openAdd:function(t){this.modal=!0,this.$refs.addForm.resetFields()},addSubmit:function(){var t=this;this.$refs.addForm.validate(function(e){e&&Object(B["g"])({data:{name:t.AddData.name}}).then(function(e){"0000"===e.data.code?(t.$Notice.success({title:"新建人类活动监管台账信息成功"}),t.modal=!1,t.$parent.getSurveyTableList()):t.$Notice.error({title:"新建人类活动监管台账信息失败"})})})}}},T=S,M=(a("a43b"),Object(m["a"])(T,n,i,!1,null,"a98747f2",null));e["default"]=M.exports},cc70:function(t,e,a){}}]);
//# sourceMappingURL=chunk-5c8c4506.71dd3545.js.map