(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e1c6dfd"],{"192d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"pointE"}},[n("div",{attrs:{id:"viewDiv"}}),n("ButtonGroup",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{id:"toolbar",vertical:""}},[n("Tooltip",{attrs:{content:"距离测量",placement:"right"}},[n("Button",{staticStyle:{padding:"5px 5px 0px"},attrs:{type:"distance"==t.type?"primary":"default"},on:{click:function(e){return t.clickToolbar("distance")}}},[n("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("8143"),alt:""}})])],1),n("Tooltip",{attrs:{content:"测量面积",placement:"right"}},[n("Button",{staticStyle:{padding:"5px 5px 0px"},attrs:{type:"area"==t.type?"primary":"default"},on:{click:function(e){return t.clickToolbar("area")}}},[n("img",{staticStyle:{width:"20px",height:"20px"},attrs:{src:a("1a3c"),alt:""}})])],1)],1),n("div",{ref:"toolsbox",staticStyle:{padding:"10px",background:"#fff",height:"52px"},attrs:{id:"toolsbox"}},[n("Form",{ref:"edit",attrs:{"label-width":40,inline:""}},[n("FormItem",{attrs:{label:"容差"}},[n("InputNumber",{attrs:{max:1e4,min:1},model:{value:t.rc,callback:function(e){t.rc=e},expression:"rc"}})],1),n("Button",{staticStyle:{width:"20px","margin-left":"-15px","margin-right":"10px"},attrs:{type:"text"}},[t._v("米")]),n("Button",{staticStyle:{"margin-right":"8px"},attrs:{type:"primary"},on:{click:t.gdShp}},[t._v("生成")]),n("Button",{staticStyle:{"margin-right":"8px"},attrs:{type:"primary"},on:{click:t.saveShp}},[t._v("保存")]),n("Button",{attrs:{type:"primary"},on:{click:t.gdFile}},[t._v("下载")])],1)],1)],1)},r=[],i=(a("e6d1"),a("4b5e"),a("6c28"),a("4634"),a("cc1d"),a("63ff"),a("f8f9")),s=a("9ed9"),c=a("f831"),o=a("b775"),u=function(t){return Object(o["a"])({url:"/ygjc/image/gdShp",method:"post",data:t})},d=function(t){return Object(o["a"])({url:"/ygjc/image/gdFile",method:"post",data:t})},l=function(t){return Object(o["a"])({url:"/ygjc/image/getGdFile",method:"post",data:t})},p=function(t){return Object(o["a"])({url:"/ygjc/image/addGdShp",method:"post",data:t})},h=a("42e8"),f=a.n(h),m=a("39f3"),g=a.n(m),v=a("0591"),y=a.n(v),w={type:"picture-marker",url:y.a,height:16,width:16,outline:{color:[255,255,255],width:1}},b={name:"OnePiece",data:function(){return{map:null,view:null,rc:700,type:""}},methods:{createMap:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,i,o,u,d,l,p,h,m,v,y,w,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].MapView;case 2:return e=t.sent,t.next=5,s["a"].Map;case 5:return a=t.sent,t.next=8,s["a"].Basemap;case 8:return n=t.sent,t.next=11,s["a"].BasemapToggle;case 11:return r=t.sent,t.next=14,s["a"].Fullscreen;case 14:return i=t.sent,t.next=17,s["a"].GraphicsLayer;case 17:return o=t.sent,t.next=20,s["a"].Sketch;case 20:return u=t.sent,t.next=23,Object(c["i"])().then((function(t){return t}));case 23:return d=t.sent,t.next=26,Object(c["h"])().then((function(t){return t}));case 26:return l=t.sent,t.next=29,Object(c["g"])().then((function(t){return t}));case 29:return p=t.sent,t.next=32,Object(c["j"])().then((function(t){return t}));case 32:return h=t.sent,t.next=35,Object(c["e"])("hx").then((function(t){return t}));case 35:this.layerRedLine=t.sent,m=new n({baseLayers:[l,p],title:"矢量地图",id:"myBasemap",thumbnailUrl:f.a}),v=new n({baseLayers:[d,h],title:"影像地图",id:"myBasemap1",thumbnailUrl:g.a}),this.map=new a({basemap:m}),this.view=new e({map:this.map,container:"viewDiv",center:{longitude:117.528239,latitude:30.884646,spatialReference:{wkid:4490}},zoom:5}),this.map.add(this.layerRedLine),this.view.ui.add(document.getElementById("toolbar"),"top-left"),this.fullscreen=new i({view:this.view}),this.view.ui.add(this.fullscreen,"top-left"),y=new r({view:this.view,nextBasemap:v}),this.view.ui.add(y,"top-right"),this.view.ui.add(this.$refs.toolsbox,"bottom-right"),w=new o({id:"pe",title:" ",elevationInfo:"on-the-ground"}),this.map.add(w),b=new u({layer:w,view:this.view}),this.view.ui.add(b,"bottom-right");case 51:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),gdShp:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$Spin.show(),t.next=3,s["a"].Graphic;case 3:e=t.sent,this.map.findLayerById("pe").removeAll(),u({data:{rc:this.rc.toString()}}).then((function(t){if("0000"===t.data.code){var n=[],r=!0,i=!1,s=void 0;try{for(var c,o=t.data.data[Symbol.iterator]();!(r=(c=o.next()).done);r=!0){var u=c.value,d=JSON.parse(u.attributes),l=JSON.parse(u.geometry),p={type:"point",longitude:l.rings.split(",")[0],latitude:l.rings.split(",")[1],spatialReference:{wkid:4490}},h=new e({geometry:p,attributes:d,symbol:w});n.push(h)}}catch(f){i=!0,s=f}finally{try{r||null==o.return||o.return()}finally{if(i)throw s}}a.map.findLayerById("pe").addMany(n),a.$Spin.hide()}else a.$Notice.error({title:t.data.msg})}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),saveShp:function(){var t=this;this.$Spin.show();var e=this.map.findLayerById("pe").graphics.items;console.log(e);var a=[],n=!0,r=!1,i=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var o=s.value,u={rings:[[[o.geometry.x,o.geometry.y]]].join(","),type:"point"},d={attributes:JSON.stringify(o.attributes),geometry:JSON.stringify(u)};a.push(d)}}catch(l){r=!0,i=l}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}p({data:{data:a}}).then((function(e){"0000"===e.data.code?(t.$Notice.success({title:"保存成功！"}),t.$Spin.hide()):(t.$Notice.error({title:e.data.msg}),t.$Spin.hide())}))},gdFile:function(){var t=this;d({data:{}}).then((function(e){if("0000"===e.data.code){var a=document.createElement("a");a.style.display="none";var n=e.data.data;a.href=e.data.data,a.setAttribute("download",n.split("/")[n.split("/").length-1]),document.body.appendChild(a),a.click()}else t.$Notice.error({title:e.data.msg})}))},getGdFile:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].Graphic;case 2:e=t.sent,this.$Spin.show(),l({data:{}}).then((function(t){if("0000"===t.data.code)if(t.data.data){var n=[];console.log(t.data.data);var r=!0,i=!1,s=void 0;try{for(var c,o=t.data.data[Symbol.iterator]();!(r=(c=o.next()).done);r=!0){var u=c.value;console.log(u);var d=JSON.parse(u),l=JSON.parse(d.attributes),p=JSON.parse(d.geometry),h={type:"point",longitude:p.rings.split(",")[0],latitude:p.rings.split(",")[1],spatialReference:{wkid:4490}},f=new e({geometry:h,attributes:l,symbol:w});n.push(f)}}catch(m){i=!0,s=m}finally{try{r||null==o.return||o.return()}finally{if(i)throw s}}a.map.findLayerById("pe").addMany(n),a.$Spin.hide()}else a.gdShp();else a.$Notice.error({title:t.data.msg})}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),clickToolbar:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.type===e&&(e=null),this.type=e,this.activeWidget&&(this.view.ui.remove(this.activeWidget),this.activeWidget.destroy(),this.activeWidget=null),t.t0=e,t.next="distance"===t.t0?6:"area"===t.t0?13:20;break;case 6:return t.next=8,s["a"].DistanceMeasurement2D;case 8:return a=t.sent,this.activeWidget=new a({view:this.view}),this.activeWidget.viewModel.newMeasurement(),this.view.ui.add(this.activeWidget,"top-right"),t.abrupt("break",21);case 13:return t.next=15,s["a"].AreaMeasurement2D;case 15:return n=t.sent,this.activeWidget=new n({view:this.view}),this.activeWidget.viewModel.newMeasurement(),this.view.ui.add(this.activeWidget,"top-right"),t.abrupt("break",21);case 20:return t.abrupt("break",21);case 21:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.createMap();case 2:return t.next=4,this.getGdFile();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},x=b,S=(a("f869"),a("60c1"),a("7b6a"),a("6691")),k=Object(S["a"])(x,n,r,!1,null,"7a8dc0a6",null);e["default"]=k.exports},"5a8d":function(t,e,a){},"60c1":function(t,e,a){"use strict";var n=a("5a8d"),r=a.n(n);r.a},"7b6a":function(t,e,a){"use strict";var n=a("97e7"),r=a.n(n);r.a},9433:function(t,e,a){},"97e7":function(t,e,a){},f869:function(t,e,a){"use strict";var n=a("9433"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-6e1c6dfd.c2345111.js.map