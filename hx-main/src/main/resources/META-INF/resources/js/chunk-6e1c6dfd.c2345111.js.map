{"version":3,"sources":["webpack:///./src/views/pointExtract/pointExtract.vue?9dc7","webpack:///./src/api/pointExtract.js","webpack:///src/views/pointExtract/pointExtract.vue","webpack:///./src/views/pointExtract/pointExtract.vue?fcbe","webpack:///./src/views/pointExtract/pointExtract.vue","webpack:///./src/views/pointExtract/pointExtract.vue?40cd","webpack:///./src/views/pointExtract/pointExtract.vue?2e8d","webpack:///./src/views/pointExtract/pointExtract.vue?84cf"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","type","on","$event","clickToolbar","ref","model","value","callback","$$v","rc","expression","_v","gdShp","saveShp","gdFile","staticRenderFns","data","request","url","method","getGdFile","height","width","outline","color","name","map","view","methods","$Spin","show","console","log","arr","dataArr","res","code","link","style","display","href","setAttribute","split","length","document","body","appendChild","click","component"],"mappings":"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","file":"js/chunk-6e1c6dfd.c2345111.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"pointE\"}},[_c('div',{attrs:{\"id\":\"viewDiv\"}}),_c('ButtonGroup',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\"},attrs:{\"id\":\"toolbar\",\"vertical\":\"\"}},[_c('Tooltip',{attrs:{\"content\":\"距离测量\",\"placement\":\"right\"}},[_c('Button',{staticStyle:{\"padding\":\"5px 5px 0px\"},attrs:{\"type\":_vm.type=='distance'?'primary':'default'},on:{\"click\":function($event){return _vm.clickToolbar('distance')}}},[_c('img',{staticStyle:{\"width\":\"20px\",\"height\":\"20px\"},attrs:{\"src\":require(\"@/assets/map_images/length.png\"),\"alt\":\"\"}})])],1),_c('Tooltip',{attrs:{\"content\":\"测量面积\",\"placement\":\"right\"}},[_c('Button',{staticStyle:{\"padding\":\"5px 5px 0px\"},attrs:{\"type\":_vm.type=='area'?'primary':'default'},on:{\"click\":function($event){return _vm.clickToolbar('area')}}},[_c('img',{staticStyle:{\"width\":\"20px\",\"height\":\"20px\"},attrs:{\"src\":require(\"@/assets/map_images/area.png\"),\"alt\":\"\"}})])],1)],1),_c('div',{ref:\"toolsbox\",staticStyle:{\"padding\":\"10px\",\"background\":\"#fff\",\"height\":\"52px\"},attrs:{\"id\":\"toolsbox\"}},[_c('Form',{ref:\"edit\",attrs:{\"label-width\":40,\"inline\":\"\"}},[_c('FormItem',{attrs:{\"label\":\"容差\"}},[_c('InputNumber',{attrs:{\"max\":10000,\"min\":1},model:{value:(_vm.rc),callback:function ($$v) {_vm.rc=$$v},expression:\"rc\"}})],1),_c('Button',{staticStyle:{\"width\":\"20px\",\"margin-left\":\"-15px\",\"margin-right\":\"10px\"},attrs:{\"type\":\"text\"}},[_vm._v(\"米\")]),_c('Button',{staticStyle:{\"margin-right\":\"8px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.gdShp}},[_vm._v(\"生成\")]),_c('Button',{staticStyle:{\"margin-right\":\"8px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveShp}},[_vm._v(\"保存\")]),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.gdFile}},[_vm._v(\"下载\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\n/* 获取最新红线拐点 */\r\nexport const gdShp = data => request({ url: '/ygjc/image/gdShp', method: 'post', data })\r\n/* 下载红线拐点 */\r\nexport const gdFile = data => request({ url: '/ygjc/image/gdFile', method: 'post', data })\r\n/* 获取最新拐点 */\r\nexport const getGdFile = data => request({ url: '/ygjc/image/getGdFile', method: 'post', data })\r\n/* 保存拐点 */\r\nexport const saveShp = data => request({ url: '/ygjc/image/addGdShp', method: 'post', data })\r\n","<template>\r\n  <div id=\"pointE\">\r\n    <div id=\"viewDiv\"></div>\r\n    <!-- 地图的工具框 -->\r\n    <ButtonGroup id=\"toolbar\" vertical style=\"display: flex;flex-direction: column\">\r\n      <Tooltip content=\"距离测量\" placement=\"right\">\r\n        <Button :type=\"type=='distance'?'primary':'default'\" @click=\"clickToolbar('distance')\" style=\"padding:5px 5px 0px\">\r\n          <img src=\"@/assets/map_images/length.png\" alt=\"\" style=\"width: 20px;height: 20px;\">\r\n        </Button>\r\n      </Tooltip>\r\n      <Tooltip content=\"测量面积\" placement=\"right\">\r\n        <Button :type=\"type=='area'?'primary':'default'\" @click=\"clickToolbar('area')\" style=\"padding:5px 5px 0px\">\r\n          <img src=\"@/assets/map_images/area.png\" alt=\"\" style=\"width: 20px;height: 20px;\">\r\n        </Button>\r\n      </Tooltip>\r\n    </ButtonGroup>\r\n    <div id=\"toolsbox\" ref=\"toolsbox\" style=\"padding: 10px;background: #fff;height:52px\">\r\n      <Form ref=\"edit\" :label-width=\"40\" inline>\r\n        <FormItem label=\"容差\">\r\n          <InputNumber :max=\"10000\" :min=\"1\" v-model=\"rc\"></InputNumber>\r\n        </FormItem>\r\n        <Button style=\"width: 20px;margin-left: -15px;margin-right: 10px\" type=\"text\">米</Button>\r\n        <Button @click=\"gdShp\" type=\"primary\" style=\"margin-right: 8px\">生成</Button>\r\n        <Button @click=\"saveShp\" type=\"primary\" style=\"margin-right: 8px\">保存</Button>\r\n        <Button @click=\"gdFile\" type=\"primary\">下载</Button>\r\n      </Form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport arcgisPackage from '../../utils/arcgisTools'\r\nimport { tdtlayer, tdtyNoteslayer, tdtclayer, tdtcNoteslayer, redLineDp, shengjie, shijie, xianjie } from '@/utils/layers'\r\nimport { gdShp, saveShp, gdFile, getGdFile } from '../../api/pointExtract'\r\nimport Basemapthumbnail from '../../assets/map_images/Basemapthumbnail.png'\r\nimport Basemapthumbnail1 from '../../assets/map_images/Basemapthumbnail1.png'\r\nimport collSign3 from '../../assets/boundaryMarker_images/coll_bm3.png'\r\n\r\nconst markerSymbol = {\r\n  type: 'picture-marker', // autocasts as new SimpleMarkerSymbol()\r\n  url: collSign3,\r\n  height: 16,\r\n  width: 16,\r\n  outline: { // autocasts as new SimpleLineSymbol()\r\n    color: [255, 255, 255],\r\n    width: 1\r\n  }\r\n}\r\nexport default {\r\n  name: 'OnePiece',\r\n  data () {\r\n    return {\r\n      map: null, // 地图实例\r\n      view: null, // 地图视图实例\r\n      rc: 700,\r\n      type: ''\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * @Description: 初始化“一张图”数据中心的地图\r\n     * @author 张淼\r\n     * @date 2019/4/16\r\n     */\r\n    async createMap () {\r\n      // 导入需要的arcgis模块\r\n      let MapView = await arcgisPackage.MapView\r\n      let Map = await arcgisPackage.Map\r\n      let Basemap = await arcgisPackage.Basemap\r\n      let BasemapToggle = await arcgisPackage.BasemapToggle\r\n      let Fullscreen = await arcgisPackage.Fullscreen\r\n      let GraphicsLayer = await arcgisPackage.GraphicsLayer\r\n      let Sketch = await arcgisPackage.Sketch\r\n\r\n      // 天地图影像地图\r\n      let tdtylayer = await tdtlayer().then(res => {\r\n        return res\r\n      })\r\n      // 天地图矢量地图\r\n      let tdtylayer1 = await tdtclayer().then(res => {\r\n        return res\r\n      })\r\n      // 天地图的矢量标注图层\r\n      let tdtylayer2 = await tdtcNoteslayer().then(res => {\r\n        return res\r\n      })\r\n      // 天地图影像标注图层\r\n      let tdtylayer3 = await tdtyNoteslayer().then(res => {\r\n        return res\r\n      })\r\n      // 红线斑块图层\r\n      this.layerRedLine = await redLineDp('hx').then(res => {\r\n        return res\r\n      })\r\n\r\n      let customBasemap = new Basemap({\r\n        baseLayers: [tdtylayer1, tdtylayer2],\r\n        title: '矢量地图',\r\n        id: 'myBasemap',\r\n        thumbnailUrl: Basemapthumbnail\r\n      })\r\n      let customBasemap1 = new Basemap({\r\n        baseLayers: [tdtylayer, tdtylayer3],\r\n        title: '影像地图',\r\n        id: 'myBasemap1',\r\n        thumbnailUrl: Basemapthumbnail1\r\n      })\r\n\r\n      this.map = new Map({\r\n        basemap: customBasemap\r\n      })\r\n      this.view = new MapView({\r\n        map: this.map,\r\n        container: 'viewDiv',\r\n        center: {\r\n          longitude: 117.528239,\r\n          latitude: 30.884646,\r\n          spatialReference: {\r\n            wkid: 4490\r\n          }\r\n        },\r\n        // center: config.centerPoint,\r\n        zoom: 5\r\n      })\r\n      this.map.add(this.layerRedLine)\r\n      // 添加工具框\r\n      this.view.ui.add(document.getElementById('toolbar'), 'top-left')\r\n      // 添加全屏\r\n      this.fullscreen = new Fullscreen({\r\n        view: this.view\r\n      })\r\n      this.view.ui.add(this.fullscreen, 'top-left')\r\n      // 增加地图切换插件\r\n      let basemapToggle = new BasemapToggle({\r\n        view: this.view,\r\n        nextBasemap: customBasemap1\r\n      })\r\n      this.view.ui.add(basemapToggle, 'top-right')\r\n      this.view.ui.add(this.$refs.toolsbox, 'bottom-right')\r\n      // 新建点图层\r\n      let graphicsLayer = new GraphicsLayer({\r\n        id: 'pe',\r\n        title: ' ',\r\n        elevationInfo: 'on-the-ground'\r\n      })\r\n      this.map.add(graphicsLayer)\r\n      let sketch = new Sketch({\r\n        layer: graphicsLayer,\r\n        view: this.view\r\n      })\r\n      this.view.ui.add(sketch, 'bottom-right')\r\n    },\r\n    /* 生成 */\r\n    async gdShp () {\r\n      this.$Spin.show()\r\n      let Graphic = await arcgisPackage.Graphic\r\n      this.map.findLayerById('pe').removeAll()\r\n      gdShp({\r\n        data: {\r\n          rc: this.rc.toString()\r\n        }\r\n      }).then((res) => {\r\n        if (res.data.code === '0000') {\r\n          let arr = []\r\n          for (let item of res.data.data) {\r\n            let attr = JSON.parse(item.attributes)\r\n            let geom = JSON.parse(item.geometry)\r\n            let point = {\r\n              type: 'point', // autocasts as new Point()\r\n              longitude: geom.rings.split(',')[0],\r\n              latitude: geom.rings.split(',')[1],\r\n              spatialReference: {\r\n                wkid: 4490\r\n              }\r\n            }\r\n            let pointGraphic = new Graphic({\r\n              geometry: point,\r\n              attributes: attr,\r\n              symbol: markerSymbol\r\n            })\r\n            arr.push(pointGraphic)\r\n          }\r\n          this.map.findLayerById('pe').addMany(arr)\r\n          this.$Spin.hide()\r\n        } else {\r\n          this.$Notice.error({ title: res.data.msg })\r\n        }\r\n      })\r\n    },\r\n    /* 保存 */\r\n    saveShp () {\r\n      this.$Spin.show()\r\n      let arr = this.map.findLayerById('pe').graphics.items\r\n      console.log(arr)\r\n      let dataArr = []\r\n      for (let item of arr) {\r\n        let geometry = {\r\n          rings: [[[item.geometry.x, item.geometry.y]]].join(','),\r\n          // x: item.geometry.x,\r\n          // y: item.geometry.y,\r\n          type: 'point'\r\n        }\r\n        let obj = {\r\n          attributes: JSON.stringify(item.attributes),\r\n          geometry: JSON.stringify(geometry)\r\n        }\r\n        dataArr.push(obj)\r\n      }\r\n      saveShp({\r\n        data: {\r\n          data: dataArr\r\n        }\r\n      }).then((res) => {\r\n        if (res.data.code === '0000') {\r\n          this.$Notice.success({ title: '保存成功！' })\r\n          this.$Spin.hide()\r\n        } else {\r\n          this.$Notice.error({ title: res.data.msg })\r\n          this.$Spin.hide()\r\n        }\r\n      })\r\n    },\r\n    /* 下载 */\r\n    gdFile () {\r\n      gdFile({\r\n        data: {}\r\n      }).then((res) => {\r\n        if (res.data.code === '0000') {\r\n          let link = document.createElement('a')\r\n          link.style.display = 'none'\r\n          let url = res.data.data\r\n          link.href = res.data.data\r\n          link.setAttribute('download', url.split('/')[url.split('/').length - 1])\r\n          document.body.appendChild(link)\r\n          link.click()\r\n        } else {\r\n          this.$Notice.error({ title: res.data.msg })\r\n        }\r\n      })\r\n    },\r\n    /* 获取最新点 */\r\n    async getGdFile () {\r\n      let Graphic = await arcgisPackage.Graphic\r\n      this.$Spin.show()\r\n      getGdFile({\r\n        data: {}\r\n      }).then((res) => {\r\n        if (res.data.code === '0000') {\r\n          if (res.data.data) {\r\n            let arr = []\r\n            console.log(res.data.data)\r\n            for (let item of res.data.data) {\r\n              console.log(item)\r\n              let obj = JSON.parse(item)\r\n              let attr = JSON.parse(obj.attributes)\r\n              let geom = JSON.parse(obj.geometry)\r\n              let point = {\r\n                type: 'point', // autocasts as new Point()\r\n                longitude: geom.rings.split(',')[0],\r\n                latitude: geom.rings.split(',')[1],\r\n                spatialReference: {\r\n                  wkid: 4490\r\n                }\r\n              }\r\n              let pointGraphic = new Graphic({\r\n                geometry: point,\r\n                attributes: attr,\r\n                symbol: markerSymbol\r\n              })\r\n              arr.push(pointGraphic)\r\n            }\r\n            this.map.findLayerById('pe').addMany(arr)\r\n            this.$Spin.hide()\r\n          } else {\r\n            this.gdShp()\r\n          }\r\n        } else {\r\n          this.$Notice.error({ title: res.data.msg })\r\n        }\r\n      })\r\n    },\r\n    /**\r\n     * @Description:测量工具点击事件\r\n     * @author 张淼\r\n     * @date 2019/4/11\r\n     */\r\n    async clickToolbar (type) {\r\n      if (this.type === type) {\r\n        type = null\r\n      }\r\n      this.type = type\r\n      if (this.activeWidget) {\r\n        this.view.ui.remove(this.activeWidget)\r\n        this.activeWidget.destroy()\r\n        this.activeWidget = null\r\n      }\r\n      switch (type) {\r\n        case 'distance':\r\n          let DistanceMeasurement2D = await arcgisPackage.DistanceMeasurement2D\r\n          this.activeWidget = new DistanceMeasurement2D({\r\n            view: this.view\r\n          })\r\n          this.activeWidget.viewModel.newMeasurement()\r\n          this.view.ui.add(this.activeWidget, 'top-right')\r\n          break\r\n        case 'area':\r\n          let AreaMeasurement2D = await arcgisPackage.AreaMeasurement2D\r\n          this.activeWidget = new AreaMeasurement2D({\r\n            view: this.view\r\n          })\r\n          this.activeWidget.viewModel.newMeasurement()\r\n          this.view.ui.add(this.activeWidget, 'top-right')\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    }\r\n  },\r\n  async mounted () {\r\n    // 初始化地图\r\n    await this.createMap()\r\n    await this.getGdFile()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  #pointE{\r\n    height: 100%;\r\n    display: flex;\r\n    position: relative;\r\n  }\r\n  #layersControl{\r\n    .layersControl_box{\r\n      padding:3px;\r\n      background: #fff;\r\n      border: 1px solid #d1d1d1;\r\n      .fraggableBox{\r\n        padding: 0;\r\n        .fraggableLi{\r\n          min-width: 100px;\r\n          padding: 5px 8px;\r\n          border-top: 1px solid #d1d1d1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  #viewDiv{\r\n    height: 100%;\r\n    flex-grow: 2;\r\n  }\r\n  #maptab{\r\n    width: 300px;\r\n    .firstmenu{\r\n      >li{\r\n        margin-bottom: 6px;\r\n        text-align: left;\r\n        >ul{\r\n          >li{\r\n            padding-left: 20px;\r\n          }\r\n        }\r\n        >p{\r\n          line-height: 40px;\r\n          text-align: left;\r\n          font-size: 16px;\r\n          background-color: rgb(42,177,245);\r\n          color: white;\r\n          padding-left: 10px;\r\n          border-radius: 4px;\r\n          cursor: pointer;\r\n          i{\r\n            font-size: 16px;\r\n            line-height: 40px;\r\n            margin-right: 10px;\r\n          }\r\n        }\r\n        .secondmenu{\r\n          label{\r\n            line-height: 30px;\r\n            font-size: 14px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  #basemapToggle{\r\n    border: 5px #000 solid;\r\n  }\r\n</style>\r\n<style scoped>\r\n  #maptab >>> .ivu-tabs-content{\r\n    height: calc(100% - 40px);\r\n    margin-top: -16px;\r\n  }\r\n  #maptab >>> .ivu-tabs-content > .ivu-tabs-tabpane{\r\n    padding: 16px;\r\n    border: 1px solid #dcdee2;\r\n    border-radius: 0 0 4px 4px;\r\n    border-top: none;\r\n  }\r\n  #maptab >>> .ivu-tabs-nav{\r\n    display: flex;\r\n    float: none;\r\n  }\r\n  #maptab >>> .ivu-tabs-nav .ivu-tabs-tab{\r\n    flex-grow: 2;\r\n    margin-right: 0;\r\n  }\r\n  .sliderBox >>> .ivu-slider-wrap{\r\n    margin: 0 0 3px\r\n  }\r\n</style>\r\n<style lang=\"scss\">\r\n  h3.esri-widget__heading{\r\n    display: none;\r\n  }\r\n  .esri-legend__layer-caption{\r\n    display: none;\r\n  }\r\n  .esri-ui-corner .esri-component.esri-widget--panel{\r\n    width: 200px;\r\n  }\r\n  #pointE{\r\n    .esri-icon-pan,.esri-sketch__tool-section:nth-child(2),.esri-sketch__tool-section:nth-child(3),.esri-icon-map-pin,.esri-icon-polyline,.esri-icon-polygon,.esri-icon-checkbox-unchecked,.esri-icon-radio-unchecked,.esri-icon-undo,.esri-icon-redo{\r\n      display:none\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./pointExtract.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./pointExtract.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./pointExtract.vue?vue&type=template&id=7a8dc0a6&scoped=true&\"\nimport script from \"./pointExtract.vue?vue&type=script&lang=js&\"\nexport * from \"./pointExtract.vue?vue&type=script&lang=js&\"\nimport style0 from \"./pointExtract.vue?vue&type=style&index=0&id=7a8dc0a6&lang=scss&scoped=true&\"\nimport style1 from \"./pointExtract.vue?vue&type=style&index=1&id=7a8dc0a6&scoped=true&lang=css&\"\nimport style2 from \"./pointExtract.vue?vue&type=style&index=2&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a8dc0a6\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./pointExtract.vue?vue&type=style&index=1&id=7a8dc0a6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./pointExtract.vue?vue&type=style&index=1&id=7a8dc0a6&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./pointExtract.vue?vue&type=style&index=2&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./pointExtract.vue?vue&type=style&index=2&lang=scss&\"","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./pointExtract.vue?vue&type=style&index=0&id=7a8dc0a6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./pointExtract.vue?vue&type=style&index=0&id=7a8dc0a6&lang=scss&scoped=true&\""],"sourceRoot":""}