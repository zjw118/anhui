(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70f4c75e"],{3493:function(t,e,a){"use strict";var r=a("3d3d"),i=a.n(r);i.a},"3d3d":function(t,e,a){},5161:function(t,e,a){},"8b36":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userManage"}},[a("QueryBox",{on:{searchSrldId:t.searchSrldId}},[a("Button",{staticClass:"btn-add",staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"small",icon:"md-add"},on:{click:function(e){return e.stopPropagation(),t.openAdd(e)}}},[t._v("新建")])],1),a("div",{staticClass:"tab_box"},[a("Table",{ref:"table",attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns1,data:t.data1,size:"small","highlight-row":"","max-height":t.tableHeight}})],1),a("div",{staticClass:"page_box",attrs:{id:"pageBox"}},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,"show-elevator":"",size:"small","show-total":""},on:{"on-change":t.pageChange}})],1),a("UserAdd",{ref:"userAdd",attrs:{codeData:t.codeData,departmentList:t.departmentList},on:{getTableData:t.getTableData}}),a("UserEdit",{ref:"userEdit",attrs:{data:t.editDefaultData,codeData:t.codeData,departmentList:t.departmentList},on:{getTableData:t.getTableData}}),a("Modal",{attrs:{"mask-closable":!0,title:"新建工具"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{attrs:{model:t.formItem,"label-width":80}},[a("FormItem",{attrs:{label:"工具名称"}},[a("Input",{attrs:{placeholder:"请输入工具名称"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),a("FormItem",{attrs:{label:"工具说明"}},[a("Input",{attrs:{placeholder:"请输入工具说明",type:"textarea"},model:{value:t.formItem.remark,callback:function(e){t.$set(t.formItem,"remark",e)},expression:"formItem.remark"}})],1),a("FormItem",{attrs:{label:"工具文件"}},[a("input",{ref:"file",attrs:{type:"file",accept:".xml"}})])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading},on:{click:t.addSubmit}},[t._v("确定")])],1)],1),a("Modal",{attrs:{"mask-closable":!0,title:"编辑工具"},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[a("Form",{attrs:{model:t.formItem1,"label-width":80}},[a("FormItem",{attrs:{label:"工具名称"}},[a("Input",{attrs:{placeholder:"请输入工具名称"},model:{value:t.formItem1.name,callback:function(e){t.$set(t.formItem1,"name",e)},expression:"formItem1.name"}})],1),a("FormItem",{attrs:{label:"工具说明"}},[a("Input",{attrs:{placeholder:"请输入工具说明",type:"textarea"},model:{value:t.formItem1.remark,callback:function(e){t.$set(t.formItem1,"remark",e)},expression:"formItem1.remark"}})],1),a("FormItem",{attrs:{label:"工具文件"}},[a("input",{ref:"file1",attrs:{type:"file",accept:".xml"}})])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading1},on:{click:t.submitUpdate}},[t._v("确定")])],1)],1)],1)},i=[],n=(a("7cfd"),a("99b4")),o=a("9eb4"),s=a("9bec"),l=a("a8cd"),c={name:"UserManage",data:function(){var t=this;return{code:"",limit:10,realName:"",phoneNumber:"",department:"",tableHeight:window.innerHeight-290,pageSize:Math.floor((window.innerHeight-290)/40)-1,pageNum:1,total:0,resId:"",delId:"",editDefaultData:{},columns1:[{title:"序号",align:"center",width:100,render:function(e,a){return e("span",a.index+(t.pageNum-1)*t.pageSize+1)}},{title:"工具名称",key:"name"},{title:"工具说明",key:"remark"},{title:"设为默认工具",width:270,align:"center",render:function(e,a){return 1===a.row.flag?e("span","默认工具"):e("div",[e("Button",{props:{type:"warning",size:"small",icon:"md-create"},style:{marginRight:"5px"},on:{click:function(){t.setDefault(a.row.id)}}},"设置为默认")])}},{title:"操作",key:"action",width:270,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"warning",size:"small",icon:"md-create"},style:{marginRight:"5px"},on:{click:function(){t.modal2=!0,t.formItem1.name=a.row.name,t.formItem1.id=a.row.id,t.formItem1.remark=a.row.remark}}},"编辑"),e("Button",{props:{type:"error",size:"small",icon:"md-trash"},on:{click:function(){t.delId=a.row.id,t.$Modal.confirm({title:"确认",content:"请问您确定要删除该工具？",onOk:function(){t.sysDel()},onCancel:function(){}})}}},"删除")])}}],data1:[],codeData:[],departmentList:[],loading:!1,loading1:!1,modal1:!1,formItem:{name:"",file:"",remark:""},formItem1:{name:"",remark:""},modal2:!1,type:1}},components:{UserAdd:o["a"],UserEdit:s["a"],QueryBox:l["a"]},mounted:function(){window.onresize=function(){this.tableHeight=window.innerHeight-290,this.pageSize=Math.floor((window.innerHeight-290)/40)-1}.bind(this),this.getTableData()},methods:{getTableData:function(){var t=this;this.loading=!0,Object(n["z"])({data:{pageNum:this.pageSize*(this.pageNum-1)+1,pageSize:this.pageSize,name:this.realName,type:this.type}}).then((function(e){"0000"===e.data.code?(t.data1=e.data.data.rows,t.total=e.data.data.total,t.loading=!1):t.$Notice.error({title:e.data.msg})})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},openAdd:function(){this.modal1=!0,this.formItem.name=""},addSubmit:function(){var t=this;this.loading=!0;var e=new FormData;e.append("name",this.formItem.name),e.append("remark",this.formItem.remark),e.append("file",this.$refs.file.files[0]),Object(n["x"])(e).then((function(e){t.loading=!1,t.modal1=!1,"0000"===e.data.code?(t.$Notice.success({title:"创建工具成功"}),t.getTableData()):t.$Notice.error({title:"创建工具失败",desc:e.data.msg})}))},setDefault:function(t){var e=this,a=new FormData;a.append("flag",this.type),a.append("id",t),Object(n["A"])(a).then((function(t){"0000"===t.data.code?(e.getTableData(),e.$Notice.success({title:"设置成功"})):e.$Notice.error({title:"设置失败",desc:t.data.msg})}))},sysDel:function(){var t=this;Object(n["y"])({data:{id:[this.delId]}}).then((function(e){"0000"===e.data.code?(t.getTableData(),t.$Notice.success({title:"删除成功"})):t.$Notice.error({title:"删除失败"})})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},openUpdate:function(){this.modal2=!0,this.formItem1.name=""},submitUpdate:function(){var t=this;this.loading1=!0;var e=new FormData;e.append("name",this.formItem1.name),e.append("remark",this.formItem1.remark),e.append("id",this.formItem1.id),this.$refs.file1.value&&e.append("file",this.$refs.file1.files[0]),Object(n["A"])(e).then((function(e){t.loading1=!1,t.modal2=!1,"0000"===e.data.code?(t.$refs.file1.value="",t.getTableData(),t.$Notice.success({title:"编辑成功"})):t.$Notice.error({title:"编辑失败",desc:e.data.msg})}))},searchSrldId:function(t){this.realName=t.realName,this.getTableData()},pageChange:function(t){this.page=t}}},d=c,m=(a("a629"),a("6691")),u=Object(m["a"])(d,r,i,!1,null,"0142d839",null);e["default"]=u.exports},a629:function(t,e,a){"use strict";var r=a("5161"),i=a.n(r);i.a},a8cd:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"query-box"},[a("div",{ref:"queryBox",staticClass:"query-box-title",on:{click:function(e){t.show=!t.show}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t.queryData.length,expression:"queryData.length===0"}],staticClass:"search-title"},[t._v("查询条件")]),a("div",{attrs:{"search-items":""}},t._l(t.queryData,(function(e,r){return a("span",{key:r,staticClass:"queryTerm"},[a("strong",[t._v(t._s(e.name))]),a("span",[t._v("\n          "+t._s(e.text)+"\n        ")])])})),0),a("div",{staticStyle:{"text-align":"right"}},[a("Button",{attrs:{type:"primary",size:"small",icon:"ios-arrow-dropdown"}},[t._v("查询条件")]),t._t("default")],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"queryDown",staticClass:"query-down"},[a("div",{staticClass:"queryTerm"},[a("TextTerm",{attrs:{titName:"模板名称",titKey:"realName"},on:{updataQueryData:t.updataQueryData,delQueryTrem:t.delQueryTrem}})],1),a("div",{staticStyle:{"text-align":"right","margin-top":"-45px"}},[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small",icon:"ios-search"},on:{click:t.search}},[t._v("搜索")]),a("Button",{attrs:{type:"primary",size:"small",icon:"md-close"},on:{click:function(e){t.show=!1}}},[t._v("取消")])],1)])])},i=[],n=(a("4b5e"),a("6c28"),a("4634"),a("7cfd"),a("9329")),o=a("49ae"),s={name:"queryBox",data:function(){return{show:!1,UnitName:"",queryData:[]}},components:{CascadeTerm:n["a"],TextTerm:o["a"]},mounted:function(){document.addEventListener("click",this.queryHide)},beforeDestroy:function(){document.removeEventListener("click",this.queryHide)},methods:{updataQueryData:function(t){""!==t.text?(this.queryData=this.queryData.filter((function(e){return e.name!==t.name})),this.queryData.push(t)):this.queryData=this.queryData.filter((function(e){return e.name!==t.name}))},delQueryTrem:function(t){this.queryData=this.queryData.filter((function(e){return e.key!==t}))},search:function(){console.log(this.queryData);var t={},e=!0,a=!1,r=void 0;try{for(var i,n=this.queryData[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var o=i.value;t[o.key]=o.value}}catch(s){a=!0,r=s}finally{try{e||null==n.return||n.return()}finally{if(a)throw r}}console.log(t),this.$emit("searchSrldId",t),this.show=!1},queryHide:function(t){this.$refs.queryBox.contains(t.target)||this.$refs.queryDown.contains(t.target)||(this.show=!1)}}},l=s,c=(a("3493"),a("6691")),d=Object(c["a"])(l,r,i,!1,null,"49e3f1dd",null);e["a"]=d.exports}}]);
//# sourceMappingURL=chunk-70f4c75e.f9750455.js.map