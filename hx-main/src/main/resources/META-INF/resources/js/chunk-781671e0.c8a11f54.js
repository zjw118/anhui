(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-781671e0"],{"0196":function(t,e,a){},"07f3":function(t,e,a){"use strict";var i=a("e14a"),n=a.n(i);n.a},"1c09":function(t,e,a){},2794:function(t,e,a){"use strict";var i=a("1c09"),n=a.n(i);n.a},"3ac9":function(t,e,a){"use strict";a.d(e,"p",function(){return n}),a.d(e,"n",function(){return r}),a.d(e,"r",function(){return s}),a.d(e,"j",function(){return o}),a.d(e,"m",function(){return c}),a.d(e,"g",function(){return l}),a.d(e,"h",function(){return u}),a.d(e,"f",function(){return d}),a.d(e,"i",function(){return p}),a.d(e,"t",function(){return v}),a.d(e,"e",function(){return b}),a.d(e,"a",function(){return f}),a.d(e,"c",function(){return m}),a.d(e,"l",function(){return h}),a.d(e,"u",function(){return g}),a.d(e,"w",function(){return y}),a.d(e,"d",function(){return k}),a.d(e,"q",function(){return _}),a.d(e,"k",function(){return x}),a.d(e,"s",function(){return w}),a.d(e,"o",function(){return C}),a.d(e,"v",function(){return S}),a.d(e,"z",function(){return O}),a.d(e,"x",function(){return T}),a.d(e,"y",function(){return D}),a.d(e,"b",function(){return j});var i=a("b775"),n=function(t){return Object(i["a"])({url:"/ktdb/lmPoint/getPointList",method:"post",data:t})},r=function(t){return Object(i["a"])({url:"/sys/menu/getMenu",method:"post",data:t})},s=function(t){return Object(i["a"])({url:"/ktdb/lmMarkerMobile/getPreMarkerList",method:"post",data:t})},o=function(t){return Object(i["a"])({url:"/ktdb/lmBoard/getPreLmBoardList",method:"post",data:t})},c=function(t){return Object(i["a"])({url:"/ktdb/lmMarkerMobile/getMarkerByCoordinate",method:"post",data:t})},l=function(t){return Object(i["a"])({url:"/ktdb/lmPoint/export_Excel",method:"post",data:t})},u=function(t){return Object(i["a"])({url:"/ktdb/lmMarkerMobile/export_PreExcel",method:"post",data:t})},d=function(t){return Object(i["a"])({url:"/ktdb/lmBoard/export_PreExcel",method:"post",data:t})},p=function(t){return Object(i["a"])({url:"/ktdb/dataRedlineRegister/exportredlineExcel",method:"post",data:t})},v=function(t){return Object(i["a"])({url:"ktdb/dataRedlineRegister/list",method:"post",data:t})},b=function(t){return Object(i["a"])({url:"ktdb/environment/bottomChart/list",method:"post",data:t})},f=function(t){return Object(i["a"])({url:"ktdb/environment/bottomChart/add",method:"post",data:t})},m=function(t){return Object(i["a"])({url:"ktdb/environment/bottomChart/delete",method:"post",data:t})},h=function(t){return Object(i["a"])({url:"/ktdb/bottomchartType/list",method:"post",data:t})},g=function(t){return Object(i["a"])({url:"/ktdb/bottomchartType/add",method:"post",data:t})},y=function(t){return Object(i["a"])({url:"/ktdb/bottomchartType/update",method:"post",data:t})},k=function(t){return Object(i["a"])({url:"/ktdb/bottomchartType/delete",method:"post",data:t})},_=function(t){return Object(i["a"])({url:"/ktdb/total/getPreMarkAndRedlineTotal",method:"post",data:t})},x=function(t){return Object(i["a"])({url:"/ktdb/total/getBoardAndRedlineTotal",method:"post",data:t})},w=function(t){return Object(i["a"])({url:"/ktdb/total/getRedlineCount",method:"post",data:t})},C=function(t){return Object(i["a"])({url:"/ktdb/total/getPointCount",method:"post",data:t})},S=function(t){return Object(i["a"])({url:"/ktdb/lmBoard/updateBoard",method:"post",data:t})},O=function(t){return Object(i["a"])({url:"/ktdb/dataRedlineRegister/update",method:"post",data:t})},T=function(t){return Object(i["a"])({url:"/ktdb/lmMarkerMobile/updateMaker",method:"post",data:t})},D=function(t){return Object(i["a"])({url:"/ktdb/lmPoint/updatePoint",method:"post",data:t})},j=function(t){return Object(i["a"])({url:"/ktdb/dataRedlineRegister/allList",method:"post",data:t})}},"5e28":function(t,e,a){"use strict";var i=a("0196"),n=a.n(i);n.a},a481:function(t,e,a){"use strict";var i=a("cb7c"),n=a("4bf8"),r=a("9def"),s=a("4588"),o=a("0390"),c=a("5f1b"),l=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g,b=function(t){return void 0===t?t:String(t)};a("214f")("replace",2,function(t,e,a,f){return[function(i,n){var r=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,r,n):a.call(String(r),i,n)},function(t,e){var n=f(a,t,this,e);if(n.done)return n.value;var d=i(t),p=String(this),v="function"===typeof e;v||(e=String(e));var h=d.global;if(h){var g=d.unicode;d.lastIndex=0}var y=[];while(1){var k=c(d,p);if(null===k)break;if(y.push(k),!h)break;var _=String(k[0]);""===_&&(d.lastIndex=o(p,r(d.lastIndex),g))}for(var x="",w=0,C=0;C<y.length;C++){k=y[C];for(var S=String(k[0]),O=l(u(s(k.index),p.length),0),T=[],D=1;D<k.length;D++)T.push(b(k[D]));var j=k.groups;if(v){var L=[S].concat(T,O,p);void 0!==j&&L.push(j);var N=String(e.apply(void 0,L))}else N=m(S,p,O,T,j,e);O>=w&&(x+=p.slice(w,O)+N,w=O+S.length)}return x+p.slice(w)}];function m(t,e,i,r,s,o){var c=i+t.length,l=r.length,u=v;return void 0!==s&&(s=n(s),u=p),a.call(o,u,function(a,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(c);case"<":o=s[n.slice(1,-1)];break;default:var u=+n;if(0===u)return a;if(u>l){var p=d(u/10);return 0===p?a:p<=l?void 0===r[p-1]?n.charAt(1):r[p-1]+n.charAt(1):a}o=r[u-1]}return void 0===o?"":o})}})},abcc:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tablet"}},[a("div",{staticClass:"queryBox"},[a("QueryBox",{staticStyle:{width:"calc(100% - 80px)"},attrs:{formArr:t.queryFrom},on:{query:t.getQueryData}}),a("div",{staticClass:"queryBtns"},[a("Button",{staticClass:"btn-add",staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"small",icon:"md-add"},on:{click:function(e){return e.stopPropagation(),t.openAddModal(e)}}},[t._v("新建")])],1)],1),a("div",{staticClass:"content_box"},[a("div",{staticClass:"table-box"},[a("Table",{attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns1,data:t.data1,"highlight-row":"",height:t.tableHeight}})],1),a("div",{staticClass:"page_box"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.pageNum,"show-total":""},on:{"update:current":function(e){t.pageNum=e},"on-change":t.pageChange}})],1)]),a("div",{staticClass:"extract_box",class:{addActive:t.addActive}},[a("extracTableMap",{ref:"extracTableMap",on:{signOut:t.signOut}})],1),a("Modal",{attrs:{title:"新建人类活动信息提取任务","mask-closable":!1},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{ref:"addForm",staticStyle:{width:"85%",margin:"20px auto 0"},attrs:{model:t.addForm,"label-width":150,rules:t.addFormRules}},[a("FormItem",{attrs:{prop:"name",label:"人类活动提取任务名称"}},[a("Input",{attrs:{placeholder:"请填写人类活动提取任务名称，最少四个字符"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),a("FormItem",{attrs:{prop:"url",label:"底图服务地址"}},[a("Input",{attrs:{placeholder:"请填写底图服务地址"},model:{value:t.addForm.url,callback:function(e){t.$set(t.addForm,"url",e)},expression:"addForm.url"}})],1),a("FormItem",{attrs:{prop:"createDate",label:"数据日期"}},[a("DatePicker",{attrs:{type:"date",placeholder:"请选择创建时间"},model:{value:t.addForm.createDate,callback:function(e){t.$set(t.addForm,"createDate",e)},expression:"addForm.createDate"}})],1),a("FormItem",{attrs:{label:"人类活动提取任务说明"}},[a("Input",{attrs:{type:"textarea",placeholder:"请填写人类活动提取任务说明"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(e){t.modal1=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.buttonLoading},on:{click:t.submitAddForm}},[t._v("确认")])],1)],1)],1)},n=[],r=(a("7f7f"),a("cebc")),s=a("91b2"),o=a("aff7"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-box"},[a("div",{staticClass:"viewDoms"},[a("Split",{staticStyle:{height:"100%"},style:{width:t.split?"100%":"calc(100% + 6px)",marginLeft:t.split?"0":"-6px"},attrs:{min:"400px",max:"480px"},model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[a("div",{staticClass:"splitPane",attrs:{slot:"left"},slot:"left"},[a("div",{ref:"referViewDiv",attrs:{id:"referViewDiv"}})]),a("div",{staticClass:"splitPane",attrs:{slot:"right"},slot:"right"},[a("div",{ref:"viewDiv",attrs:{id:"viewDiv"}})])])],1),a("p",{staticClass:"btns"},[a("Button",{staticClass:"btn-save mr15",attrs:{type:"success",size:"small"},on:{click:function(e){return t.saveLayer0()}}},[a("i",{staticClass:"iconfont icon-Save"}),t._v("保存")]),a("Button",{staticClass:"btn-cancel",attrs:{type:"error",size:"small"},on:{click:function(e){return t.$emit("signOut",!1)}}},[a("i",{staticClass:"iconfont icon-del"}),t._v("取消")])],1),a("div",{staticClass:"layerControl",attrs:{id:"layerControl"}},[a("button",{staticClass:"annoBtn",staticStyle:{"border-radius":"9px",display:"none"},on:{click:function(e){t.layerPanelStatus=!t.layerPanelStatus}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.layerPanelStatus,expression:"layerPanelStatus"}],staticClass:"layerPanel"},[a("ul",[a("CheckboxGroup",{on:{"on-change":t.backSocialChange},model:{value:t.backSocial,callback:function(e){t.backSocial=e},expression:"backSocial"}},[a("li",{staticClass:"backLayer"},[a("Checkbox",{attrs:{label:"backLayer"}},[t._v(" ")]),a("p",{staticStyle:{"margin-left":"29px","margin-top":"-20px"},on:{click:function(e){t.backListStatus=!t.backListStatus}}},[t._v("\n              基年数据图层\n              "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.backListStatus,expression:"!backListStatus"}],staticStyle:{float:"right"}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.backListStatus,expression:"backListStatus"}],staticStyle:{float:"right"}},[a("i",{staticClass:"iconfont"},[t._v("")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.backListStatus,expression:"backListStatus"}],staticClass:"backListPanel"},[a("ul",[a("li",{directives:[{name:"show",rawName:"v-show",value:!t.backList.length,expression:"!backList.length"}]},[t._v("没有基年数据...")]),a("RadioGroup",{model:{value:t.selectBackId,callback:function(e){t.selectBackId=e},expression:"selectBackId"}},t._l(t.backList,function(e){return a("li",{key:e.ab001},[a("Radio",{attrs:{label:e.ab001}},[a("span",[t._v(t._s(e.ab008))])])],1)}),0)],1)])],1),1*t.$route.query.userType!==0?a("li",[a("Checkbox",{attrs:{label:"examLayer"}},[t._v(" ")]),t._v("批注图层")],1):t._e()])],1)])]),a("div",{staticClass:"layerControl",attrs:{id:"referLayerControl"}},[a("button",{staticClass:"annoBtn",staticStyle:{"border-radius":"10px"},on:{click:function(e){t.referPanelStatus=!t.referPanelStatus}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.referPanelStatus,expression:"referPanelStatus"}],staticClass:"layerPanel"},[a("ul",[a("CheckboxGroup",{on:{"on-change":t.backSocialChangeRefer},model:{value:t.referbackSocial,callback:function(e){t.referbackSocial=e},expression:"referbackSocial"}},[a("li",{staticClass:"backLayer"},[a("Checkbox",{attrs:{label:"backLayer"}},[t._v(" ")]),a("p",{staticStyle:{"margin-left":"29px","margin-top":"-20px"},on:{click:function(e){t.referbackListStatus=!t.referbackListStatus}}},[t._v("\n              基年数据图层\n              "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.referbackListStatus,expression:"!referbackListStatus"}],staticStyle:{float:"right"}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.referbackListStatus,expression:"referbackListStatus"}],staticStyle:{float:"right"}},[a("i",{staticClass:"iconfont"},[t._v("")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.referbackListStatus,expression:"referbackListStatus"}],staticClass:"backListPanel"},[a("ul",[a("li",{directives:[{name:"show",rawName:"v-show",value:!t.backList.length,expression:"!backList.length"}]},[t._v("没有基年数据...")]),a("RadioGroup",{model:{value:t.referselectBackId,callback:function(e){t.referselectBackId=e},expression:"referselectBackId"}},t._l(t.backList,function(e){return a("li",{key:e.ab001},[a("Radio",{attrs:{label:e.ab001}},[a("span",[t._v(t._s(e.ab008))])])],1)}),0)],1)])],1)])],1)])]),a("div",{attrs:{id:"zoomIn"}},[a("button",{staticClass:"btnTools",on:{click:t.zoomIn}},[a("i",{staticClass:"iconfont"},[t._v("")])])]),a("div",{attrs:{id:"zoomOut"}},[a("button",{staticClass:"btnTools",on:{click:t.zoomOut}},[a("i",{staticClass:"iconfont"},[t._v("")])])]),a("div",{attrs:{id:"referZoomIn"}},[a("button",{staticClass:"btnTools",on:{click:t.zoomIn}},[a("i",{staticClass:"iconfont"},[t._v("")])])]),a("div",{attrs:{id:"referZoomOut"}},[a("button",{staticClass:"btnTools",on:{click:t.zoomOut}},[a("i",{staticClass:"iconfont"},[t._v("")])])]),a("div",{attrs:{id:"referBtn"}},[a("div",{staticClass:"tools",staticStyle:{padding:"1px","border-radius":"9px",display:"none"}},[a("button",{class:{active:t.referStatus},staticStyle:{"border-radius":"9px",outline:"none"},attrs:{title:"分屏"},on:{click:function(e){return e.stopPropagation(),t.referStateToggle(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1*t.$route.query.userType!==3,expression:"$route.query.userType * 1 !==3"}],attrs:{id:"toolbar"}},[a("div",{staticClass:"tools",staticStyle:{display:"none"}},[1*t.$route.query.userType!==3?a("button",{attrs:{title:"保存"},on:{click:function(e){return e.stopPropagation(),t.IntersectError(1)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]):t._e(),1*t.$route.query.userType===0||1*t.$route.query.userType===3||1*t.$route.query.userType===1?a("router-link",{attrs:{to:{name:"needDo"}}},[a("button",{attrs:{title:"返回"}},[a("i",{staticClass:"iconfont"},[t._v("")])])]):t._e(),1*t.$route.query.userType===2&&1*t.$route.query.personType===2?a("router-link",{attrs:{to:{name:"examDo"}}},[a("button",{attrs:{title:"返回"}},[a("i",{staticClass:"iconfont"},[t._v("")])])]):t._e(),1*t.$route.query.userType===2&&1*t.$route.query.personType===3?a("router-link",{staticStyle:{"margin-right":"10px"},attrs:{to:{name:"checkPage",query:{taskId:t.$route.query.taskId}}}},[a("button",{attrs:{title:"返回"}},[a("i",{staticClass:"iconfont"},[t._v("")])])]):t._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.orchardToolsStatus,expression:"orchardToolsStatus"}],staticClass:"tools"},[a("button",{class:{active:t.choiceStatus},attrs:{title:"选择"},on:{click:function(e){return e.stopPropagation(),t.choiceStateToggle(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("button",{class:{active:t.cutstatus},attrs:{title:"剪切"},on:{click:function(e){return e.stopPropagation(),t.cutStateToggle(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("button",{class:{active:t.addStatus},attrs:{title:"新建"},on:{click:function(e){return e.stopPropagation(),t.addStateToggle(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("button",{class:{active:t.mergeStatus},attrs:{title:"融合"},on:{click:function(e){return e.stopPropagation(),t.mergeStateToggle(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("button",{class:{active:t.intersectStatus},attrs:{title:"交集"},on:{click:function(e){return e.stopPropagation(),t.intersectStateToggle(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("button",{attrs:{title:"打散"},on:{click:function(e){return e.stopPropagation(),t.scatterClick(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("button",{class:{active:t.attributeStatus},attrs:{title:"属性操作"},on:{click:function(e){return e.stopPropagation(),t.attributeStateToggle(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("button",{attrs:{title:"删除"},on:{click:function(e){return e.stopPropagation(),t.deleteClick(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.examToolsStatus&&1*t.$route.query.userType!==0,expression:"examToolsStatus&&$route.query.userType * 1 !== 0 "}],class:{active:t.annoStatus},attrs:{title:"批注"},on:{click:function(e){return e.stopPropagation(),t.annoStatusToggle(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])])])]),a("div",{attrs:{id:"orcharToolbar"}},[a("div",{staticClass:"tools"},[a("button",{class:{active:t.referChoiceStatus},attrs:{title:"选择"},on:{click:function(e){return e.stopPropagation(),t.referChoiceStateToggle(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("button",{attrs:{title:"将选中几何图形复制到业务图层"},on:{click:function(e){return e.stopPropagation(),t.copyClick(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])]),a("button",{attrs:{title:"将所有几何图形复制到业务图层"},on:{click:function(e){return e.stopPropagation(),t.loadClick(e)}}},[a("i",{staticClass:"iconfont"},[t._v("")])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.mergeModal,expression:"mergeModal"}],staticClass:"panel",attrs:{id:"mergeModal"}},[a("div",{staticClass:"attributeList"},[a("ul",t._l(t.originalSelectedGraphics,function(e,i){return a("li",{key:i,class:{attrLiActive:e.attributes.ObjectID===t.mergeObj.ObjectID,attrCopyActive:e.attributes.ObjectID===t.mergeObj.ObjectID},on:{click:function(a){return t.mergeChickList(e.attributes)}}},[a("span",[t._v("id：")]),a("span",[t._v(t._s(e.attributes.ObjectID))])])}),0)]),a("div",{staticClass:"attributeDetail"},[a("table",{staticClass:"tab",attrs:{border:"0",cellspacing:"1",cellpadding:"0"}},[t._m(0),a("tbody",t._l(t.mergeObj,function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(t._f("nameToAlias")(i)))]),a("td",[t._v(t._s(e))])])}),0)])]),a("p",{staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn",class:{btnDisable:"{}"===JSON.stringify(t.mergeObj)},on:{click:t.mergeGeoms}},[t._v("融合")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.intersectModal,expression:"intersectModal"}],staticClass:"panel",attrs:{id:"intersectModal"}},[a("ul",[a("li",{directives:[{name:"show",rawName:"v-show",value:"intersect"===t.intersectType,expression:"intersectType === 'intersect'"}],on:{mouseover:function(e){return t.intersectAttrOver("left")},mouseout:t.intersectAttrOut,click:t.intersectGeoms}},[t._v("左切")]),a("li",{directives:[{name:"show",rawName:"v-show",value:"intersect"===t.intersectType,expression:"intersectType === 'intersect'"}],on:{mouseover:function(e){return t.intersectAttrOver("right")},mouseout:t.intersectAttrOut,click:t.intersectGeoms}},[t._v("右切")]),a("li",{directives:[{name:"show",rawName:"v-show",value:"intersect"===t.intersectType,expression:"intersectType === 'intersect'"}],class:{panelActive:"center"===t.intersectPanelType},on:{mouseover:function(e){return t.intersectAttrOver("center")},mouseout:t.intersectAttrOut,click:function(e){return t.openIntersectAttrPanel("center")}}},[t._v("交集")]),a("li",{directives:[{name:"show",rawName:"v-show",value:"intersect"===t.intersectType,expression:"intersectType === 'intersect'"}],class:{panelActive:"all"===t.intersectPanelType},on:{mouseover:function(e){return t.intersectAttrOver("all")},mouseout:t.intersectAttrOut,click:function(e){return t.openIntersectAttrPanel("all")}}},[t._v("切割")]),a("li",{directives:[{name:"show",rawName:"v-show",value:"contains"===t.intersectType,expression:"intersectType === 'contains'"}],on:{mouseover:function(e){return t.intersectAttrOver("contains")},mouseout:t.intersectAttrOut,click:t.intersectGeoms}},[t._v("抠图")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.intersectPanel,expression:"intersectPanel"}],staticClass:"panel",attrs:{id:"intersectPanel"}},[a("p",[t._v("请为交集部分选择属性模板：")]),a("div",{staticClass:"attributeList"},[a("ul",t._l(t.originalSelectedGraphics,function(e,i){return a("li",{key:i,class:{attrLiActive:e.attributes.ObjectID===t.intersectObj.ObjectID,attrCopyActive:e.attributes.ObjectID===t.intersectObj.ObjectID},on:{click:function(a){return t.intersectChickList(e.attributes)}}},[a("span",[t._v("id：")]),a("span",[t._v(t._s(e.attributes.ObjectID))])])}),0)]),a("div",{staticClass:"attributeDetail"},[a("table",{staticClass:"tab",attrs:{border:"0",cellspacing:"1",cellpadding:"0"}},[t._m(1),a("tbody",t._l(t.intersectObj,function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(t._f("nameToAlias")(i)))]),a("td",[t._v(t._s(e))])])}),0)])]),a("p",{staticStyle:{"text-align":"right"}},[a("button",{directives:[{name:"show",rawName:"v-show",value:"center"===t.intersectPanelType,expression:"intersectPanelType === 'center'"}],staticClass:"btn",class:{btnDisable:"{}"===JSON.stringify(t.intersectObj)},on:{click:function(e){return t.intersectGeoms("center")}}},[t._v("\n        交集\n      ")]),a("button",{directives:[{name:"show",rawName:"v-show",value:"all"===t.intersectPanelType,expression:"intersectPanelType === 'all'"}],staticClass:"btn",class:{btnDisable:"{}"===JSON.stringify(t.intersectObj)},on:{click:function(e){return t.intersectGeoms("all")}}},[t._v("\n        切割\n      ")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.attributeStatus,expression:"attributeStatus"}],staticClass:"panel",attrs:{id:"attributePanel"}},[a("button",{staticClass:"btn",class:{btnDisable:"{}"===JSON.stringify(t.attributeCopy)},on:{click:t.attrCover}},[t._v("覆盖")]),a("div",{staticClass:"attributeList"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!t.originalSelectedGraphics.length,expression:"!originalSelectedGraphics.length"}],staticStyle:{"text-align":"center","line-height":"80px"}},[t._v("请先选择几何")]),a("ul",t._l(t.originalSelectedGraphics,function(e,i){return a("li",{key:i,class:{attrLiActive:e.attributes.ObjectID===t.attributeObj.ObjectID,attrCopyActive:e.attributes.ObjectID===t.attributeCopy.ObjectID},on:{click:function(a){return t.attrChickList(e.attributes)}}},[a("span",[t._v("id：")]),a("span",[t._v(t._s(e.attributes.ObjectID))]),a("i",{staticClass:"iconfont",attrs:{title:"删除"},on:{click:function(a){return a.stopPropagation(),t.attrDelchoice(e.attributes.ObjectID)}}},[t._v("")]),a("i",{staticClass:"iconfont",class:{unActive:"{}"===JSON.stringify(t.attributeCopy)},attrs:{title:"粘贴"},on:{click:function(a){return a.stopPropagation(),t.attrPaste(e.attributes.ObjectID)}}},[t._v("")]),a("i",{staticClass:"iconfont",attrs:{title:"复制"},on:{click:function(a){return a.stopPropagation(),t.attrCopy(e.attributes)}}},[t._v("")])])}),0)]),a("div",{staticClass:"attributeDetail"},[a("button",{staticClass:"btn",class:{btnDisable:"{}"===JSON.stringify(t.attributeObj)},on:{click:t.attrEdit}},[t._v("编辑")]),a("button",{staticClass:"btn",class:{btnDisable:!("{}"!==JSON.stringify(t.attributeObj)&&t.attributeEdit)},on:{click:t.attrConserve}},[t._v("保存")]),a("table",{staticClass:"tab",attrs:{border:"0",cellspacing:"1",cellpadding:"0"}},[t._m(2),a("tbody",[a("tr",[a("td",[t._v(t._s(t._f("nameToAlias")("name")))]),a("td",{directives:[{name:"show",rawName:"v-show",value:!t.attributeEdit,expression:"!attributeEdit"}],ref:"puctRef"}),t.attributeEdit?a("td",{ref:"typeRefName",staticStyle:{padding:"0"}},[a("Input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.nameValue,callback:function(e){t.nameValue=e},expression:"nameValue"}})],1):t._e()]),a("tr",[a("td",[t._v(t._s(t._f("nameToAlias")("xzqh")))]),a("td",{directives:[{name:"show",rawName:"v-show",value:!t.attributeEdit,expression:"!attributeEdit"}],ref:"xzqhRef"}),t.attributeEdit?a("td",{ref:"xzqhRefEdit",staticStyle:{padding:"0"}},[a("Cascader",{attrs:{data:t.xzqhTree},model:{value:t.xzqhValue,callback:function(e){t.xzqhValue=e},expression:"xzqhValue"}})],1):t._e()]),a("tr",[a("td",[t._v(t._s(t._f("nameToAlias")("type")))]),a("td",{directives:[{name:"show",rawName:"v-show",value:!t.attributeEdit,expression:"!attributeEdit"}],ref:"typeRef"}),t.attributeEdit?a("td",{ref:"typeRefEdit",staticStyle:{padding:"0"}},[a("Cascader",{attrs:{data:t.activityTree},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}})],1):t._e()]),a("tr",[a("td",[t._v(t._s(t._f("nameToAlias")("region")))]),a("td",{directives:[{name:"show",rawName:"v-show",value:!t.attributeEdit,expression:"!attributeEdit"}],ref:"regionRef"}),t.attributeEdit?a("td",{ref:"regionRefEdit",staticStyle:{padding:"0"}},[a("Select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.regionValue,callback:function(e){t.regionValue=e},expression:"regionValue"}},[a("Option",{attrs:{value:"核心区"}},[t._v("核心区")]),a("Option",{attrs:{value:"缓冲区"}},[t._v("缓冲区")]),a("Option",{attrs:{value:"试验区"}},[t._v("试验区")])],1)],1):t._e()]),a("tr",[a("td",[t._v(t._s(t._f("nameToAlias")("position")))]),a("td",{directives:[{name:"show",rawName:"v-show",value:!t.attributeEdit,expression:"!attributeEdit"}],ref:"positionRef"}),t.attributeEdit?a("td",{ref:"positionRefEdit",staticStyle:{padding:"0"}},[a("Input",{attrs:{size:"small"},model:{value:t.positionValue,callback:function(e){t.positionValue=e},expression:"positionValue"}})],1):t._e()]),a("tr",[a("td",[t._v(t._s(t._f("nameToAlias")("area")))]),a("td",{ref:"areaRef"})]),a("tr",[a("td",[t._v(t._s(t._f("nameToAlias")("center")))]),a("td",{ref:"centerRef"})])])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.annoStatus,expression:"annoStatus"}],staticClass:"panel",attrs:{id:"annoPanel"}},[a("div",{staticClass:"annoList"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!t.changeData.length&&!t.pointData.length,expression:"!changeData.length && !pointData.length"}],staticStyle:{"text-align":"center","line-height":"80px"}},[t._v("暂无批注点")]),a("ul",[t._l(t.pointData,function(e,i){return a("li",{key:"point"+i,staticClass:"clr"},[a("i",{staticClass:"point",staticStyle:{background:"red"}}),e.attributes.annotat?a("p",{class:{attrActive:e.attributes.ObjectID===t.annoActive.attributes.ObjectID&&"point"===t.annoActive.attributes.type},on:{click:function(a){return t.pointAnnoLi(e,"point")}}},[t._v(t._s(e.attributes.annotat))]):t._e(),e.attributes.annotat?t._e():a("p",{class:{attrActive:e.attributes.ObjectID===t.annoActive.attributes.ObjectID&&"point"===t.annoActive.attributes.type},on:{click:function(a){return t.pointAnnoLi(e,"point")}}},[t._v(t._s(e.geometry.x)+","+t._s(e.geometry.y))]),a("span",{staticClass:"iconfont"},[1*t.$route.query.userType!==1?a("i",{staticClass:"icon",attrs:{title:"编辑"},on:{click:function(a){a.stopPropagation(),t.pointAnnoLi(e,"point"),t.editAnnotatLi(e)}}},[t._v("")]):t._e(),1*t.$route.query.userType!==1?a("i",{staticClass:"icon",attrs:{title:"删除"},on:{click:function(a){return a.stopPropagation(),t.annoDelete(e)}}},[t._v("")]):t._e(),1*t.$route.query.userType===1?a("i",{staticClass:"icon",attrs:{title:"确认修改"},on:{click:function(a){return a.stopPropagation(),t.editAnnoStatus(e)}}},[t._v("")]):t._e()]),e.attributes.ObjectID===t.annoActive.attributes.ObjectID&&"point"===t.annoActive.attributes.type&&t.listInputStatus?a("Input",{staticStyle:{margin:"5px 0 5px 20px",width:"calc(100% - 20px)"},attrs:{type:"textarea",rows:3,placeholder:"请填写批注"},model:{value:t.annoCon,callback:function(e){t.annoCon=e},expression:"annoCon"}}):t._e()],1)}),t._l(t.changeData,function(e,i){return a("li",{key:"change"+i,staticClass:"clr",on:{click:function(a){return t.pointAnnoLi(e,"change")}}},[a("i",{staticClass:"point",staticStyle:{background:"#19be6b"}}),e.attributes.annotat?a("p",{class:{attrActive:e.attributes.ObjectID===t.annoActive.attributes.ObjectID&&"change"===t.annoActive.attributes.type}},[t._v(t._s(e.attributes.annotat))]):t._e(),e.attributes.annotat?t._e():a("p",{class:{attrActive:e.attributes.ObjectID===t.annoActive.attributes.ObjectID&&"change"===t.annoActive.attributes.type}},[t._v(t._s(e.geometry.x)+","+t._s(e.geometry.y))])])})],2)]),1*t.$route.query.userType!==1?a("button",{staticClass:"btn",on:{click:t.addCnno}},[t._v("新增错误点")]):t._e()])])},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{width:"50%"}},[t._v("属性")]),a("th",[t._v("值")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{width:"50%"}},[t._v("属性")]),a("th",[t._v("值")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{width:"20%"}},[t._v("属性")]),a("th",[t._v("值")])])])}],u=(a("ac6a"),a("f499")),d=a.n(u),p=(a("a481"),a("28a5"),a("e814")),v=a.n(p),b=(a("96cf"),a("3b8d")),f=a("1777"),m=a("fa5ba"),h=a("138e"),g=a("d183"),y=a("dcb2"),k=a("f3a7"),_=a("dd71"),x=a("3ac9"),w=a("9ed9"),C={name:"extracTableMap",mixins:[f["a"],m["a"],y["a"],k["a"],_["a"],h["a"]],data:function(){return{map:{},view:{},layerCon:!1,type:"",orchardToolsStatus:!0,userType:0,configSocial:["orchardLayer","backLayer","examLayer"],featureData:[],activityTree:[],xzqhTree:[],typeMap:{},xzqhMap:{},treeNameMap:{},xzqhtreeNameMap:{}}},computed:{},props:{},watch:{},mounted:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.createMap();case 2:return t.next=4,this.createReferMap();case 4:return t.next=6,this.addWidgets();case 6:return t.next=8,this.getActivityType();case 8:return t.next=10,this.getCodeMenu();case 10:return t.next=12,this.addAllToolLayers(this.map);case 12:return t.next=14,this.addReferToolLayers(this.refermap);case 14:return t.next=16,this.addTools();case 16:return this.view.ui.add(document.getElementById("referBtn"),"top-left"),this.view.ui.add(document.getElementById("layerControl"),"top-left"),this.referview.ui.add(document.getElementById("referLayerControl"),"top-left"),t.next=21,this.getBackList();case 21:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{initCom:function(t){var e=this;this.view.when(function(t){e.getGeoJson()})},getGeoJson:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["z"])({id:this.$parent.activeId}).then(function(t){"0000"===t.data.code?e.layerAddData(t.data):e.$Notice.error({title:"获取解译数据失败",desc:t.msg})});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),layerAddData:function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(e){var a,i,n,r,s,o,c,l,u,d,p;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w["a"].Graphic;case 2:for(n in a=t.sent,i=JSON.parse(e.data.shp),i)i[n].geometry=JSON.parse(i[n].geometry),i[n].attributes=JSON.parse(i[n].attributes),i[n].attributes.type=i[n].attributes.type?v()(i[n].attributes.type):null,i[n].geometry.rings=JSON.parse(i[n].geometry.rings),i[n].geometry.spatialReference=g["a"].spatialReference,i[n]=new a(i[n]);return r=this.map.findLayerById("orchardLayer"),t.next=8,r.queryFeatures();case 8:return s=t.sent,t.next=11,r.applyEdits({deleteFeatures:s.features});case 11:return t.next=13,r.applyEdits({addFeatures:i});case 13:for(c in o=e.noteData,o)l=o[c].geometry.rings.split(","),o[c].geometry.x=1*l[0],o[c].geometry.y=1*l[1],o[c].geometry.spatialReference=g["a"].spatialReference;for(d in u=e.changeData,u)p=u[d].geometry.rings.split(","),u[d].geometry.x=1*p[0],u[d].geometry.y=1*p[1],u[d].geometry.spatialReference=g["a"].spatialReference;this.map.findLayerById("examChangeLayer").applyEdits({addFeatures:u});case 18:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),saveLayer0:function(){var t=this;this.map.findLayerById("orchardLayer").queryFeatures().then(function(e){Object(s["H"])({data:{jsondata:e.features,imageId:t.$parent.activeId,createBy:0}}).then(function(e){"0000"===e.data.code?t.$Notice.info({title:"人类活动标绘结果保存成功！"}):t.$Notice.error({title:e.data.msg})})})},getActivityType:function(){var t=this;Object(s["t"])({data:{}}).then(function(e){"0000"===e.data.code?(t.activityTree=JSON.parse(d()(e.data.data).replace(/id/g,"value").replace(/title/g,"label")),t.tree2list(t.activityTree,[])):t.$Notice.error({title:"获取人类活动类型失败",desc:e.data.msg})})},getCodeMenu:function(){var t=this;Object(x["n"])({data:{}}).then(function(e){if("0000"===e.data.code){console.log(e.data.data),t.xzqhTree=JSON.parse(d()(e.data.data[0].children));var a=function t(e){void 0!==e&&e.forEach(function(e){e.value=e.comCode,t(e.children)})};a(t.xzqhTree),t.tree2list2(t.xzqhTree,[]),console.log(t.xzqhTree)}}).catch(function(){t.$Notice.error({title:"服务器错误"})})},arr2tree:function(t,e,a){for(var i=0;i<t.length;i++)t[i].parentid===e&&(a.push({label:t[i].name,value:t[i].id}),t.slice(i,1),i--)},tree2list:function(t,e){for(var a=0;a<t.length;a++)this.treeNameMap[t[a].value]=t[a].label,t[a].children&&t[a].children.length>0?this.tree2list(t[a].children,e.concat(t[a].value)):this.typeMap[t[a].value]=e.concat(t[a].value)},tree2list2:function(t,e){for(var a=0;a<t.length;a++)this.xzqhtreeNameMap[t[a].value]=t[a].label,t[a].children&&t[a].children.length>0?this.tree2list2(t[a].children,e.concat(t[a].value)):this.xzqhMap[t[a].value]=e.concat(t[a].value)}}},S=C,O=(a("5e28"),a("2794"),a("2877")),T=Object(O["a"])(S,c,l,!1,null,"632957fc",null),D=T.exports,j=a("cf45"),L={name:"extracTable",data:function(){var t=this;return{queryData:{},tableHeight:48*Math.floor((window.innerHeight-300-40)/48)+40,columns1:[{title:"序号",key:"index",align:"center",width:60,render:function(e,a){return e("span",a.index+(t.pageNum-1)*t.pageSize+1)}},{title:"人类活动提取任务名称",align:"center",key:"name"},{title:"人类活动提取任务说明",align:"center",key:"remark"},{title:"数据日期",align:"center",width:120,key:"createDate"},{title:"底图服务",align:"center",width:250,key:"url"},{title:"人类活动块数",align:"center",width:120,key:"plaqueNumber"},{title:"人类活动面积（公顷）",align:"center",width:130,key:"area"},{title:"操作",key:"address",width:280,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"warning",size:"small",icon:"md-create"},style:{marginRight:"5px"},on:{click:function(){t.activeId=a.row.id,t.openMap()}}},"标绘修正"),e("Button",{props:{type:"success",size:"small"},class:"btn-import",style:{marginRight:"5px",padding:"3px 7px 2px 7px"},on:{click:function(){t.actData=a.row}}},[e("Upload",{props:{showUploadList:!1,format:[".xls"],action:"#",beforeUpload:t.upload}},[e("i",{class:"iconfont icon-upload",style:{fontSize:"12px",marginRight:"5px"}}),e("span",{},"识别导入")])]),e("Button",{props:{type:"error",size:"small",icon:"md-trash"},on:{click:function(){t.$Modal.confirm({title:"确认",content:"请问您确定要删除该任务么？",onOk:function(){t.proDelete(a.row.id)},onCancel:function(){}})}}},"删除")])}}],data1:[],obj:{},total:0,pageNum:1,pageSize:Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),loading:!1,addActive:!1,addForm:{name:"",url:"",id:[],remark:""},addFormRules:{name:[{required:!0,message:"任务名称必须填写",trigger:"blur"},{type:"string",min:4,message:"任务名称为4-20个字符组成",trigger:"blur"},{type:"string",max:20,message:"任务名称为4-20个字符组成",trigger:"blur"}],createDate:[{required:!0,type:"date",message:"创建时间不能为空",trigger:"blur"}]},modal1:!1,activeId:0,buttonLoading:!1,actData:{}}},components:{QueryBox:o["a"],extracTableMap:D},computed:{queryFrom:function(){return[{type:1,field:"name",title:"任务名称"}]}},created:function(){this.getTableList()},mounted:function(){var t=this;window.addEventListener("resize",function(){t.tableHeight=48*Math.floor((window.innerHeight-300-40)/48)+40,t.pageSize=Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),t.getTableList()},!1),this.getCodeMenu()},watch:{queryData:function(){this.getTableList()}},methods:{getQueryData:function(t){this.queryData=t,this.pageNum=1,this.getTableList()},getTableList:function(){var t=this;this.loading=!0,Object(s["E"])({data:Object(r["a"])({pageSize:this.pageSize,pageNum:this.pageNum},this.queryData)}).then(function(e){"0000"===e.data.code&&(t.data1=e.data.data.rows,t.total=e.data.data.total,t.loading=!1)}).catch(function(){t.$Notice.error({title:"服务器错误"})})},pageChange:function(t){this.pageNum=t,this.getTableList()},signOut:function(t){this.addActive=t},openAddModal:function(){this.modal1=!0,this.addForm.name="",this.addForm.url="",this.addForm.remark="",this.addForm.id="",this.$refs.addForm.resetFields()},openMap:function(){this.addActive=!0,this.$refs.extracTableMap.initCom()},submitAddForm:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.buttonLoading=!0,Object(s["d"])({data:{name:t.addForm.name,url:t.addForm.url,remark:t.addForm.remark,id:t.addForm.id,createDate:Object(j["f"])(t.addForm.createDate),createBy:1}}).then(function(e){t.buttonLoading=!1,"0000"===e.data.code?(t.getTableList(),t.$Notice.success({title:"成功创建人类活动信息提取任务"}),t.modal1=!1):t.$Notice.error({title:"新建人类活动信息提取任务失败",desc:e.data.msg})}))})},proDelete:function(t){var e=this;Object(s["k"])({data:{id:[t]}}).then(function(t){"0000"===t.data.code?(e.getTableList(),e.$Notice.success({title:"成功删除人类活动信息提取任务"})):e.$Notice.error({title:"删除人类活动信息提取任务失败",desc:t.data.msg})})},getCodeMenu:function(){var t=this;Object(s["q"])({data:{}}).then(function(e){"0000"===e.data.code&&(console.log(e.data.data),t.activeData=e.data.data,t.activeData=t.valComCode(t.activeData))}).catch(function(){t.$Notice.error({title:"服务器错误"})})},valComCode:function(t){for(var e in t)t[e].value=String(t[e].id),t[e].label=t[e].title,this.valComCode(t[e].children);return t},upload:function(t){var e=this,a=new FormData;a.append("file",t),a.append("id",this.actData.id),a.append("name",this.actData.name),a.append("url",this.actData.url),a.append("remark",this.actData.remark),a.append("createDate",Object(j["f"])(this.actData.createDate)),this.params=a,Object(s["J"])(this.params).then(function(t){"0000"===t.data.code?e.$Notice.success({title:"上传成功"}):e.$Notice.error({title:t.data.msg})})}}},N=L,A=(a("07f3"),Object(O["a"])(N,i,n,!1,null,"442a47d2",null));e["default"]=A.exports},e14a:function(t,e,a){}}]);
//# sourceMappingURL=chunk-781671e0.c8a11f54.js.map