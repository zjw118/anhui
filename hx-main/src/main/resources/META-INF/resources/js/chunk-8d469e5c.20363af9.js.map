{"version":3,"sources":["webpack:///./src/views/dynamicManage/workRegulation/workRegulation.vue?0dbc","webpack:///./src/api/workRegulation.js","webpack:///src/views/dynamicManage/workRegulation/workRegulation.vue","webpack:///./src/views/dynamicManage/workRegulation/workRegulation.vue?5bba","webpack:///./src/views/dynamicManage/workRegulation/workRegulation.vue","webpack:///./src/views/dynamicManage/workRegulation/workRegulation.vue?a656"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","id","_v","data","legendData","size","fix","_e","staticRenderFns","listPhoneUserToView","request","url","method","workRegulationvue_type_script_lang_js_","name","type","background","guai_point3_default","a","preset_bm3_default","popupTemplate","loadComplete","spinShow","components","Legend","mounted","createMap","getLedgerList","methods","_getLedgerList","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_this","wrap","_context","prev","next","workRegulation_listPhoneUserToView","then","res","code","addPointToMap","mapConfig","inflectionPointcolor","catch","$Notice","error","title","stop","apply","arguments","_createMap","_callee2","MapView","Map","Basemap","BasemapToggle","tdtylayer","tdtylayer1","tdtylayer2","tdtylayer3","layerProvince","customBasemap","customBasemap1","basemapToggle","_this2","_context2","arcgisTools","sent","utils_layers","baseLayers","thumbnailUrl","Basemapthumbnail_default","Basemapthumbnail1_default","map","basemap","view","container","center","centerPoint","zoom","when","wes","content","fieldInfos","fieldName","nextBasemap","ui","add","document","getElementById","_addPointToMap","_callee3","pointArray","symbolColor","layerId","GraphicsLayer","Graphic","layer","point","pointGraphic","textGraphic","wayPoint","status","lon","lat","features","graphicsLayer","i","lineAtt","markerSymbol","textSymbol","_context3","findLayerById","remove","elevationInfo","length","CH003","abrupt","indexOf","common","CH004","longitude","latitude","CH005","SA001","用户名","SA008","手机号","SA012","真实姓名","SA019","经度","纬度","邮箱","SA013","状态","width","height","outline","color","haloColor","haloSize","text","xoffset","yoffset","font","family","weight","geometry","symbol","attributes","push","_x","_x2","_x3","workRegulation_workRegulationvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_workRegulation_vue_vue_type_style_index_0_id_2c7d554e_lang_scss_rel_stylesheet_2Fscss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_workRegulation_vue_vue_type_style_index_0_id_2c7d554e_lang_scss_rel_stylesheet_2Fscss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-8d469e5c.20363af9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map-box\"},[_c('div',{ref:\"viewDiv\",attrs:{\"id\":\"viewDiv\"}}),_c('div',{attrs:{\"id\":\"legendbar\"}},[_c('span',[_vm._v(\"图例\")]),_c('Legend',{attrs:{\"data\":_vm.legendData,\"id\":\"legend\"}})],1),(_vm.spinShow)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request'\r\n\r\n/* 巡查人员实时位置 */\r\nexport const listPhoneUserToView = data => request({ url: '/user/listPhoneUserToView', method: 'post', data })\r\n","<template>\r\n  <div class=\"map-box\">\r\n    <div id=\"viewDiv\" ref=\"viewDiv\"></div>\r\n    <!-- 图例 -->\r\n    <div id=\"legendbar\">\r\n      <span>图例</span>\r\n      <Legend :data=\"legendData\" id=\"legend\"></Legend>\r\n    </div>\r\n    <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport arcgisPackage from '../../../utils/arcgisTools'\r\nimport config from '../../../setting/mapConfig'\r\nimport { tdtlayer, tdtyNoteslayer, tdtclayer, tdtcNoteslayer, redLine, shengjie } from '@/utils/layers'\r\nimport { cacuDMS } from '@/utils/common'\r\nimport Basemapthumbnail from '../../../assets/map_images/Basemapthumbnail.png'\r\nimport Basemapthumbnail1 from '../../../assets/map_images/Basemapthumbnail1.png'\r\nimport Legend from '@/components/Legend'\r\n// 离线图标\r\nimport patrolUserGray from '../../../assets/boundaryMarker_images/guai_point3.png'\r\n// 在线图标\r\nimport patrolUserRed from '../../../assets/boundaryMarker_images/preset_bm3.png'\r\n// 巡查中图标\r\nimport patrolUserBlue from '../../../assets/boundaryMarker_images/preset_sign3.png'\r\nimport {\r\n  // 实时位置\r\n  listPhoneUserToView\r\n} from '@/api/workRegulation'\r\nexport default {\r\n  name: 'workRegulation',\r\n  data () {\r\n    return {\r\n      legendData: [\r\n        {\r\n          type: 1,\r\n          name: '离线',\r\n          background: 'url(' + patrolUserGray + ')',\r\n          id: 'patrolUserGray'\r\n        },\r\n        {\r\n          type: 1,\r\n          name: '在线',\r\n          background: 'url(' + patrolUserRed + ')',\r\n          id: 'patrolUserRed'\r\n        }\r\n        // {\r\n        //   type: 1,\r\n        //   name: '巡查中',\r\n        //   background: 'url(' + patrolUserBlue + ')',\r\n        //   id: 'patrolUserBlue'\r\n        // }\r\n      ],\r\n      popupTemplate: {}, // 点击地图中点的弹框对象\r\n      loadComplete: false, // 地图加载完成状态\r\n      spinShow: true\r\n    }\r\n  },\r\n  components: {\r\n    Legend\r\n  },\r\n  mounted () {\r\n    // 加载地图\r\n    this.createMap()\r\n    // 获取实时位置数据\r\n    this.getLedgerList()\r\n  },\r\n  methods: {\r\n    // 获取实时位置数据\r\n    async getLedgerList () {\r\n      await listPhoneUserToView({\r\n        data: {}\r\n      }).then((res) => {\r\n        if (res.data.code === '0000') {\r\n          // 添加巡查人员\r\n          this.addPointToMap(res.data.data.data, config.inflectionPointcolor, 'graphicsLayer_patroluser')\r\n        }\r\n      }).catch(() => {\r\n        this.$Notice.error({ title: '服务器错误' })\r\n      })\r\n    },\r\n    /**\r\n     * @Description:初始化地图的函数\r\n     * @author 张淼\r\n     * @date 2019/5/5\r\n     */\r\n    async createMap () {\r\n      // 加载arcgis地图的依赖\r\n      let MapView = await arcgisPackage.MapView\r\n      let Map = await arcgisPackage.Map\r\n      let Basemap = await arcgisPackage.Basemap\r\n      let BasemapToggle = await arcgisPackage.BasemapToggle\r\n      // 天地图影像地图\r\n      let tdtylayer = await tdtlayer().then(res => { return res })\r\n      // 天地图矢量地图\r\n      let tdtylayer1 = await tdtclayer().then(res => { return res })\r\n      // 天地图的矢量标注图层\r\n      let tdtylayer2 = await tdtcNoteslayer().then(res => { return res })\r\n      // 天地图影像标注图层\r\n      let tdtylayer3 = await tdtyNoteslayer().then(res => { return res })\r\n      // 省界\r\n      let layerProvince = await shengjie().then(res => { return res })\r\n      let customBasemap = new Basemap({\r\n        baseLayers: [tdtylayer1, layerProvince, tdtylayer2],\r\n        title: '矢量地图',\r\n        id: 'myBasemap',\r\n        thumbnailUrl: Basemapthumbnail\r\n      })\r\n      let customBasemap1 = new Basemap({\r\n        baseLayers: [tdtylayer, layerProvince, tdtylayer3],\r\n        title: '影像地图',\r\n        id: 'myBasemap1',\r\n        thumbnailUrl: Basemapthumbnail1\r\n      })\r\n      this.map = new Map({\r\n        basemap: customBasemap1\r\n      })\r\n      this.view = new MapView({\r\n        map: this.map,\r\n        container: 'viewDiv',\r\n        center: config.centerPoint,\r\n        zoom: 7\r\n      })\r\n      this.view.when(wes => {\r\n        this.loadComplete = true\r\n      })\r\n      // 弹框内容\r\n      this.popupTemplate = {\r\n        title: '巡查人员详情',\r\n        content: [{\r\n          type: 'fields',\r\n          fieldInfos: [{\r\n            fieldName: '用户名'\r\n          },\r\n          {\r\n            fieldName: '手机号'\r\n          },\r\n          {\r\n            fieldName: '真实姓名'\r\n          },\r\n          {\r\n            fieldName: '经度'\r\n          },\r\n          {\r\n            fieldName: '纬度'\r\n          },\r\n          {\r\n            fieldName: '邮箱'\r\n          }\r\n          ]\r\n        }]\r\n      }\r\n      // 增加底图切换插件\r\n      let basemapToggle = new BasemapToggle({\r\n        view: this.view,\r\n        nextBasemap: customBasemap\r\n      })\r\n      this.view.ui.add(basemapToggle, 'top-right')\r\n      // 添加图例\r\n      this.view.ui.add(document.getElementById('legendbar'), 'bottom-left')\r\n    },\r\n    /**\r\n     * 添加添加巡查人员\r\n     * @param pointArray 点数组\r\n     * @param symbolColor 符号颜色\r\n     * @param layerId 自定义图层id\r\n     */\r\n    async addPointToMap (pointArray, symbolColor, layerId) {\r\n      let GraphicsLayer = await arcgisPackage.GraphicsLayer\r\n      let Graphic = await arcgisPackage.Graphic\r\n      let layer = this.map.findLayerById(layerId)\r\n      let point = {}\r\n      let pointGraphic\r\n      let textGraphic\r\n      let wayPoint // 不同巡查状态图标\r\n      let status // 巡查状态\r\n      let lon // 经度\r\n      let lat // 纬度\r\n      let features = []\r\n      if (layer) {\r\n        this.map.remove(layer)\r\n      }\r\n      let graphicsLayer = new GraphicsLayer({\r\n        id: layerId,\r\n        elevationInfo: 'on-the-ground',\r\n        title: '实时位置'\r\n      })\r\n      if (pointArray && pointArray.length > 0) {\r\n        for (let i = 0; i < pointArray.length; i++) {\r\n          if (pointArray[i].CH003 === null) {\r\n            continue\r\n          } else if (pointArray[i].CH003.indexOf('°') !== -1) { // 度分秒转为经纬度\r\n            lon = cacuDMS(pointArray[i].CH003)\r\n            lat = cacuDMS(pointArray[i].CH004)\r\n          } else if (pointArray[i].CH003.indexOf('.') !== -1) {\r\n            lon = pointArray[i].CH003\r\n            lat = pointArray[i].CH004\r\n          }\r\n          point = {\r\n            type: 'point', // autocasts as new Point()\r\n            longitude: lon,\r\n            latitude: lat\r\n          }\r\n          if (pointArray[i].CH005 === 0) { // 离线\r\n            wayPoint = patrolUserGray\r\n            status = '离线'\r\n          } else if (pointArray[i].CH005 === 1) { // 在线\r\n            wayPoint = patrolUserRed\r\n            status = '在线'\r\n          }\r\n          // else if (pointArray[i].CH005 === 2) { // 巡查中\r\n          //   wayPoint = patrolUserBlue\r\n          //   status = '巡查中'\r\n          // }\r\n          // 属性信息\r\n          let lineAtt = {\r\n            'id': pointArray[i].SA001,\r\n            '用户名': pointArray[i].SA008,\r\n            '手机号': '<a style=\"color: blue\">' + pointArray[i].SA012 + '</a>',\r\n            '真实姓名': pointArray[i].SA019,\r\n            '经度': lon,\r\n            '纬度': lat,\r\n            '邮箱': pointArray[i].SA013,\r\n            '状态': status\r\n          }\r\n          if (pointArray[i].CH005 === 0) {\r\n            lineAtt['手机号'] = '<a style=\"color: blue\">' + pointArray[i].SA012 + '</a>'\r\n          }\r\n          let markerSymbol = {\r\n            type: 'picture-marker', // autocasts as new SimpleMarkerSymbol()\r\n            url: wayPoint,\r\n            width: 20,\r\n            height: 20,\r\n            outline: { // autocasts as new SimpleLineSymbol()\r\n              color: [255, 255, 255],\r\n              width: 1\r\n            }\r\n          }\r\n          let textSymbol = {\r\n            type: 'text', // autocasts as new TextSymbol()\r\n            color: 'white',\r\n            haloColor: 'black',\r\n            haloSize: '1px',\r\n            text: pointArray[i].SA019,\r\n            xoffset: 0,\r\n            yoffset: -20,\r\n            font: { // autocast as new Font()\r\n              size: 12,\r\n              family: 'sans-serif',\r\n              weight: 'bold'\r\n            }\r\n          }\r\n          // 构造点对象\r\n          pointGraphic = new Graphic({\r\n            geometry: point,\r\n            symbol: markerSymbol,\r\n            attributes: lineAtt,\r\n            popupTemplate: this.popupTemplate\r\n          })\r\n          textGraphic = new Graphic({\r\n            geometry: point,\r\n            symbol: textSymbol\r\n          })\r\n          features.push(pointGraphic)\r\n          features.push(textGraphic)\r\n          graphicsLayer.add(pointGraphic)\r\n          graphicsLayer.add(textGraphic)\r\n        }\r\n      }\r\n      // 如果问题点对象图层存在，则将新点位添加到该对象\r\n      this.spinShow = false\r\n      this.map.add(graphicsLayer)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" rel=\"stylesheet/scss\" type=\"text/scss\" scoped>\r\n  .map-box{\r\n    width: 100%;\r\n    height: 100%;\r\n    position: relative;\r\n    /* 地图框样式 */\r\n    #viewDiv{\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    #legendbar {\r\n      &>span {\r\n        background: #08304a;\r\n        border: 1px solid #93c2e6;\r\n        opacity: .8;\r\n        color: #00e5ff;\r\n        font-size: 16px;\r\n        line-height: 30px;\r\n        text-align: center;\r\n        letter-spacing: 20px;\r\n        padding-left: 15px;\r\n        height: 30px;\r\n        display: block;\r\n      }\r\n      .legend_box {\r\n        background: rgba(1,51,102,.85);\r\n        border: 1px solid rgba(147,194,230,.8);\r\n        border-top: none;\r\n        padding: 10px 0;\r\n        color: #fff;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workRegulation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workRegulation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./workRegulation.vue?vue&type=template&id=2c7d554e&scoped=true&\"\nimport script from \"./workRegulation.vue?vue&type=script&lang=js&\"\nexport * from \"./workRegulation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./workRegulation.vue?vue&type=style&index=0&id=2c7d554e&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c7d554e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workRegulation.vue?vue&type=style&index=0&id=2c7d554e&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workRegulation.vue?vue&type=style&index=0&id=2c7d554e&lang=scss&rel=stylesheet%2Fscss&scoped=true&\""],"sourceRoot":""}