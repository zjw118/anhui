(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92fb88d0"],{"07b9":function(t,e,a){"use strict";var r=a("a7d8"),n=a.n(r);n.a},4634:function(t,e,a){for(var r=a("96dd"),n=a("7d56"),i=a("a6d5"),d=a("3f8b"),o=a("b8ea"),s=a("e3b3"),u=a("1277"),c=u("iterator"),l=u("toStringTag"),m=s.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=n(h),p=0;p<f.length;p++){var b,y=f[p],g=h[y],D=d[y],v=D&&D.prototype;if(v&&(v[c]||o(v,c,m),v[l]||o(v,l,y),s[y]=m,g))for(b in r)v[b]||i(v,b,r[b],!0)}},"5c46":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userManage"}},[a("QueryBox",{on:{searchSrldId:t.searchSrldId}},[a("Button",{staticClass:"btn-add",staticStyle:{"margin-right":"10px"},attrs:{type:"success",size:"small",icon:"md-add"},on:{click:function(e){e.stopPropagation(),t.$refs.userAdd.build=!0}}},[t._v("新建")])],1),a("div",{staticClass:"tab_box"},[a("Table",{ref:"table",attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns1,data:t.data1,size:"small","highlight-row":"","max-height":t.tableHeight}})],1),a("div",{staticClass:"page_box",attrs:{id:"pageBox"}},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,"show-elevator":"",size:"small","show-total":""},on:{"on-change":t.pageChange}})],1),a("UserAdd",{ref:"userAdd",attrs:{codeData:t.codeData,departmentList:t.departmentList},on:{getTableData:t.getTableData}}),a("UserEdit",{ref:"userEdit",attrs:{data:t.editDefaultData,codeData:t.codeData,departmentList:t.departmentList},on:{getTableData:t.getTableData}})],1)},n=[],i=a("99b4"),d=a("3ac9"),o=a("5f87"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user_add"}},[a("Modal",{attrs:{title:"新建"},on:{"on-cancel":function(e){t.AddData={}}},model:{value:t.build,callback:function(e){t.build=e},expression:"build"}},[a("Form",{ref:"add",staticStyle:{padding:"0 50px"},attrs:{model:t.AddData,rules:t.AddRule,"label-width":90}},[a("FormItem",{attrs:{prop:"addRealName",label:"姓名："}},[a("Input",{attrs:{placeholder:"请输入姓名",size:"default"},model:{value:t.AddData.addRealName,callback:function(e){t.$set(t.AddData,"addRealName","string"===typeof e?e.trim():e)},expression:"AddData.addRealName"}})],1),a("FormItem",{attrs:{prop:"addPhoneNumber",label:"手机号码："}},[a("Input",{attrs:{placeholder:"请输入手机号码",size:"default"},model:{value:t.AddData.addPhoneNumber,callback:function(e){t.$set(t.AddData,"addPhoneNumber","string"===typeof e?e.trim():e)},expression:"AddData.addPhoneNumber"}})],1),a("FormItem",{attrs:{prop:"addCode",label:"行政区划："}},[a("Cascader",{attrs:{data:t.codeData,size:"default","change-on-select":""},model:{value:t.AddData.addCode,callback:function(e){t.$set(t.AddData,"addCode",e)},expression:"AddData.addCode"}})],1),a("FormItem",{attrs:{prop:"addDepartment",label:"所属部门："}},[a("Select",{attrs:{size:"default"},model:{value:t.AddData.addDepartment,callback:function(e){t.$set(t.AddData,"addDepartment",e)},expression:"AddData.addDepartment"}},t._l(t.departmentList,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("确定")])],1)],1)],1)},u=[],c=(a("cc1d"),{name:"UserAdd",data:function(){return{AddData:{addRealName:"",addPhoneNumber:"",addCode:[],addDepartment:""},AddRule:{addRealName:[{required:!0,message:"姓名不能为空",trigger:"blur"}],addPhoneNumber:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[34578]\d{9}$/,message:"请填写正确的手机号码",trigger:"blur"}],addCode:[{required:!0,message:"行政区划不能为空",trigger:"change",type:"array"}],addDepartment:[{required:!0,message:"所属部门不能为空",trigger:"change",type:"number"}]},build:!1}},props:{codeData:{},departmentList:{}},mounted:function(){},methods:{sysAdd:function(){var t=this;Object(i["F"])({accessToken:Object(o["a"])(),validate:!0,data:{createBy:this.$store.getters.getloginInfor().userId,realName:this.AddData.addRealName,phoneNumber:this.AddData.addPhoneNumber,code:this.AddData.addCode[this.AddData.addCode.length-1].toString(),department:parseInt(this.AddData.addDepartment)}}).then((function(e){"0000"===e.data.code?(t.$emit("getTableData"),t.$Notice.success({title:"添加成功"}),t.build=!1,t.AddData={}):t.$Notice.error({title:e.data.msg})})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},addSubmit:function(){var t=this;this.$refs["add"].validate((function(e){e&&t.sysAdd()}))}}}),l=c,m=a("6691"),h=Object(m["a"])(l,s,u,!1,null,"d8a8f93e",null),f=h.exports,p=a("9bec"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"query-box"},[a("div",{ref:"queryBox",staticClass:"query-box-title",on:{click:function(e){t.show=!t.show}}},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t.queryData.length,expression:"queryData.length===0"}],staticClass:"search-title"},[t._v("查询条件")]),a("div",{attrs:{"search-items":""}},t._l(t.queryData,(function(e,r){return a("span",{key:r,staticClass:"queryTerm"},[a("strong",[t._v(t._s(e.name))]),a("span",[t._v("\n          "+t._s(e.text)+"\n        ")])])})),0),a("div",{staticStyle:{"text-align":"right"}},[a("Button",{attrs:{type:"primary",size:"small",icon:"ios-arrow-dropdown"}},[t._v("查询条件")]),t._t("default")],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"queryDown",staticClass:"query-down"},[a("div",{staticClass:"queryTerm"},[a("TextTerm",{attrs:{titName:"姓名",titKey:"realName"},on:{updataQueryData:t.updataQueryData,delQueryTrem:t.delQueryTrem}})],1),a("div",{staticClass:"queryTerm"},[a("TextTerm",{attrs:{titName:"手机号码",titKey:"phoneNumber"},on:{updataQueryData:t.updataQueryData,delQueryTrem:t.delQueryTrem}})],1),a("div",{staticClass:"queryTerm"},[a("CascadeTerm",{ref:"cascade",on:{updataQueryData:t.updataQueryData,delQueryTrem:t.delQueryTrem}})],1),a("div",{staticClass:"queryTerm"},[a("TextTerm",{attrs:{titName:"所属部门",titKey:"department"},on:{updataQueryData:t.updataQueryData,delQueryTrem:t.delQueryTrem}})],1),a("div",{staticStyle:{"text-align":"right","margin-top":"-45px"}},[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small",icon:"ios-search"},on:{click:t.search}},[t._v("搜索")]),a("Button",{attrs:{type:"primary",size:"small",icon:"md-close"},on:{click:function(e){t.show=!1}}},[t._v("取消")])],1)])])},y=[],g=(a("4b5e"),a("6c28"),a("4634"),a("7cfd"),a("9329")),D=a("49ae"),v={name:"queryBox",data:function(){return{show:!1,UnitName:"",queryData:[]}},components:{CascadeTerm:g["a"],TextTerm:D["a"]},mounted:function(){document.addEventListener("click",this.queryHide)},beforeDestroy:function(){document.removeEventListener("click",this.queryHide)},methods:{updataQueryData:function(t){""!==t.text?(this.queryData=this.queryData.filter((function(e){return e.name!==t.name})),this.queryData.push(t)):this.queryData=this.queryData.filter((function(e){return e.name!==t.name}))},delQueryTrem:function(t){this.queryData=this.queryData.filter((function(e){return e.key!==t}))},search:function(){console.log(this.queryData);var t={},e=!0,a=!1,r=void 0;try{for(var n,i=this.queryData[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var d=n.value;t[d.key]=d.value}}catch(o){a=!0,r=o}finally{try{e||null==i.return||i.return()}finally{if(a)throw r}}console.log(t),this.$emit("searchSrldId",t),this.show=!1},queryHide:function(t){this.$refs.queryBox.contains(t.target)||this.$refs.queryDown.contains(t.target)||(this.show=!1)}}},N=v,O=(a("a0f4"),Object(m["a"])(N,b,y,!1,null,"066b38be",null)),C=O.exports,k={name:"UserManage",data:function(){var t=this;return{code:"",limit:10,realName:"",phoneNumber:"",department:"",tableHeight:window.innerHeight-290,pageSize:Math.floor((window.innerHeight-290)/40)-1,pageNum:1,total:0,resId:"",delId:"",editDefaultData:{},columns1:[{title:"序号",align:"center",width:100,render:function(e,a){return e("span",a.index+(t.pageNum-1)*t.pageSize+1)}},{title:"姓名",key:"realName"},{title:"用户手机号",key:"phoneNumber"},{title:"行政区划",key:"codeName"},{title:"所属部门",key:"department"},{title:"操作",key:"action",width:270,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"warning",size:"small",icon:"md-create"},style:{marginRight:"5px"},on:{click:function(){t.editDefaultData=a.row,t.$refs.userEdit.edit=!0}}},"编辑"),e("Button",{props:{type:"primary",size:"small",icon:"md-refresh"},style:{marginRight:"5px"},on:{click:function(){t.resId=a.row.userId,t.resetPassword()}}},"重置密码"),e("Button",{props:{type:"error",size:"small",icon:"md-trash"},on:{click:function(){t.delId=a.row.userId,t.$Modal.confirm({title:"确认",content:"请问您确定要删除该用户么？",onOk:function(){t.sysDel()},onCancel:function(){}})}}},"删除")])}}],data1:[],codeData:[],departmentList:[],loading:!1}},components:{UserAdd:f,UserEdit:p["a"],QueryBox:C},mounted:function(){window.onresize=function(){this.tableHeight=window.innerHeight-290,this.pageSize=Math.floor((window.innerHeight-290)/40)-1}.bind(this),this.getTableData(),this.getCodeMenu(),this.getDepartmentList()},methods:{getTableData:function(){var t=this;this.loading=!0,Object(i["I"])({accessToken:Object(o["a"])(),validate:!0,data:{page:this.pageSize*(this.pageNum-1)+1,limit:this.pageSize,realName:this.realName,phoneNumber:this.phoneNumber,code:this.code,department:this.department}}).then((function(e){"0000"===e.data.code?(t.data1=e.data.data.rows,t.total=e.data.data.total,t.loading=!1):t.$Notice.error({title:e.data.msg})})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},resetPassword:function(){var t=this;Object(i["w"])({data:{id:this.resId}}).then((function(e){"0000"===e.data.code?(t.getTableData(),t.$Notice.success({title:"密码成功重置为手机号后六位"})):t.$Notice.error({title:"密码重置失败"})})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},sysDel:function(){var t=this;Object(i["G"])({accessToken:Object(o["a"])(),validate:!0,data:{userId:this.delId}}).then((function(e){"0000"===e.data.code?(t.getTableData(),t.$Notice.success({title:"删除成功"})):t.$Notice.error({title:"删除失败"})})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},getCodeMenu:function(){var t=this;Object(d["n"])({data:{}}).then((function(e){"0000"===e.data.code&&(t.codeData=e.data.data,t.codeData=t.valComCode(t.codeData))})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},valComCode:function(t){for(var e in t)t[e].value=t[e].comCode,this.valComCode(t[e].children);return t},getDepartmentList:function(){var t=this;Object(i["n"])({data:{}}).then((function(e){"0000"===e.data.code&&(t.departmentList=e.data.data)})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},searchSrldId:function(t){this.code=t.code,this.department=t.department,this.phoneNumber=t.phoneNumber,this.realName=t.realName,this.getTableData()},pageChange:function(t){this.page=t}}},w=k,T=(a("07b9"),Object(m["a"])(w,r,n,!1,null,"0698d35b",null));e["default"]=T.exports},"99b4":function(t,e,a){"use strict";a.d(e,"I",(function(){return n})),a.d(e,"F",(function(){return i})),a.d(e,"H",(function(){return d})),a.d(e,"G",(function(){return o})),a.d(e,"n",(function(){return s})),a.d(e,"w",(function(){return u})),a.d(e,"t",(function(){return c})),a.d(e,"x",(function(){return l})),a.d(e,"y",(function(){return m})),a.d(e,"A",(function(){return h})),a.d(e,"z",(function(){return f})),a.d(e,"c",(function(){return p})),a.d(e,"b",(function(){return b})),a.d(e,"a",(function(){return y})),a.d(e,"E",(function(){return g})),a.d(e,"D",(function(){return D})),a.d(e,"C",(function(){return v})),a.d(e,"f",(function(){return N})),a.d(e,"e",(function(){return O})),a.d(e,"d",(function(){return C})),a.d(e,"j",(function(){return k})),a.d(e,"u",(function(){return w})),a.d(e,"h",(function(){return T})),a.d(e,"k",(function(){return x})),a.d(e,"v",(function(){return S})),a.d(e,"i",(function(){return j})),a.d(e,"r",(function(){return E})),a.d(e,"B",(function(){return L})),a.d(e,"o",(function(){return I})),a.d(e,"m",(function(){return $})),a.d(e,"p",(function(){return q})),a.d(e,"q",(function(){return A})),a.d(e,"s",(function(){return _})),a.d(e,"l",(function(){return M})),a.d(e,"g",(function(){return z}));var r=a("b775"),n=function(t){return Object(r["a"])({url:"/sys/sysMobileUser/list",method:"post",data:t})},i=function(t){return Object(r["a"])({url:"/sys/sysMobileUser/add",method:"post",data:t})},d=function(t){return Object(r["a"])({url:"/sys/sysMobileUser/edit",method:"post",data:t})},o=function(t){return Object(r["a"])({url:"/sys/sysMobileUser/delete",method:"post",data:t})},s=function(t){return Object(r["a"])({url:"/sys/sysDepartment/getDepartmentList",method:"post",data:t})},u=function(t){return Object(r["a"])({url:"/sys/sysMobileUser/resetPassword",method:"post",data:t})},c=function(t){return Object(r["a"])({url:"/sys/role/list",method:"post",data:t})},l=function(t){return Object(r["a"])({url:"/sys/resource/list",method:"post",data:t})},m=function(t){return Object(r["a"])({url:"/sys/role/add",method:"post",data:t})},h=function(t){return Object(r["a"])({url:"/sys/role/edit",method:"post",data:t})},f=function(t){return Object(r["a"])({url:"/sys/role/delete",method:"post",data:t})},p=function(t){return Object(r["a"])({url:"/sys/sysAppVersion/list",method:"post",data:t})},b=function(t){return Object(r["a"])({url:"/sys/sysAppVersion/delete",method:"post",data:t})},y=function(t){return Object(r["a"])({url:"/sys/sysAppVersion/add",method:"post",data:t})},g=function(t){return Object(r["a"])({url:"/sys/sysShapeVersion/list",method:"post",data:t})},D=function(t){return Object(r["a"])({url:"/sys/sysShapeVersion/delete",method:"post",data:t})},v=function(t){return Object(r["a"])({url:"/sys/sysShapeVersion/add",method:"post",data:t})},N=function(t){return Object(r["a"])({url:"/sys/sysDbVersion/list",method:"post",data:t})},O=function(t){return Object(r["a"])({url:"/sys/sysDbVersion/delete",method:"post",data:t})},C=function(t){return Object(r["a"])({url:"/sys/sysDbVersion/add",method:"post",data:t})},k=function(t){return Object(r["a"])({url:"/ktdb/lmMarkerMobile/deletedList",method:"post",data:t})},w=function(t){return Object(r["a"])({url:"/ktdb/lmMarkerMobile/recover",method:"post",data:t})},T=function(t){return Object(r["a"])({url:"/ktdb/lmMarkerMobile/deleteForever",method:"post",data:t})},x=function(t){return Object(r["a"])({url:"/ktdb/lmBoard/deletedList",method:"post",data:t})},S=function(t){return Object(r["a"])({url:"/ktdb/lmBoard/recover",method:"post",data:t})},j=function(t){return Object(r["a"])({url:"/ktdb/lmBoard/deleteForever",method:"post",data:t})},E=function(t){return Object(r["a"])({url:"/ktdb/shpBatch/getNewList",method:"post",data:t})},L=function(t){return Object(r["a"])({url:"/ktdb/shpBatch/importPreData",method:"post",data:t})},I=function(t){return Object(r["a"])({url:"/sys/sysLog/list",method:"post",data:t})},$=function(t){return Object(r["a"])({url:"/sys/sysLog/exportExcel",method:"post",data:t})},q=function(t){return Object(r["a"])({url:"/sys/login/list",method:"post",data:t})},A=function(t){return Object(r["a"])({url:"/user/listUser",method:"post",data:t})},_=function(t){return Object(r["a"])({url:"/user/insertUser",method:"post",data:t})},M=function(t){return Object(r["a"])({url:"/user/updateUser",method:"post",data:t})},z=function(t){return Object(r["a"])({url:"/user/deleteUser",method:"post",data:t})}},"9bec":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userEdit"}},[a("Modal",{attrs:{title:"编辑"},on:{"on-ok":t.sysEdit},model:{value:t.edit,callback:function(e){t.edit=e},expression:"edit"}},[a("Form",{ref:"edit",staticStyle:{padding:"0 50px"},attrs:{model:t.EditData,rules:t.EditRule,"label-width":90}},[a("FormItem",{attrs:{prop:"id",label:"ID："}},[t._v("\n        "+t._s(t.EditData.id)+"\n      ")]),a("FormItem",{attrs:{prop:"realName",label:"姓名："}},[a("Input",{attrs:{placeholder:"请输入姓名",size:"default"},model:{value:t.EditData.realName,callback:function(e){t.$set(t.EditData,"realName","string"===typeof e?e.trim():e)},expression:"EditData.realName"}})],1),a("FormItem",{attrs:{prop:"phoneNumber",label:"手机号码："}},[t._v("\n        "+t._s(t.EditData.phoneNumber)+"\n      ")]),a("FormItem",{attrs:{prop:"editCode",label:"行政区划："}},[a("Cascader",{attrs:{data:t.codeData,size:"default","change-on-select":""},model:{value:t.EditData.editCode,callback:function(e){t.$set(t.EditData,"editCode",e)},expression:"EditData.editCode"}})],1),a("FormItem",{attrs:{prop:"departmentId",label:"所属部门："}},[a("Select",{attrs:{size:"default"},model:{value:t.EditData.departmentId,callback:function(e){t.$set(t.EditData,"departmentId",e)},expression:"EditData.departmentId"}},t._l(t.departmentList,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.editSubmit}},[t._v("确定")])],1)],1)],1)},n=[],i=(a("cc1d"),a("99b4")),d=a("5f87"),o={name:"UserEdit",data:function(){return{EditRule:{realName:[{required:!0,message:"姓名不能为空",trigger:"blur"}],editCode:[{required:!0,message:"行政区划不能为空",trigger:"change",type:"array"}],departmentId:[{required:!0,message:"所属部门不能为空",trigger:"change",type:"number"}]},edit:!1,EditData:{}}},props:{codeData:{},departmentList:{},data:{}},watch:{data:function(){this.dataHandle()}},mounted:function(){},methods:{sysEdit:function(){var t=this;Object(i["H"])({accessToken:Object(d["a"])(),validate:!0,data:{updateBy:this.$store.getters.getloginInfor().userId,id:this.EditData.id,realName:this.EditData.realName,phoneNumber:this.EditData.phoneNumber,code:this.EditData.editCode[this.EditData.editCode.length-1].toString(),department:this.EditData.departmentId}}).then((function(e){"0000"===e.data.code?(t.$emit("getTableData"),t.$Notice.success({title:"修改成功"})):t.$Notice.error({title:"修改失败"})})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},dataHandle:function(){this.EditData.id=this.data.id,this.EditData.realName=this.data.realName,this.EditData.phoneNumber=this.data.phoneNumber,this.$set(this.EditData,"departmentId",this.data.departmentId);var t=[];this.getDefaultCode(this.codeData,this.data.code,t)},getDefaultCode:function(t,e,a){for(var r in t)t[r].value===e?(a.push(t[r].value),this.EditData.editCode=JSON.parse(JSON.stringify(a))):(a.push(t[r].value),0===t[r].children.length&&a.pop(),this.getDefaultCode(t[r].children,e,a))},editSubmit:function(){var t=this;this.$refs["edit"].validate((function(e){e&&(t.sysEdit(),t.edit=!1)}))}}},s=o,u=a("6691"),c=Object(u["a"])(s,r,n,!1,null,"81533598",null);e["a"]=c.exports},"9f7e":function(t,e,a){a("f9a5")&&"g"!=/./g.flags&&a("d3d8").f(RegExp.prototype,"flags",{configurable:!0,get:a("e7a1")})},a0f4:function(t,e,a){"use strict";var r=a("a81c"),n=a.n(r);n.a},a7d8:function(t,e,a){},a81c:function(t,e,a){},cc1d:function(t,e,a){"use strict";a("9f7e");var r=a("8cac"),n=a("e7a1"),i=a("f9a5"),d="toString",o=/./[d],s=function(t){a("a6d5")(RegExp.prototype,d,t,!0)};a("0cc1")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?s((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?n.call(t):void 0)})):o.name!=d&&s((function(){return o.call(this)}))},e7a1:function(t,e,a){"use strict";var r=a("8cac");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}}}]);
//# sourceMappingURL=chunk-92fb88d0.50134c80.js.map