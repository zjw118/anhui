(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-abbf7e12"],{"0699":function(t,e,n){},"39f3":function(t,e,n){t.exports=n.p+"img/Basemapthumbnail1.5f8d6db2.png"},"3ac9":function(t,e,n){"use strict";n.d(e,"o",function(){return r}),n.d(e,"n",function(){return i}),n.d(e,"p",function(){return o}),n.d(e,"g",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"l",function(){return s}),n.d(e,"k",function(){return d}),n.d(e,"i",function(){return l}),n.d(e,"h",function(){return p}),n.d(e,"j",function(){return f}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return h}),n.d(e,"d",function(){return b}),n.d(e,"q",function(){return g}),n.d(e,"c",function(){return v}),n.d(e,"a",function(){return y}),n.d(e,"b",function(){return k});var a=n("b775"),r=function(t){return Object(a["a"])({url:"/ktdb/lmPoint/getPointList",method:"post",data:t})},i=function(t){return Object(a["a"])({url:"/sys/menu/getMenu",method:"post",data:t})},o=function(t){return Object(a["a"])({url:"/ktdb/lmMarkerMobile/getPreMarkerList",method:"post",data:t})},u=function(t){return Object(a["a"])({url:"/ktdb/lmBoard/getPreLmBoardList",method:"post",data:t})},c=function(t){return Object(a["a"])({url:"/ktdb/lmMarkerMobile/getMarkerByCoordinate",method:"post",data:t})},s=function(t){return Object(a["a"])({url:"/ktdb/lmMarkerMobile/getAllPreMarkerList",method:"post",data:t})},d=function(t){return Object(a["a"])({url:"/ktdb/lmBoard/getAllPreBoard",method:"post",data:t})},l=function(t){return Object(a["a"])({url:"/ktdb/lmMarkerMobile/getAllMarkerList",method:"post",data:t})},p=function(t){return Object(a["a"])({url:"/ktdb/lmBoard/getAllBoard",method:"post",data:t})},f=function(t){return Object(a["a"])({url:"/ktdb/lmPoint/getAllPoint",method:"post",data:t})},m=function(t){return Object(a["a"])({url:"/ktdb/lmPoint/export_Excel",method:"post",data:t})},h=function(t){return Object(a["a"])({url:"/ktdb/lmMarkerMobile/export_PreExcel",method:"post",data:t})},b=function(t){return Object(a["a"])({url:"/ktdb/lmBoard/export_PreExcel",method:"post",data:t})},g=function(t){return Object(a["a"])({url:"ktdb/dataRedlineRegister/list",method:"post",data:t})},v=function(t){return Object(a["a"])({url:"ktdb/environment/bottomChart/list",method:"post",data:t})},y=function(t){return Object(a["a"])({url:"ktdb/environment/bottomChart/add",method:"post",data:t})},k=function(t){return Object(a["a"])({url:"ktdb/environment/bottomChart/delete",method:"post",data:t})}},"42e8":function(t,e,n){t.exports=n.p+"img/Basemapthumbnail.6dc37597.png"},6666:function(t,e,n){},"72c0":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"tablet"}},[n("div",{staticClass:"queryBox"},[n("QueryBox",{ref:"getQuery",staticStyle:{width:"calc(100% - 80px)"},attrs:{formArr:t.queryFrom},on:{query:t.getQueryData}}),n("div",{staticClass:"queryBtns"},[n("Button",{staticClass:"btn-add",attrs:{type:"success",size:"small",icon:"md-add"},on:{click:function(e){e.stopPropagation(),t.$refs.reproduction.reproductionBuild=!0}}},[t._v("新建")])],1)],1),n("div",{staticClass:"content_box"},[n("div",[n("Table",{attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns1,data:t.data1,"highlight-row":"","max-height":t.tableHeight}}),n("div",{staticClass:"page_box"},[n("Page",{attrs:{total:t.total,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.pageChange}})],1)],1)]),n("div",{staticClass:"checking_box",class:{addActive:t.addActive}},[n("checkInfoMap",{ref:"checkInfoMap",attrs:{serviceUrl:t.serviceUrl},on:{signOut:t.signOut}})],1),n("reproductionAdd",{ref:"reproduction",on:{getTableData:t.getClearQueryData}})],1)},r=[],i=n("cebc"),o=n("aff7"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map-box"},[n("div",{ref:"viewDiv",attrs:{id:"viewDiv"}}),n("Button",{staticClass:"sign-btn",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("signOut",!1)}}},[t._v("返回")])],1)},c=[],s=(n("96cf"),n("3b8d")),d=n("9ed9"),l=n("149e"),p=n("f831"),f=n("42e8"),m=n.n(f),h=n("39f3"),b=n.n(h),g={name:"checkInfoMap",data:function(){return{map:{},view:{}}},computed:{},props:{serviceUrl:String},components:{},watch:{},mounted:function(){this.createMap()},methods:{createMap:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n,a,r,i,o,u,c,s,f,h;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].MapView;case 2:return e=t.sent,t.next=5,d["a"].Map;case 5:return n=t.sent,t.next=8,d["a"].Basemap;case 8:return a=t.sent,t.next=11,d["a"].FeatureLayer;case 11:return t.sent,t.next=14,d["a"].BasemapToggle;case 14:return r=t.sent,t.next=17,Object(p["f"])().then(function(t){return t});case 17:return i=t.sent,t.next=20,Object(p["e"])().then(function(t){return t});case 20:return o=t.sent,t.next=23,Object(p["d"])().then(function(t){return t});case 23:return u=t.sent,t.next=26,Object(p["g"])().then(function(t){return t});case 26:c=t.sent,s=new a({baseLayers:[o,u],title:"矢量地图",id:"myBasemap",thumbnailUrl:m.a}),f=new a({baseLayers:[i,c],title:"影像地图",id:"myBasemap1",thumbnailUrl:b.a}),this.map=new n({basemap:f}),this.view=new e({map:this.map,container:"viewDiv",center:l["a"].centerPoint,zoom:7}),h=new r({view:this.view,nextBasemap:s}),this.view.ui.add(h,"top-right");case 33:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),addFeatureLayer:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].FeatureLayer;case 2:e=t.sent,n=new e({url:this.serviceUrl,outFields:["*"]}),this.map.layers.add(n);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),addTileLayer:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].MapImageLayer;case 2:e=t.sent,n=new e({url:this.serviceUrl}),this.map.layers.add(n);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),initCom:function(t){this.map.remove(this.insercLayer),this.map.layers.removeAll(),t?this.addFeatureLayer(this.serviceUrl):this.addTileLayer()}}},v=g,y=(n("f873"),n("2877")),k=Object(y["a"])(v,u,c,!1,null,"42f4aea9",null),w=k.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"taskAdd"}},[n("Modal",{attrs:{title:"新建地图图层"},on:{"on-cancel":t.reset},model:{value:t.reproductionBuild,callback:function(e){t.reproductionBuild=e},expression:"reproductionBuild"}},[n("Form",{ref:"add",staticStyle:{padding:"0 50px"},attrs:{model:t.AddData,rules:t.ruleValidate,"label-width":90}},[n("FormItem",{attrs:{prop:"name",label:"图层名称："}},[n("Input",{attrs:{placeholder:"请输入图层名称",size:"default"},model:{value:t.AddData.name,callback:function(e){t.$set(t.AddData,"name","string"===typeof e?e.trim():e)},expression:"AddData.name"}})],1),n("FormItem",{attrs:{prop:"type",label:"服务类型："}},[n("Select",{model:{value:t.AddData.type,callback:function(e){t.$set(t.AddData,"type",e)},expression:"AddData.type"}},[n("Option",{attrs:{value:0}},[t._v("影像")]),n("Option",{attrs:{value:1}},[t._v("矢量")])],1)],1),n("FormItem",{attrs:{prop:"url",label:"访问地址："}},[n("Input",{attrs:{placeholder:"请输入访问地址",size:"default"},model:{value:t.AddData.url,callback:function(e){t.$set(t.AddData,"url","string"===typeof e?e.trim():e)},expression:"AddData.url"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("确定")])],1)],1)],1)},O=[],B=(n("7f7f"),n("3ac9")),D={name:"TaskAdd",data:function(){return{AddData:{name:"",url:"",type:0,createBy:12},ruleValidate:{name:[{required:!0,message:"任务名称必须填写",trigger:"blur"}],url:[{required:!0,message:"任务名称必须填写",trigger:"blur"}]},reproductionBuild:!1}},methods:{addSubmit:function(){var t=this;this.$refs.add.validate(function(e){e&&Object(B["a"])({data:{name:t.AddData.name,url:t.AddData.url,type:t.AddData.type,createBy:t.AddData.createBy}}).then(function(e){"0000"===e.data.code?(t.$emit("getTableData"),t.$Notice.success({title:"创建图层成功"}),t.reproductionBuild=!1,t.AddData={name:"",url:"",createBy:12},t.reset()):t.$Message.info(e.data.msg)})})},reset:function(){this.AddData={name:"",url:"",type:0,createBy:12},this.$refs.add.resetFields()}}},j=D,A=Object(y["a"])(j,x,O,!1,null,"815f3dba",null),M=A.exports,L={name:"DataTable",data:function(){var t=this;return{tableHeight:48*Math.floor((window.innerHeight-300-40)/48)+40,queryData:{},columns1:[{title:"序号",key:"index",width:100,align:"center",render:function(e,n){return e("span",n.index+(t.pageNum-1)*t.pageSize+1)}},{title:"图层名称",align:"center",minWidth:150,key:"name"},{title:"发布时间",align:"center",width:250,key:"createDate"},{title:"访问地址",align:"center",minWidth:150,key:"url"},{title:"服务类型",align:"center",minWidth:80,render:function(t,e){return t("span",e.row.type?"矢量":"影像")}},{title:"操作",key:"address",width:170,align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small",icon:"md-eye"},style:{marginRight:"5px"},on:{click:function(){t.addActive=!0,t.serviceUrl=n.row.url,t.$refs.checkInfoMap.initCom(n.row.type)}}},"查看"),e("Button",{props:{type:"error",size:"small",icon:"md-trash"},on:{click:function(){t.infoId=n.row.id,t.$Modal.confirm({title:"确认",content:"请问您确定要删除该图层吗？",onOk:function(){t.infoDel()},onCancel:function(){}})}}},"删除")])}}],data1:[],obj:{},total:0,pageNum:1,pageSize:Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),infoId:"",loading:!1,addActive:!1,serviceUrl:""}},components:{QueryBox:o["a"],checkInfoMap:w,reproductionAdd:M},computed:{queryFrom:function(){return[{type:1,field:"name",title:"图层名称"}]}},created:function(){this.getSurveyTableList()},mounted:function(){var t=this;window.addEventListener("resize",function(){t.pageSize=Math.floor((window.innerHeight-350)/48)+1,t.getSurveyTableList()},!1)},methods:{getQueryData:function(t){this.queryData=t,this.pageNum=1,this.getSurveyTableList()},getClearQueryData:function(){this.queryData={},this.pageNum=1,this.getSurveyTableList(),this.$refs.getQuery.cleardata()},getSurveyTableList:function(){var t=this;this.loading=!0,Object(B["c"])({data:Object(i["a"])({pageSize:this.pageSize,pageNum:this.pageNum},this.queryData)}).then(function(e){"0000"===e.data.code&&(t.data1=e.data.data.rows,t.total=e.data.data.total,t.loading=!1)}).catch(function(){t.$Notice.error({title:"服务器错误"})})},pageChange:function(t){this.pageNum=t,this.getSurveyTableList()},infoDel:function(){var t=this;Object(B["b"])({data:{id:[this.infoId]}}).then(function(e){"0000"===e.data.code?(t.getSurveyTableList(),t.$Notice.success({title:"删除成功"})):t.$Notice.error({title:"删除失败"})}).catch(function(){t.$Notice.error({title:"服务器错误"})})},signOut:function(t){this.addActive=t}}},$=L,C=(n("a271"),Object(y["a"])($,a,r,!1,null,"155e775e",null));e["default"]=C.exports},"7f7f":function(t,e,n){var a=n("86cc").f,r=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in r||n("9e1e")&&a(r,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},a271:function(t,e,n){"use strict";var a=n("0699"),r=n.n(a);r.a},f873:function(t,e,n){"use strict";var a=n("6666"),r=n.n(a);r.a}}]);
//# sourceMappingURL=chunk-abbf7e12.f6c7af61.js.map