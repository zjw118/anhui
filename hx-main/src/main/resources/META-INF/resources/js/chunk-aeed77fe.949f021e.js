(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aeed77fe"],{"0554":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"tablet"}},[a("div",{staticClass:"queryBox"},[a("QueryBox",{staticStyle:{width:"100%"},attrs:{formArr:t.queryFrom},on:{query:t.getQueryData}})],1),a("div",{staticClass:"content_box"},[a("div",[a("Table",{attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns1,data:t.data1,"highlight-row":"","max-height":t.tableHeight}}),a("div",{staticClass:"page_box"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.pageNum,"show-total":""},on:{"update:current":function(e){t.pageNum=e},"on-change":t.pageChange}})],1)],1)]),a("div",{staticClass:"extract_box",class:{addActive:t.addActive}},[a("activitiesInspectTableMap",{ref:"activitiesInspectTableMap",on:{signOut:t.signOut}})],1),a("div",{staticClass:"detail-table-box",class:{detailActive:t.detailActive}},[a("div",{staticClass:"queryBox",staticStyle:{"text-align":"right"}},[a("Button",{staticClass:"btn-add",attrs:{type:"success",size:"small",icon:"md-add"},on:{click:t.openAdd}},[t._v("添加至台账")]),a("Button",{staticClass:"ml10",attrs:{type:"primary",size:"small"},on:{click:function(e){t.detailActive=!1}}},[t._v("返回")])],1),a("div",{staticClass:"detail-table"},[a("Table",{attrs:{data:t.switchShowData,border:"",stripe:"",loading:t.loading2,"highlight-row":"",columns:t.columns2},on:{"on-select-all":t.selectDetailAll,"on-select-all-cancel":t.unSelectDetailAll,"on-select":t.selectDetail,"on-select-cancel":t.unSelectDetail}}),a("Page",{attrs:{total:t.total2,current:t.pageNum2,"page-size":t.pageSize2},on:{"update:current":function(e){t.pageNum2=e}}})],1)]),a("Modal",{attrs:{title:"添加至台账"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("Form",{attrs:{"label-width":120}},[a("FormItem",{attrs:{label:"是否新建台账"}},[a("RadioGroup",{model:{value:t.isCreateAccount,callback:function(e){t.isCreateAccount=e},expression:"isCreateAccount"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!t.isCreateAccount,expression:"!isCreateAccount"}],attrs:{id:"notCreateAccount"}},[a("Table",{staticStyle:{"margin-left":"-120px"},attrs:{data:t.data3,columns:t.columns3,border:"","highlight-row":"","max-height":250},on:{"on-current-change":t.changeAccount}}),a("Page",{staticStyle:{width:"100%",padding:"15px 0","text-align":"right"},attrs:{total:t.total3,"page-size":t.pageSize3,current:t.pageNum3,"show-total":""},on:{"update:current":function(e){t.pageNum3=e},"on-change":t.pageChange}})],1)],1),a("Form",{directives:[{name:"show",rawName:"v-show",value:t.isCreateAccount,expression:"isCreateAccount"}],ref:"addForm",attrs:{model:t.AddData,rules:t.ruleValidate,"label-width":120}},[a("FormItem",{attrs:{prop:"name",label:"台账名称："}},[a("Input",{attrs:{placeholder:"请输入任务名称",size:"default"},model:{value:t.AddData.name,callback:function(e){t.$set(t.AddData,"name","string"===typeof e?e.trim():e)},expression:"AddData.name"}})],1),a("FormItem",{attrs:{prop:"remark",label:"说明："}},[a("Input",{attrs:{placeholder:"请输入任务名称",size:"default",type:"textarea"},model:{value:t.AddData.remark,callback:function(e){t.$set(t.AddData,"remark","string"===typeof e?e.trim():e)},expression:"AddData.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.clickAdd}},[t._v("确定")])],1)],1)],1)},i=[],r=(a("ac6a"),a("7f7f"),a("cebc")),c=a("aff7"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map-box"},[a("div",{ref:"viewDiv",attrs:{id:"viewDiv"}}),a("Button",{staticClass:"sign-btn",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("signOut",!1)}}},[t._v("返回")])],1)},s=[],u=(a("96cf"),a("3b8d")),d=a("9ed9"),l=a("149e"),h=a("f831"),m=a("42e8"),g=a.n(m),p=a("39f3"),f=a.n(p),b={name:"checkInfoMap",data:function(){return{map:{},view:{}}},computed:{},props:{},components:{},watch:{},mounted:function(){this.createMap()},methods:{createMap:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a,n,i,r,c,o,s,u,m,p,b;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["a"].MapView;case 2:return e=t.sent,t.next=5,d["a"].Map;case 5:return a=t.sent,t.next=8,d["a"].Basemap;case 8:return n=t.sent,t.next=11,d["a"].BasemapToggle;case 11:return i=t.sent,t.next=14,Object(h["h"])().then(function(t){return t});case 14:return r=t.sent,t.next=17,Object(h["g"])().then(function(t){return t});case 17:return c=t.sent,t.next=20,Object(h["f"])().then(function(t){return t});case 20:return o=t.sent,t.next=23,Object(h["i"])().then(function(t){return t});case 23:return s=t.sent,t.next=26,Object(h["e"])().then(function(t){return t});case 26:u=t.sent,m=new n({baseLayers:[c,u,o],title:"矢量地图",id:"myBasemap",thumbnailUrl:g.a}),p=new n({baseLayers:[r,u,s],title:"影像地图",id:"myBasemap1",thumbnailUrl:f.a}),this.map=new a({basemap:p}),this.view=new e({map:this.map,container:"viewDiv",center:l["a"].centerPoint,zoom:7}),b=new i({view:this.view,nextBasemap:m}),this.view.ui.add(b,"top-right");case 33:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),initCom:function(t){this.map.remove(this.insercLayer),this.view.graphics.removeAll()}}},v=b,y=(a("2b8ce"),a("2877")),w=Object(y["a"])(v,o,s,!1,null,"45a26f73",null),A=w.exports,k=a("91b2"),x={name:"extracTable",data:function(){var t=this;return{queryData:{},tableHeight:48*Math.floor((window.innerHeight-300-40)/48)+40,columns1:[{title:"序号",key:"index",width:100,align:"center",render:function(e,a){return e("span",a.index+(t.pageNum-1)*t.pageSize+1)}},{title:"名称",align:"center",minWidth:200,key:"name"},{title:"说明",align:"center",minWidth:250,key:"remark"},{title:"底图服务",align:"center",width:300,key:"url"},{title:"操作",key:"address",width:150,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small",icon:"md-eye"},style:{marginRight:"5px"},on:{click:function(){t.detailActive=!0,t.getDetailList(a.row.id)}}},"查看人类活动点")])}}],data1:[],total:0,pageNum:1,pageSize:Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),loading:!1,addActive:!1,modalStatus:"",AddData:{name:"",remark:""},ruleValidate:{name:[{required:!0,message:"台账名称必须填写",trigger:"blur"}],remark:[{required:!0,message:"台账说明必须填写",trigger:"blur"}]},addTypeList:[{value:"1",label:"type1"},{value:"2",label:"type2"}],detailActive:!1,data2:[],columns2:[{type:"selection",width:60,align:"center"},{title:"序号",key:"index",width:100,align:"center",render:function(e,a){return e("span",a.index+(t.pageNum-1)*t.pageSize+1)}},{title:"活动名称",align:"center",minWidth:200,key:"activeName"},{title:"活动类型",align:"center",minWidth:200,key:"activeType"},{title:"所属区域类型",align:"center",minWidth:200,key:"region"},{title:"位置",align:"center",minWidth:200,key:"position"},{title:"面积（公顷）",align:"center",minWidth:200,key:"area"}],total2:0,pageNum2:1,pageSize2:10,loading2:!1,isCreateAccount:1,pageNum3:1,pageSize3:10,total3:0,data3:[],columns3:[{title:"序号",key:"index",align:"center",render:function(e,a){return e("span",a.index+10*(t.pageNum3-1)+1)}},{title:"台账名称",key:"name",align:"center"}],currentRow:null,modal:!1}},components:{QueryBox:c["a"],activitiesInspectTableMap:A},computed:{queryFrom:function(){return[{type:1,field:"name",title:"任务名称"}]},switchShowData:function(){return this.data2.length?(console.log(this.data2),this.data2.slice((this.pageNum2-1)*this.pageSize2,this.pageNum2*this.pageSize2)):[]}},created:function(){this.getTableList(),this.getAccountList()},mounted:function(){var t=this;window.addEventListener("resize",function(){t.tableHeight=48*Math.floor((window.innerHeight-300-40)/48)+40,t.pageSize=Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),t.getTableList()},!1)},watch:{queryData:function(){this.getTableList()}},methods:{getQueryData:function(t){this.queryData=t,this.pageNum=1,this.getTableList()},getTableList:function(){var t=this;this.loading=!0,Object(k["m"])({data:Object(r["a"])({pageSize:this.pageSize,pageNum:this.pageNum},this.queryData)}).then(function(e){"0000"===e.data.code&&(t.data1=e.data.data.rows,t.total1=e.data.data.total,t.loading=!1)}).catch(function(){t.$Notice.error({title:"服务器错误"})})},pageChange:function(t){this.pageNum=t,this.getTableList()},signOut:function(t){this.addActive=t},getDetailList:function(t){var e=this;this.loading2=!0,Object(k["k"])({data:{pageNum:this.pageNum2,pageSize:this.pageSize2,id:t}}).then(function(t){e.loading2=!1,"0000"===t.data.code?(e.data2=t.data.data.data,e.total2=e.data2.total):(e.data2=[],e.$Notice.error({title:"获取人类活动详情列表失败",desc:t.data.msg}))})},getAccountList:function(){var t=this;Object(k["g"])({data:{pageSize:this.pageSize3,pageNum:this.pageNum3}}).then(function(e){"0000"===e.data.code?(t.data3=e.data.data.rows,t.total3=e.data.data.total):t.$Notice.error({title:"获取人类活动台账失败",desc:e.data.msg})})},createAndAdd:function(t){var e=this;Object(k["d"])({data:{name:this.AddData.name,id:t,remark:this.AddData.remark,createBy:1}}).then(function(t){"0000"===t.data.code?e.$Notice.success({title:"成功添加至新台账"}):e.$Notice.error({title:"添加至新台账失败",desc:t.data.msg})})},selectDetail:function(t,e){this.data2.some(function(t){return e.cd001===t.cd001&&(t._checked=!0,!0)})},unSelectDetail:function(t,e){this.data2.some(function(t){return e.id===t.id&&(t._checked=!1,!0)})},selectDetailAll:function(){this.data2.slice((this.pageNum2-1)*this.pageSize2,this.pageNum2*this.pageSize2).forEach(function(t){t._checked=!0})},unSelectDetailAll:function(){this.data2.slice((this.pageNum2-1)*this.pageSize2,this.pageNum2*this.pageSize2).forEach(function(t){t._checked=!1})},addToGroup:function(t,e){var a=this;Object(k["a"])({data:{groupId:t,id:e}}).then(function(t){"0000"===t.data.code?a.$Notice.success({title:"添加到台账成功"}):a.$Notice.error({title:"添加人类活动至台账失败",desc:t.data.msg})})},clickAdd:function(){var t=this.data2.filter(function(t){return t._checked}).map(function(t){return t.cd001});this.isCreateAccount?this.createAndAdd(t):this.addToGroup(this.currentRow.id,t)},changeAccount:function(t){this.currentRow=t},openAdd:function(){this.modal=!0}}},j=x,N=(a("19f7"),Object(y["a"])(j,n,i,!1,null,"80cd304a",null));e["default"]=N.exports},"19f7":function(t,e,a){"use strict";var n=a("b7f0"),i=a.n(n);i.a},"2b8ce":function(t,e,a){"use strict";var n=a("b9a9"),i=a.n(n);i.a},"39f3":function(t,e,a){t.exports=a.p+"img/Basemapthumbnail1.5f8d6db2.png"},"42e8":function(t,e,a){t.exports=a.p+"img/Basemapthumbnail.6dc37597.png"},"7f7f":function(t,e,a){var n=a("86cc").f,i=Function.prototype,r=/^\s*function ([^ (]*)/,c="name";c in i||a("9e1e")&&n(i,c,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},"91b2":function(t,e,a){"use strict";a.d(e,"m",function(){return i}),a.d(e,"b",function(){return r}),a.d(e,"o",function(){return c}),a.d(e,"l",function(){return o}),a.d(e,"k",function(){return s}),a.d(e,"g",function(){return u}),a.d(e,"d",function(){return d}),a.d(e,"a",function(){return l}),a.d(e,"n",function(){return h}),a.d(e,"f",function(){return m}),a.d(e,"j",function(){return g}),a.d(e,"c",function(){return p}),a.d(e,"h",function(){return f}),a.d(e,"i",function(){return b}),a.d(e,"e",function(){return v});var n=a("b775"),i=function(t){return Object(n["a"])({url:"/ygjc/image/list",method:"post",data:t})},r=function(t){return Object(n["a"])({url:"/ygjc/image/add",method:"post",data:t})},c=function(t){return Object(n["a"])({url:"/ygjc/iterpretation/add",method:"post",data:t})},o=function(t){return Object(n["a"])({url:"/ygjc/image/detail",method:"post",data:t})},s=function(t){return Object(n["a"])({url:"/ygjc/iterpretation/list",method:"post",data:t})},u=function(t){return Object(n["a"])({url:"/ygjc/rlhdGroup/list",method:"post",data:t})},d=function(t){return Object(n["a"])({url:"/ygjc/rlhdGroup/add",method:"post",data:t})},l=function(t){return Object(n["a"])({url:"/ygjc/rlhdGroup/addDataToGroup",method:"post",data:t})},h=function(t){return Object(n["a"])({url:"/ygjc/rlhdGroup/detail",method:"post",data:t})},m=function(t){return Object(n["a"])({url:"/ygjc/image/delete",method:"post",data:t})},g=function(t){return Object(n["a"])({url:"/ygjc/imageContrast/list",method:"post",data:t})},p=function(t){return Object(n["a"])({url:"/ygjc/imageContrast/add",method:"post",data:t})},f=function(t){return Object(n["a"])({url:"/ygjc/imageContrast/like",method:"post",data:t})},b=function(t){return Object(n["a"])({url:"/ygjc/imageContrast/get",method:"post",data:t})},v=function(t){return Object(n["a"])({url:"/ygjc/imageContrast/delete",method:"post",data:t})}},b7f0:function(t,e,a){},b9a9:function(t,e,a){}}]);
//# sourceMappingURL=chunk-aeed77fe.949f021e.js.map