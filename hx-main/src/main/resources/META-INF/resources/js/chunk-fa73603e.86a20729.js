(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa73603e"],{"2e13":function(t,e,n){},"39f3":function(t,e,n){t.exports=n.p+"img/Basemapthumbnail1.5f8d6db2.png"},"3ac9":function(t,e,n){"use strict";n.d(e,"o",(function(){return a})),n.d(e,"n",(function(){return i})),n.d(e,"p",(function(){return o})),n.d(e,"g",(function(){return c})),n.d(e,"m",(function(){return s})),n.d(e,"l",(function(){return u})),n.d(e,"k",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"h",(function(){return f})),n.d(e,"j",(function(){return p})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return h})),n.d(e,"d",(function(){return y})),n.d(e,"q",(function(){return b})),n.d(e,"c",(function(){return v})),n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return w}));var r=n("b775"),a=function(t){return Object(r["a"])({url:"/ktdb/lmPoint/getPointList",method:"post",data:t})},i=function(t){return Object(r["a"])({url:"/sys/menu/getMenu",method:"post",data:t})},o=function(t){return Object(r["a"])({url:"/ktdb/lmMarkerMobile/getPreMarkerList",method:"post",data:t})},c=function(t){return Object(r["a"])({url:"/ktdb/lmBoard/getPreLmBoardList",method:"post",data:t})},s=function(t){return Object(r["a"])({url:"/ktdb/lmMarkerMobile/getMarkerByCoordinate",method:"post",data:t})},u=function(t){return Object(r["a"])({url:"/ktdb/lmMarkerMobile/getAllPreMarkerList",method:"post",data:t})},l=function(t){return Object(r["a"])({url:"/ktdb/lmBoard/getAllPreBoard",method:"post",data:t})},d=function(t){return Object(r["a"])({url:"/ktdb/lmMarkerMobile/getAllMarkerList",method:"post",data:t})},f=function(t){return Object(r["a"])({url:"/ktdb/lmBoard/getAllBoard",method:"post",data:t})},p=function(t){return Object(r["a"])({url:"/ktdb/lmPoint/getAllPoint",method:"post",data:t})},m=function(t){return Object(r["a"])({url:"/ktdb/lmPoint/export_Excel",method:"post",data:t})},h=function(t){return Object(r["a"])({url:"/ktdb/lmMarkerMobile/export_PreExcel",method:"post",data:t})},y=function(t){return Object(r["a"])({url:"/ktdb/lmBoard/export_PreExcel",method:"post",data:t})},b=function(t){return Object(r["a"])({url:"ktdb/dataRedlineRegister/list",method:"post",data:t})},v=function(t){return Object(r["a"])({url:"ktdb/environment/bottomChart/list",method:"post",data:t})},g=function(t){return Object(r["a"])({url:"ktdb/environment/bottomChart/add",method:"post",data:t})},w=function(t){return Object(r["a"])({url:"ktdb/environment/bottomChart/delete",method:"post",data:t})}},"42e8":function(t,e,n){t.exports=n.p+"img/Basemapthumbnail.6dc37597.png"},4634:function(t,e,n){for(var r=n("96dd"),a=n("7d56"),i=n("a6d5"),o=n("3f8b"),c=n("b8ea"),s=n("e3b3"),u=n("1277"),l=u("iterator"),d=u("toStringTag"),f=s.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=a(p),h=0;h<m.length;h++){var y,b=m[h],v=p[b],g=o[b],w=g&&g.prototype;if(w&&(w[l]||c(w,l,f),w[d]||c(w,d,b),s[b]=f,v))for(y in r)w[y]||i(w,y,r[y],!0)}},"72c0":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"tablet"}},[n("div",{staticClass:"queryBox"},[n("QueryBox",{ref:"getQuery",staticStyle:{width:"calc(100% - 80px)"},attrs:{formArr:t.queryFrom},on:{query:t.getQueryData}}),n("div",{staticClass:"queryBtns"},[n("Button",{staticClass:"btn-add",attrs:{type:"success",size:"small",icon:"md-add"},on:{click:function(e){e.stopPropagation(),t.$refs.reproduction.reproductionBuild=!0}}},[t._v("新建")])],1)],1),n("div",{staticClass:"content_box"},[n("div",[n("Table",{attrs:{border:"",stripe:"",loading:t.loading,columns:t.columns1,data:t.data1,"highlight-row":"","max-height":t.tableHeight}}),n("div",{staticClass:"page_box"},[n("Page",{attrs:{total:t.total,"page-size":t.pageSize,"show-total":""},on:{"on-change":t.pageChange}})],1)],1)]),n("div",{staticClass:"checking_box",class:{addActive:t.addActive}},[n("checkInfoMap",{ref:"checkInfoMap",attrs:{serviceUrl:t.serviceUrl},on:{signOut:t.signOut}})],1),n("reproductionAdd",{ref:"reproduction",on:{getTableData:t.getClearQueryData}})],1)},a=[],i=(n("efce"),n("4634"),n("ed8b"),n("97a3")),o=n("aff7"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map-box"},[n("div",{ref:"viewDiv",attrs:{id:"viewDiv"}}),n("Button",{staticClass:"sign-btn",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("signOut",!1)}}},[t._v("返回")])],1)},s=[],u=(n("63ff"),n("f8f9")),l=n("9ed9"),d=n("149e"),f=n("f831"),p=n("42e8"),m=n.n(p),h=n("39f3"),y=n.n(h),b={name:"checkInfoMap",data:function(){return{map:{},view:{}}},computed:{},props:{serviceUrl:String},components:{},watch:{},mounted:function(){this.createMap()},methods:{createMap:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,i,o,c,s,u,p,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].MapView;case 2:return e=t.sent,t.next=5,l["a"].Map;case 5:return n=t.sent,t.next=8,l["a"].Basemap;case 8:return r=t.sent,t.next=11,l["a"].FeatureLayer;case 11:return t.sent,t.next=14,l["a"].BasemapToggle;case 14:return a=t.sent,t.next=17,Object(f["f"])().then((function(t){return t}));case 17:return i=t.sent,t.next=20,Object(f["e"])().then((function(t){return t}));case 20:return o=t.sent,t.next=23,Object(f["d"])().then((function(t){return t}));case 23:return c=t.sent,t.next=26,Object(f["g"])().then((function(t){return t}));case 26:s=t.sent,u=new r({baseLayers:[o,c],title:"矢量地图",id:"myBasemap",thumbnailUrl:m.a}),p=new r({baseLayers:[i,s],title:"影像地图",id:"myBasemap1",thumbnailUrl:y.a}),this.map=new n({basemap:p}),this.view=new e({map:this.map,container:"viewDiv",center:d["a"].centerPoint,zoom:7}),h=new a({view:this.view,nextBasemap:u}),this.view.ui.add(h,"top-right");case 33:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addFeatureLayer:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].FeatureLayer;case 2:e=t.sent,n=new e({url:this.serviceUrl,outFields:["*"]}),this.map.layers.add(n);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addTileLayer:function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].MapImageLayer;case 2:e=t.sent,n=new e({url:this.serviceUrl}),this.map.layers.add(n);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),initCom:function(t){this.map.remove(this.insercLayer),this.map.layers.removeAll(),t?this.addFeatureLayer(this.serviceUrl):this.addTileLayer()}}},v=b,g=(n("f873"),n("6691")),w=Object(g["a"])(v,c,s,!1,null,"42f4aea9",null),k=w.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"taskAdd"}},[n("Modal",{attrs:{title:"新建地图图层"},on:{"on-cancel":t.reset},model:{value:t.reproductionBuild,callback:function(e){t.reproductionBuild=e},expression:"reproductionBuild"}},[n("Form",{ref:"add",staticStyle:{padding:"0 50px"},attrs:{model:t.AddData,rules:t.ruleValidate,"label-width":90}},[n("FormItem",{attrs:{prop:"name",label:"图层名称："}},[n("Input",{attrs:{placeholder:"请输入图层名称",size:"default"},model:{value:t.AddData.name,callback:function(e){t.$set(t.AddData,"name","string"===typeof e?e.trim():e)},expression:"AddData.name"}})],1),n("FormItem",{attrs:{prop:"type",label:"服务类型："}},[n("Select",{model:{value:t.AddData.type,callback:function(e){t.$set(t.AddData,"type",e)},expression:"AddData.type"}},[n("Option",{attrs:{value:0}},[t._v("影像")]),n("Option",{attrs:{value:1}},[t._v("矢量")])],1)],1),n("FormItem",{attrs:{prop:"url",label:"访问地址："}},[n("Input",{attrs:{placeholder:"请输入访问地址",size:"default"},model:{value:t.AddData.url,callback:function(e){t.$set(t.AddData,"url","string"===typeof e?e.trim():e)},expression:"AddData.url"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("确定")])],1)],1)],1)},x=[],D=(n("7cfd"),n("3ac9")),j={name:"TaskAdd",data:function(){return{AddData:{name:"",url:"",type:0,createBy:12},ruleValidate:{name:[{required:!0,message:"任务名称必须填写",trigger:"blur"}],url:[{required:!0,message:"任务名称必须填写",trigger:"blur"}]},reproductionBuild:!1}},methods:{addSubmit:function(){var t=this;this.$refs.add.validate((function(e){e&&Object(D["a"])({data:{name:t.AddData.name,url:t.AddData.url,type:t.AddData.type,createBy:t.AddData.createBy}}).then((function(e){"0000"===e.data.code?(t.$emit("getTableData"),t.$Notice.success({title:"创建图层成功"}),t.reproductionBuild=!1,t.AddData={name:"",url:"",createBy:12},t.reset()):t.$Message.info(e.data.msg)}))}))},reset:function(){this.AddData={name:"",url:"",type:0,createBy:12},this.$refs.add.resetFields()}}},L=j,S=Object(g["a"])(L,O,x,!1,null,"815f3dba",null),I=S.exports;function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(n,!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var B={name:"DataTable",data:function(){var t=this;return{tableHeight:48*Math.floor((window.innerHeight-300-40)/48)+40,queryData:{},columns1:[{title:"序号",key:"index",width:100,align:"center",render:function(e,n){return e("span",n.index+(t.pageNum-1)*t.pageSize+1)}},{title:"图层名称",align:"center",minWidth:150,key:"name"},{title:"发布时间",align:"center",width:250,key:"createDate"},{title:"访问地址",align:"center",minWidth:150,key:"url"},{title:"服务类型",align:"center",minWidth:80,render:function(t,e){return t("span",e.row.type?"矢量":"影像")}},{title:"操作",key:"address",width:170,align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small",icon:"md-eye"},style:{marginRight:"5px"},on:{click:function(){t.addActive=!0,t.serviceUrl=n.row.url,t.$refs.checkInfoMap.initCom(n.row.type)}}},"查看"),e("Button",{props:{type:"error",size:"small",icon:"md-trash"},on:{click:function(){t.infoId=n.row.id,t.$Modal.confirm({title:"确认",content:"请问您确定要删除该图层吗？",onOk:function(){t.infoDel()},onCancel:function(){}})}}},"删除")])}}],data1:[],obj:{},total:0,pageNum:1,pageSize:Math.floor((48*Math.floor((window.innerHeight-300-40)/48)+40)/48),infoId:"",loading:!1,addActive:!1,serviceUrl:""}},components:{QueryBox:o["a"],checkInfoMap:k,reproductionAdd:I},computed:{queryFrom:function(){return[{type:1,field:"name",title:"图层名称"}]}},created:function(){this.getSurveyTableList()},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.pageSize=Math.floor((window.innerHeight-350)/48)+1,t.getSurveyTableList()}),!1)},methods:{getQueryData:function(t){this.queryData=t,this.pageNum=1,this.getSurveyTableList()},getClearQueryData:function(){this.queryData={},this.pageNum=1,this.getSurveyTableList(),this.$refs.getQuery.cleardata()},getSurveyTableList:function(){var t=this;this.loading=!0,Object(D["c"])({data:q({pageSize:this.pageSize,pageNum:this.pageNum},this.queryData)}).then((function(e){"0000"===e.data.code&&(t.data1=e.data.data.rows,t.total=e.data.data.total,t.loading=!1)})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},pageChange:function(t){this.pageNum=t,this.getSurveyTableList()},infoDel:function(){var t=this;Object(D["b"])({data:{id:[this.infoId]}}).then((function(e){"0000"===e.data.code?(t.getSurveyTableList(),t.$Notice.success({title:"删除成功"})):t.$Notice.error({title:"删除失败"})})).catch((function(){t.$Notice.error({title:"服务器错误"})}))},signOut:function(t){this.addActive=t}}},M=B,_=(n("a271"),Object(g["a"])(M,r,a,!1,null,"155e775e",null));e["default"]=_.exports},"7cfd":function(t,e,n){var r=n("d3d8").f,a=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in a||n("f9a5")&&r(a,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},8868:function(t,e,n){var r=n("2498"),a=n("da27"),i=n("0cc1");t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*i((function(){n(1)})),"Object",o)}},"97a3":function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},a271:function(t,e,n){"use strict";var r=n("afde"),a=n.n(r);a.a},afde:function(t,e,n){},aff7:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"global-query"},[n("div",{ref:"queryBox",staticClass:"queryBox",on:{click:function(e){t.show=!t.show}}},[n("span",{directives:[{name:"show",rawName:"v-show",value:0===t.queryData.length,expression:"queryData.length===0"}],staticClass:"search-title"},[t._v("查询条件")]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.queryData.length>0,expression:"queryData.length > 0"}],staticClass:"search-title1"},[t._v("查询条件")]),n("div",{staticClass:"search-item"},t._l(t.queryData,(function(e,r){return n("span",{key:r,staticClass:"query"},[n("strong",[t._v(t._s(e.title))]),n("span",[t._v("\n            "+t._s(e.label)+"\n          ")])])})),0),n("div",{staticStyle:{width:"100px",float:"right"}},[n("Button",{attrs:{type:"primary",size:"small",icon:"ios-arrow-dropdown"}},[t._v("查询条件")])],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],ref:"queryDown",staticClass:"queryDown"},[n("Form",{ref:"formInline",attrs:{inline:"","label-width":100,model:t.formInline}},[t._l(t.formArr,(function(e,r){return n("FormItem",{key:r,attrs:{label:e.title+"："}},[1===e.type?n("Input",{staticClass:"queryInput",staticStyle:{width:"200px"},attrs:{type:"text",placeholder:e.title},model:{value:t.formInline[e.field],callback:function(n){t.$set(t.formInline,e.field,n)},expression:"formInline[item.field]"}}):t._e(),2===e.type?n("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:""},model:{value:t.formInline[e.field],callback:function(n){t.$set(t.formInline,e.field,n)},expression:"formInline[item.field]"}},t._l(e.data,(function(e,r){return n("Option",{key:r,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1):t._e(),3===e.type?n("DatePicker",{staticStyle:{width:"200px"},attrs:{size:"large",type:"year","start-date":new Date,placement:"bottom-end",placeholder:e.title},model:{value:t.formInline[e.field],callback:function(n){t.$set(t.formInline,e.field,n)},expression:"formInline[item.field]"}}):t._e(),4===e.type?n("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"daterange","start-date":new Date,placement:"bottom-end",placeholder:"请输入起止日期","on-open-change":"true"},model:{value:t.formInline[e.field],callback:function(n){t.$set(t.formInline,e.field,n)},expression:"formInline[item.field]"}}):t._e()],1)})),n("FormItem",{staticStyle:{float:"right"},attrs:{"label-width":0}},[n("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.query(e)}}},[n("i",{staticClass:"iconfont icon-chaxun1"}),t._v("查询")]),n("Button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return e.stopPropagation(),t.cleardata(e)}}},[n("i",{staticClass:"iconfont icon-zhongzhi"}),t._v("重置")])],1)],2)],1)])},a=[],i=n("cf45"),o={name:"global-query",data:function(){return{formInline:{},show:!1}},computed:{queryData:function(){var t=this,e=[],n=function(n){if("startAndEndTime"===n&&""===t.formInline[n][0]&&""===t.formInline[n][1]&&delete t.formInline[n],""!==t.formInline[n]&&void 0!==t.formInline[n]){var r,a=t.formArr.filter((function(t){return t.field===n}))[0];r=2===a.type?a.data.filter((function(e){return e.value===t.formInline[n]}))[0].label:3===a.type?Object(i["d"])(t.formInline[n]):4===a.type?Object(i["c"])(t.formInline[n][0])+" - "+Object(i["c"])(t.formInline[n][1]):t.formInline[n];var o={title:t.formArr.filter((function(t){return t.field===n}))[0].title,field:n,value:t.formInline[n],label:r};e.push(o)}};for(var r in this.formInline)n(r);return e}},props:{formArr:{type:Array,default:function(){return[]}}},mounted:function(){document.addEventListener("click",this.queryHide)},beforeDestroy:function(){document.removeEventListener("click",this.queryHide)},methods:{cleardata:function(){this.formInline={},this.query()},query:function(){this.show=!1;var t={};for(var e in this.queryData)"cl010"===this.queryData[e].field?t[this.queryData[e].field]=Object(i["d"])(this.queryData[e].value):t[this.queryData[e].field]=this.queryData[e].value;this.$emit("query",t)},queryHide:function(t){this.$refs.queryBox.contains(t.target)||this.$refs.queryDown.contains(t.target)||(this.show=!1)}}},c=o,s=(n("d533"),n("6691")),u=Object(s["a"])(c,r,a,!1,null,"574606c2",null);e["a"]=u.exports},cb2e:function(t,e,n){var r=n("7afe"),a=n("d93f").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},d533:function(t,e,n){"use strict";var r=n("2e13"),a=n.n(r);a.a},db8c:function(t,e,n){},e323:function(t,e,n){"use strict";var r=n("d3d8"),a=n("0614");t.exports=function(t,e,n){e in t?r.f(t,e,a(0,n)):t[e]=n}},e493:function(t,e,n){var r=n("c864"),a=n("0614"),i=n("6117"),o=n("2ab1"),c=n("549d"),s=n("25ae"),u=Object.getOwnPropertyDescriptor;e.f=n("f9a5")?u:function(t,e){if(t=i(t),e=o(e,!0),s)try{return u(t,e)}catch(n){}if(c(t,e))return a(!r.f.call(t,e),t[e])}},ed8b:function(t,e,n){var r=n("a9cf"),a=n("7d56");n("8868")("keys",(function(){return function(t){return a(r(t))}}))},efce:function(t,e,n){var r=n("2498"),a=n("f36d"),i=n("6117"),o=n("e493"),c=n("e323");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,n,r=i(t),s=o.f,u=a(r),l={},d=0;while(u.length>d)n=s(r,e=u[d++]),void 0!==n&&c(l,e,n);return l}})},f36d:function(t,e,n){var r=n("cb2e"),a=n("9d61"),i=n("8cac"),o=n("3f8b").Reflect;t.exports=o&&o.ownKeys||function(t){var e=r.f(i(t)),n=a.f;return n?e.concat(n(t)):e}},f873:function(t,e,n){"use strict";var r=n("db8c"),a=n.n(r);a.a}}]);
//# sourceMappingURL=chunk-fa73603e.86a20729.js.map